<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/Ajax.min.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/Ajax.min.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module Ajax
 * @description AJAX module for AJAX stuff
 * @version 1.0
 * @since 1.1
 * @license MIT
 * @author Maximilian Berkmann &lt;maxieberkmann@gmail.com>
 * @copyright Maximilian Berkmann 2016
 * @requires module:essence
 * @type {Module}
 * @exports Ajax
 */
function GET(e){return new RegExp("[?&amp;]"+encodeURIComponent(e)+"=([^&amp;]*)").exec(location.search)?decodeURIComponent(new RegExp("[?&amp;]"+encodeURIComponent(e)+"=([^&amp;]*)").exec(location.search)[1]):void 0}function POST(e,t){var s=document.createElement("form")
s.setAttribute("method","post"),s.setAttribute("action",e)
for(var n in t)if(t.hasOwnProperty(n)){var r=document.createElement("input")
r.setAttribute("type","hidden"),r.setAttribute("name",n),r.setAttribute("value",t[n]),s.appendChild(r)}document.body.appendChild(s),s.submit()}function PUT(){}function DELETE(){}function load(e,t){var s=new XHR(e,"get",!0,t)
s.init()}function loadJSON(e){var t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")
t.overrideMimeType("application/json"),t.open("GET",(e||"data")+".json",!0),t.onreadystatechange=function(){4===t.readyState&amp;&amp;200===t.status&amp;&amp;function(){return $G.json=JSON.parse(t.responseText),JSON.parse(t.responseText)||$G.json}()},t.send(null)
try{return JSON.parse(t.response)}catch(s){return $G.json}}function XHR(e,t,s,n,r,o,i,a,h){this.url=e||location.href,this.method=t||"GET",this.response=null,this.credentials=a||["",""],this.async=s||!1,this.req=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.forIE=!window.XMLHttpRequest,this.state=getXHRMsg(0),this.status=this.req.status,this.body=i||""
var c=this
return this.req.onreadystatechange=function(){c.state=getXHRMsg(c.req.readyState),c.handleResponse(),c.status!=this.status&amp;&amp;(c.status=this.status),4!==this.readyState||200!==this.status&amp;&amp;204!==this.status?3===this.readyState?c.onLoad(this):this.status>=400&amp;&amp;this.status&lt;=505&amp;&amp;c.onFailure(this):c.onSuccess(this)},this.onChange=this.req.onreadystatechange,this.onSuccess=n||function(){this.handleResponse(),console.log("%c[XHR] %s%c:\n%s","color: #0f0",this.status+" "+getHTTPMsg(this.status),"color: #000;",this.response)},this.onFailure=r||function(){this.handleResponse(),console.log("%c[XHR] %s%c:\n%s","color: #f00",this.status+" "+getHTTPMsg(this.status),"color: #000;",this.response)},this.onLoad=o||function(){this.handleResponse(),console.log("%c[XHR] %s%c:\n%s","color: #666",this.state,"color: #000;",this.status+" "+getHTTPMsg(this.status))},this.req.onload=function(){console.info("%c[XHR]%c Loading the %s request to %s","color: #666;","color: #000;",c.method,c.url)},this.req.onerror=function(){console.error("%c[XHR]%c There was an error in the request !","color: #f00","color: #000")},this.handleResponse=function(){switch(this.req.responseType){case"":case"text":this.response=this.req.responseText
break
case"json":this.response=this.req.responseXML
break
default:this.response=this.req.response}},this.init=function(e){h&amp;&amp;this.req.overrideMimeType(h),this.req.open(this.method,this.url,this.async,this.credentials[0],this.credentials[1]),this.header("Access-Control-Allow-Origin",getDirectoryPath(this.url)+", "+getDirectoryPath())
var t=[this.method]
"GET"!=this.method&amp;&amp;t.push("GET"),"POST"!=this.method&amp;&amp;t.push("POST"),this.header("Access-Control-Allow-Methods",t.toStr(!0)),this.header("Access-Control-Allow-Max-Age","1728000"),""!=this.credentials[0]&amp;&amp;""!=this.credentials[1]&amp;&amp;(this.req.withCredentials=!0,this.header("Access-Control-Allow-Credentials","true")),"POST"!==this.method&amp;&amp;"DELETE"!==this.method||this.header("Body",this.body),this.onChange(),e&amp;&amp;e.map(function(e){c.header(e[0],e[1])}),this.req.send(isNon(this.body)?this.response:this.body)},this.header=function(e,t){return t?void this.req.setRequestHeader(e,t):e?this.req.getResponseHeader(e):this.req.getAllResponseHeaders()},this.toString=function(){return"XHR(url='"+this.url+"', method='"+this.method+"', response='"+this.response+"', credentials="+this.credentials+", async="+this.async+", state='"+this.state+"', status="+this.status+", forIE="+this.forIE+", body='"+this.body+"')"},this.viewResponse=function(e){this.handleResponse(),$e(e?"#"+e:"body").write(this.response,!0)},this}function CORS(e,t,s,n,r,o,i,a,h){var c=this
this.xhr=new XHR(e,t,s||!0,n||function(){this.handleResponse(),c.update(),console.log("%c[CORS] %s%c:\n%s","color: #0f0",this.status+" "+getHTTPMsg(this.status),"color: #000;",this.response)},r||function(){this.handleResponse(),c.update(),console.log("%c[CORS] %s%c:\n%s","color: #f00",this.status+" "+getHTTPMsg(this.status),"color: #000;",this.response)},o||function(){this.handleResponse(),c.update(),console.log("%c[CORS] %s%c:\n%s","color: #666",this.status+" "+getHTTPMsg(this.status),"color: #000;",this.response)},i,a,h)
try{"withCredentials"in this.xhr.req||"undefined"==typeof XDomainRequest||(this.xhr.req=new XDomainRequest)}catch(u){}return this.init=function(){this.xhr.init([["Access-Control-Request-Headers","X-Custom-Header"],["Access-Control-Allow-Headers","Cache-Control, Content-Language, Content-Type, Expires, Last-Modified, Pragma, Body, Origin, X-Custom-Headers, X-PINGOTHER"],["Access-Control-Expose-Headers","X-Custom-Header"]]),this.update()},this.response=this.xhr.response,this.url=this.xhr.url,this.method=this.xhr.method,this.body=i||"",this.forIE="undefined"!=typeof XDomainRequest,this.toString=function(){return"CORS(url="+this.url+", method="+this.method+", body="+this.body+", forIE="+this.forIE+", response="+this.response+", xhr="+this.xhr.toString()+")"},this.update=function(){this.xhr.handleResponse(),this.response=this.xhr.response,this.url=this.xhr.url,this.method=this.xhr.method,isNon(this.body)&amp;&amp;(this.body=this.xhr.body)},this.silence=function(){this.xhr.req.onerror=$f},this}function AJAXpost(e,t,s){var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r=""
return n.onreadystatechange=function(){4===n.readyState&amp;&amp;200===n.status&amp;&amp;(r=s?n.responseXML:n.responseText)},n.open("POST",t,!0),s?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(e)):(n.setRequestHeader("Content-Type","text/plain"),n.send(e)),r}function getHTTPMsg(e){switch(e){case 100:return"Continue"
case 101:return"Switching Protocols"
case 200:return"OK"
case 201:return"Created"
case 202:return"Accepted"
case 203:return"Non-Authoriative Information"
case 204:return"No Content"
case 205:return"Reset Content"
case 206:return"Partial Content"
case 300:return"Multiple Choices"
case 301:return"Moved Permanently"
case 302:return"Found"
case 303:return"See Other"
case 304:return"Not Modified"
case 305:return"Use Proxy"
case 306:return"Unused"
case 307:return"Temporary Redirect"
case 400:return"Bad Request"
case 401:return"Unauthorized"
case 402:return"Payment Required"
case 403:return"Forbidden"
case 404:return"Not Found"
case 405:return"Method Not Allowed"
case 406:return"Not Acceptable"
case 407:return"Proxy Authentification Required"
case 408:return"Request Timeout"
case 409:return"Conflict"
case 410:return"Gone"
case 411:return"Length Required"
case 412:return"Precondition Failed"
case 413:return"Request Entity Too Large"
case 414:return"Request-url Too Long"
case 415:return"Bad Request"
case 416:return"Unsupported Media Type"
case 417:return"Expectation Failed"
case 500:return"Internal Server Error"
case 501:return"Not Implemented"
case 502:return"Bad Gateway"
case 503:return"Service Unavailable"
case 504:return"Gateway Timeout"
case 505:return"HTTP Version Not Supported"
default:return"Unknown status"}}function getXHRMsg(e){return["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"][e]}function createCORSRequest(e,t){var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")
return"withCredentials"in s||void 0!==s.withCredentials?s.open(e||"get",t||getDirectoryPath(),!0):"undefined"!=typeof XDomainRequest||XDomainRequest?(s=new XDomainRequest,s.open(e||"GET",t||getDirectoryPath())):s=null,s}function setCORS(e,t,s,n,r){var o=null,i=createCORSRequest(t,e||getDirectoryPath())
if(!i)throw new Error("CORS not supported.")
return n&amp;&amp;(i.withCredentials=!0,i.setRequestHeader("Access-Control-Allow-Credentials","true")),i.setRequestHeader("Access-Control-Allow-Origin",getDirectoryPath()),i.setRequestHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE"),i.setRequestHeader("Access-Control-Allow-Headers","Cache-Control, Content-Language, Content-Type, Expires, Last-Modified, Pragma, Body, Origin"),i.setRequestHeader("Access-Control-Request-Headers","X-Custom-Header"),i.setRequestHeader("Access-Control-Allow-Max-Age","1728000"),i.onload=function(){o=s?i.responseXML:i.responseText},i.onreadystatechange=function(){4===i.readyState&amp;&amp;200===i.status&amp;&amp;(o=s?i.responseXML:i.responseText)},i.onerror=function(){Essence.say("There was an error in the CORS request","erro")},r?i.send(r):i.send(),o}var Ajax=new Module("Ajax","AJAX stuff")
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Ajax.html">Ajax</a></li><li><a href="module-DataStruct.html">DataStruct</a></li><li><a href="module-DOM.html">DOM</a></li><li><a href="module-essence.html">essence</a></li><li><a href="module-Files.html">Files</a></li><li><a href="module-Maths.html">Maths</a></li><li><a href="module-Misc.html">Misc</a></li><li><a href="module-QTest.html">QTest</a></li><li><a href="module-Security.html">Security</a></li><li><a href="module-UI.html">UI</a></li><li><a href="module-Web.html">Web</a></li></ul><h3>Externals</h3><ul><li><a href="Array_external_Array.html">Array</a></li><li><a href="external-essence-$G.module_essence-external_$G.html">$G</a></li><li><a href="external-String.html">String</a></li><li><a href="Function_external_Function.html">Function</a></li><li><a href="Number_external_Number.html">Number</a></li><li><a href="Object_external_Object.html">Object</a></li><li><a href="String_external_String.html">String</a></li></ul><h3>Classes</h3><ul><li><a href="module-Ajax-CORS.html">CORS</a></li><li><a href="module-Ajax-XHR.html">XHR</a></li><li><a href="module-DataStruct-Archive.html">Archive</a></li><li><a href="module-DataStruct-EventTable.html">EventTable</a></li><li><a href="module-DataStruct-Graph.html">Graph</a></li><li><a href="module-DataStruct-LinkedList.html">LinkedList</a></li><li><a href="module-DataStruct-Map.html">Map</a></li><li><a href="module-DataStruct-MultiStream.html">MultiStream</a></li><li><a href="module-DataStruct-Node.html">Node</a></li><li><a href="module-DataStruct-NTreeNode.html">NTreeNode</a></li><li><a href="module-DataStruct-PathNode.html">PathNode</a></li><li><a href="module-DataStruct-Queue.html">Queue</a></li><li><a href="module-DataStruct-QueueArray.html">QueueArray</a></li><li><a href="module-DataStruct-QueueList.html">QueueList</a></li><li><a href="module-DataStruct-Set.html">Set</a></li><li><a href="module-DataStruct-SortedSet.html">SortedSet</a></li><li><a href="module-DataStruct-Stack.html">Stack</a></li><li><a href="module-DataStruct-StackArray.html">StackArray</a></li><li><a href="module-DataStruct-StackList.html">StackList</a></li><li><a href="module-DataStruct-Stream.html">Stream</a></li><li><a href="module-DataStruct-TreeNode.html">TreeNode</a></li><li><a href="module-DataStruct-virtualHistory.html">virtualHistory</a></li><li><a href="module-DOM-checkBrowser.html">checkBrowser</a></li><li><a href="module-essence-Element.html">Element</a></li><li><a href="module-essence-Module.html">Module</a></li><li><a href="module-Files-Spider.html">Spider</a></li><li><a href="module-Maths-Equation.html">Equation</a></li><li><a href="module-Maths-InvNorm.html">InvNorm</a></li><li><a href="module-Misc-AI.html">AI</a></li><li><a href="module-Misc-Machine.html">Machine</a></li><li><a href="module-Misc-Memory.html">Memory</a></li><li><a href="module-Misc-Scoreboard.html">Scoreboard</a></li><li><a href="module-QTest-InvalidParamError.html">InvalidParamError</a></li><li><a href="module-UI-AABB.html">AABB</a></li><li><a href="module-UI-Box.html">Box</a></li><li><a href="module-UI-Circ.html">Circ</a></li><li><a href="module-UI-Line.html">Line</a></li><li><a href="module-UI-Polygon.html">Polygon</a></li><li><a href="module-UI-Pt.html">Pt</a></li><li><a href="module-UI-Vector.html">Vector</a></li><li><a href="module-Web-Console.html">Console</a></li><li><a href="module-Web-DB.html">DB</a></li><li><a href="module-Web-Debugger.html">Debugger</a></li><li><a href="module-Web-Editor.html">Editor</a></li><li><a href="module-Web-IDE.html">IDE</a></li><li><a href="module-Web-Parser.html">Parser</a></li><li><a href="module-Web-Preview.html">Preview</a></li><li><a href="module-Web-Toolbar.html">Toolbar</a></li><li><a href="module-Web-WebApp.html">WebApp</a></li><li><a href="module-Web-WebPage.html">WebPage</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-UI-Shape.html">Shape</a></li></ul><h3>Global</h3><ul><li><a href="global.html#$f">$f</a></li><li><a href="global.html#$G">$G</a></li><li><a href="global.html#base64">base64</a></li><li><a href="global.html#BrowserDetect">BrowserDetect</a></li><li><a href="global.html#debugging">debugging</a></li><li><a href="global.html#DocTemplate">DocTemplate</a></li><li><a href="global.html#modules">modules</a></li><li><a href="global.html#sec2time">sec2time</a></li><li><a href="global.html#Sys">Sys</a></li><li><a href="global.html#testMode">testMode</a></li><li><a href="global.html#UnitTest">UnitTest</a></li><li><a href="global.html#WifiTest">WifiTest</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Fri Oct 21 2016 23:41:27 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
