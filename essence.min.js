function Element(t){if(/^([\#\.\* _-\`\~\&]\W*|\S|undefined|null|())$/.test(t))throw new SyntaxError("Element cannot accept the selector '"+t+"' as it's invalid.")
return"#"==t[0]?this.node=document.querySelector(t)||document.getElementById(t.slice(1,t.length)):"."==t[0]?this.node=document.querySelector(t)||document.getElementByClassName(t.slice(1,t.length)):"*"==t[0]?this.node=document.querySelectorAll(t.slice(1,t.length))||document.getElementsByTagName(t.slice(1,t.length)):this.node=document.querySelector(t),this.val=function(t,e){if(isType(this.node,"array")){var r=[]
for(i=0;i<this.node.length;i++)!this.node[i].value||t||e?this.node[i].innerHTML&&t&&!e?r.push(this.node[i].innerHTML):!this.node[i].innerText||t||e?this.node[i].outerHTML&&!t&&e?r.push(this.node[i].outerHTML):r.push(this.node[i].value?this.node[i].value:this.node[i].innerText):r.push(this.node[i].innerText):r.push(this.node[i].value)
return r}return!this.node.value||t||e?this.node.innerHTML&&t&&!e?this.node.innerHTML:!this.node.innerText||t||e?this.node.outerHTML&&!t&&e?this.node.outerHTML:this.node.value?this.node.value:this.innerText:this.node.innerText:this.node.value},this.size=function(){return this.val().length},this.isEmpty=function(){return this.val()===!1||void 0===this.val()||null===this.val()||""===this.val()||this.val()===[]||this.val()==={}},this.write=function(t,e,r){if(isType(this.node,"array")){for(i=0;i<this.node.length;i++)!this.node[i].value||e||r?this.node[i].innerHTML&&e&&!r?this.node[i].innerHTML=isType(t,"array")?t[i]:t:!this.node[i].innerText||getHTML||withTags?this.node[i].outerHTML&&!getHTML&&withTags?this.node[i].outerHTML=isType(t,"array")?t[i]:t:this.node[i].value?this.node[i].value=isType(t,"array")?t[i]:t:this.node[i].innerText=isType(t,"array")?t[i]:t:this.node[i].innerText=isType(t,"array")?t[i]:t:this.node[i].value=isType(t,"array")?t[i]:t
return arr}!this.node.value||e||r?this.node.innerHTML&&e&&!r?this.node.innerHTML=t:!this.node.innerText||e||r?this.node.outerHTML&&r&&!e?this.node.outerHTML=t:this.node.value?this.node.value=t:this.innerText=t:this.node.innerText=t:this.node.value=t},this.before=function(t,e,r){if(isType(this.node,"array")){for(i=0;i<this.node.length;i++)!this.node[i].value||e||r?this.node[i].innerHTML&&e&&!r?this.node[i].innerHTML=isType(t,"array")?t[i]+this.node[i].innerHTML:t+this.node[i].innerHTML:!this.node[i].innerText||getHTML||withTags?this.node[i].outerHTML&&!getHTML&&withTags?this.node[i].outerHTML=isType(t,"array")?t[i]+this.node[i].outerHTML:t+this.node[i].outerHTML:this.node[i].value?this.node[i].value=isType(t,"array")?t[i]+this.node[i].value:t+this.node[i].value:this.node[i].innerText=isType(t,"array")?t[i]+this.node[i].innerText:t+this.node[i].innerText:this.node[i].innerText=isType(t,"array")?t[i]+this.node[i].innerText:t+this.node[i].innerText:this.node[i].value=isType(t,"array")?t[i]+this.node[i].value:t+this.node[i].value
return arr}!this.node.value||e||r?this.node.innerHTML&&e&&!r?this.node.innerHTML=t+this.node.innerHTML:!this.node.innerText||e||r?this.node.outerHTML&&r&&!e?this.node.outerHTML=t+this.node.outerHTML:this.node.value?this.node.value=t+this.node.value:this.innerText=t+this.innerText:this.node.innerText=t+this.node.innerText:this.node.value=t+this.node.value},this.after=function(t,e,r){if(isType(this.node,"array")){for(i=0;i<this.node.length;i++)!this.node[i].value||e||r?this.node[i].innerHTML&&e&&!r?this.node[i].innerHTML+=isType(t,"array")?t[i]:t:!this.node[i].innerText||getHTML||withTags?this.node[i].outerHTML&&!getHTML&&withTags?this.node[i].outerHTML+=isType(t,"array")?t[i]:t:this.node[i].value?this.node[i].value+=isType(t,"array")?t[i]:t:this.node[i].innerText+=isType(t,"array")?t[i]:t:this.node[i].innerText+=isType(t,"array")?t[i]:t:this.node[i].value+=isType(t,"array")?t[i]:t
return arr}!this.node.value||e||r?this.node.innerHTML&&e&&!r?this.node.innerHTML+=t:!this.node.innerText||e||r?this.node.outerHTML&&r&&!e?this.node.outerHTML+=t:this.node.value?this.node.value+=t:this.innerText+=t:this.node.innerText+=t:this.node.value+=t},this.remove=function(t,e){if(isArray(this.val()))for(i=0;i<this.val().length;i++)this.val()[i]==t&&this.write(this.val().slice(0,i).concat(this.val().slice(i+1,this.val().length)))
this.write(this.val().split(t).join(e||""))},this.setCSS=function(t,e){if(isType(this.node,"array"))for(i=0;i<this.node.length;i++)this.node[i].style[t]=isType(e,"array")?e[i]:e
else this.node.style[t]=e},this.setStyles=function(t){for(i=0;i<t.length-1;i+=2)this.setCSS(t[i],t[i+1])},this.css=function(t){if(isType(this.node,"array")){var e=[]
for(i=0;i<this.node.length;i++)e.push(this.node[i].style[t])
return e}return this.node.style[t]},this.hasClass=function(t){if(isType(this.node,"array")){var e=[]
for(i=0;i<this.node.length;i++)e.push(new RegExp(" "+t+" ").test(" "+this.node[i].className+" ")||new RegExp(" "+t+" ").test(" "+this.node[i][t]+" ")||this.node[i].style.clasName==t)}return new RegExp(" "+t+" ").test(" "+this.node.className+" ")||new RegExp(" "+t+" ").test(" "+this.node[t]+" ")||this.node.style.clasName==t},this.hasCSS=function(t){if(isType(this.node,"array")){var e=[]
for(i=0;i<this.node.length;i++)e.push(new RegExp(" "+t+" ").test(" "+this.node[i].style[t]+" ")||new RegExp(" "+t+" ").test(" "+this.node[i][t]+" "))}return new RegExp(" "+t+" ").test(" "+this.node.style[t]+" ")||new RegExp(" "+t+" ").test(" "+this.node[t]+" ")},this.addClass=function(t){if(isType(this.node,"array"))for(i=0;i<this.node.length;i++)this.node[i].hasClass(clasName)||(this.node[i].className+=" "+clasName)
else this.hasClass(t)||(this.node.className+=" "+t)},this.rmClass=function(t){var e=" "+this.node.className.replace(/[\t\r\n]/g," ")+" "
if(isType(this.node,"array")){for(i=0;i<this.node.length;i++)if(e=" "+this.node[i].className.replace(/[\t\r\n]/g," ")+" ",this.node[i].hasClass(clasName)){for(;e.indexOf(" "+t+" ")>=0;)e=e.replace(" "+t+" "," ")
this.node[i].className=e.replace(/^\s+|\s+$/g,"")}}else if(this.hasClass(t)){for(;e.indexOf(" "+t+" ")>=0;)e=e.replace(" "+t+" "," ")
this.node.className=e.replace(/^\s+|\s+$/g,"")}},this.toggleCSS=function(t,e){if("visibility"==t)"visible"==this.css("visibility")?this.setCSS("visibility","hidden"):this.setCSS("visibility","visible")
else if("enabled"==t)"enabled"==this.css("enabled")?this.setCSS("enabled","disabled"):this.setCSS("enabled","enabled")
else if(!isNon(t)&&!isNon(e))for(isNon(this.css(t))&&this.setCSS(t,e[0]),i=0;i<e.length;i++)if(this.css(t)==e[i]){this.setCSS(t,e[(i+1)%e.length])
break}},this.show=function(){this.setCSS("opacity",1),this.setCSS("display","block")},this.hide=function(){this.setCSS("opacity",0),this.setCSS("display","none")},this.on=function(t,e){var r=["abort","autocomplete","autocompleteerror","beforeunload","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","cuechange","dblclick","devicemotion","deviceorientation","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","hashchange","input","invalid","keydown","keypress","keyup","languagechange","load","loadeddata","loadedmetadata","loadstart","message","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","offline","online","pagehide","pageshow","pause","play","playing","popstate","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","show","stalled","storage","submit","suspend","timeupdate","toggle","transitionend","unload","volumechange","waiting","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend","wheel"]
for(i=0;i<r.length;i++)t.normal()==r[i]&&this.node.addEventListener(t,e,!1)},this.toString=function(){return"[object Element]"},this}function $n(t){return $e(t).node}function include(t,e){e||(e=t.indexOf(".js")>0?"script":"link")
var i=document.createElement(e)
"script"==e?i.src=t:i.href=t,i.type="script"==e?"text/javascript":"text/css",document.head.appendChild(i)}function print(t,e,i){i||(i="body"),$e(i).after(t,e)}function println(t,e){e||(e="body"),$e(e).after(t+"<br />",!0)}function exclude(t,e){e||(e=t.indexOf(".js")>0?"script":"link")
var i=document.createElement(e)
"script"==e?i.src=t:i.href=t,i.type="script"==e?"text/javascript":"text/css",document.head.removeChild(i)}function addMetaData(t,e,i){var r=document.createElement("meta")
i?r.httpEquiv=i:r.name=t,r.content=e,document.head.appendChild(r)}function xor(t,e){return t&&!e||!t&&e}function noRightClick(){document.oncontextmenu=new Function("return false")}function reloadPage(t){1==t?location.reload():2==t?location.href=location.href:reloadPage(1)}function redirect(t,e,i){e||(e=3e3)
var r=Math.floor(e/1e3)
$("#"+i).write("<h2>Redirecting to <ins>"+t+"</ins> ...<br />in <span id='timeleft'>"+r+"</span>s</h2>",!0),r--,$e("#timeleft").write(r),setTimeout("location='"+t+"';",e)}function isValid(t,e){var i,r=!0
switch(e.toLowerCase()){case"email":i=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r=t.length>=9&&t.length<64
break
case"tel":i=/^\+(?:[0-9] ?){6,14}[0-9]$/
break
case"username":i=/^[A-Za-z_0-9-]+$/,r=t.length>3&&t.length<=16
break
case"name":i=/^[:alpha:]{2,35}$/
break
case"price":i=/^[0-9]*\x2e[0-9]{2}$/,r=t.length>3
break
case"number":i=/\d/
break
case"date":i=/(\d{1, 2}\/d{1, 2}\/d{2, 4})/,r=t.split("/")[0]<=31&&t.split("/")[1]<=12
break
case"hex":i=/(#|0x)?([A-Fa-f0-9]){3}(([A-Fa-f0-9]){3})?/
break
case"tag":i=/(\<(\/?[^\>]+)\>)/
break
case"password":i=/|^\c]\w{8,}/
break
case"file":i=/^[\S]+([A-Za-z0-9_]*\.(jpg|png|gif|ico|bmp))$/
break
case"variable":i=/^[A-Za-z_$$]+[0-9]*[A-Za-z_$$]+$/
break
case"color":i=/^(#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6}))|(rgb\(([0-9]+\,\s){2}([0-9]+)\))|(rgba\(([0-9]+\,\s){3}((0|1|)\.[0-9]*)\))|(hsl\(([0-9]+\,\s){2}([0-9]+)\))|(hsla\(([0-9]+\,\s){3}((0|1|)\.[0-9]*)\))$/
break
case"url":i=/^((http(|s)\:\/\/)|((file|ftp)\:\/\/\/))(\/[A-Za-z0-9_-]*)|[A-Za-z0-9_-]$/
break
case"ip":i=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/
break
case"time":i=/^[0-5][0-9](\x3a|\.)[0-5][0-9]|([0-5][0-9]\x3a[0-5][0-9]){0, 2}(\x3a|\.)[0-5][0-9]$/
break
default:i=/\w/}return i.test(t)&&r}function validate(t,e){t||(t=document.forms[0])
var r=!0
for(i=0;i<t.length;i++)(e||t[i].required)&&(r="username"===t[i].name||"price"===t[i].name?r&&isValid(t[i].value,t[i].name):"password"===t[i].type||"email"===t[i].type||"tel"===t[i].type||"date"===t[i].type||"hex"===t[i].type||"variable"===t[i].type||"file"===t[i].type||"hidden"===t[i].type?r&&isValid(t[i].value,t[i].type):"price"===t[i].name?r&&isValid(t[i].value,t[i].name):t[i].name.indexOf("name")>=0?r&&isValid(t[i].value,"name"):"checkbox"===t[i].type&&t[i].checked?r&&!0:r&&!isNon(t[i].value))
return r}function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function is2dArray(t){if(!isArray(t))return!1
for(i=0;i<t.length;i++)if(isArray(t[i]))return!0}function isType(t,e){return e=e[0].toUpperCase()+e.slice(1,e.length).toLowerCase(),Object.prototype.toString.call(t)==="[object "+e+"]"}function isCustomType(t,e){return getCustomType(t).toLowerCase()===e.toLowerCase()}function getType(t,e){var i=Object.prototype.toString.call(t)
return e?i:i.split(" ")[1].slice(0,i.split(" ")[1].length-1)}function getCustomType(t,e){var i=t.toLocaleString()
return i.indexOf("[")>-1?e?i:i.split(" ")[1].slice(0,i.split(" ")[1].length-1):i.split("(")[0].trim()}function timesLiteral(t){switch(t){case 1:return"once"
case 2:return"twice"
default:return t+" times"}}function escapeHTML(t){var e=document.createElement("span")
return e.appendChild(document.createTextNode(t)),e.innerHTML}function unescapeHTML(t){var e=document.createElement("span")
return e.removeChild(document.createTextNode(t)),e.innerText}function isNon(t){return t===!1||void 0===t||null===t||""===t||t===[]||t==={}}function copy(t){if(isType(t,"String")||isType(t,"Number")||isType(t,"Boolean"))return t
var e
for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i])
return e}function toMaxSize(){try{if(clientWidth||ActiveX||ActiveXObject)window.resizeTo(clientWidth,clientHeight)
else if(client.Width)window.resizeTo(client.Width,client.Height)
else if(client.width)window.resizeTo(client.width,client.height)
else if(clientX)window.resizeTo(clientX,clientY)
else if(client.X)window.resizeTo(client.X,client.Y)
else if(client.x)window.resizeTo(client.x,client.y)
else if(screenWidth)window.resizeTo(screenWidth,screenHeight)
else if(screen.Width)window.resizeTo(screen.Width,screen.Height)
else if(screen.width)window.resizeTo(screen.width,screen.height)
else if(screenX)window.resizeTo(screenX,screenY)
else if(screen.X)window.resizeTo(screen.X,screen.Y)
else if(screen.x)window.resizeTo(screen.x,screen.y)
else if(deviceWidth)window.resizeTo(deviceWidth,deviceHeight)
else if(device.Width)window.resizeTo(device.Width,device.Height)
else if(device.width)window.resizeTo(device.width,device.height)
else if(deviceX)window.resizeTo(deviceX,deviceY)
else if(device.X)window.resizeTo(device.X,device.Y)
else if(device.x)window.resizeTo(device.x,device.y)
else if(pageWidth)window.resizeTo(pageWidth,pageHeight)
else if(page.Width)window.resizeTo(page.Width,page.Height)
else if(page.width)window.resizeTo(page.width,page.height)
else if(pageX)window.resizeTo(pageX,pageY)
else if(page.X)window.resizeTo(page.X,page.Y)
else if(page.x)window.resizeTo(page.x,page.y)
else if(windowWidth)window.resizeTo(windowWidth,windowHeight)
else if(window.Width)window.resizeTo(window.Width,window.Height)
else if(window.width)window.resizeTo(window.width,window.height)
else if(windowX)window.resizeTo(windowX,windowY)
else if(window.X)window.resizeTo(window.X,window.Y)
else if(window.x)window.resizeTo(window.x,window.y)
else if(monitorWidth)monitor.resizeTo(monitorWidth,monitorHeight)
else if(monitor.Width)monitor.resizeTo(monitor.Width,monitor.Height)
else if(monitor.width)monitor.resizeTo(monitor.width,monitor.height)
else if(monitorX)monitor.resizeTo(monitorX,monitorY)
else if(monitor.X)monitor.resizeTo(monitor.X,monitor.Y)
else if(monitor.x)monitor.resizeTo(monitor.x,monitor.y)
else if(frameWidth)frame.resizeTo(frameWidth,frameHeight)
else if(frame.Width)frame.resizeTo(frame.Width,frame.Height)
else if(frame.width)frame.resizeTo(frame.width,frame.height)
else if(frameX)frame.resizeTo(frameX,frameY)
else if(frame.X)frame.resizeTo(frame.X,frame.Y)
else{if(!frame.x)return!1
frame.resizeTo(frame.x,frame.y)}}catch(t){}}function getScrenDim(){return[screen.width,screen.height]}function getWinDim(){return[screen.availWidth,screen.availHeight]}function getCookie(t){var e,i,r,s=document.cookie.split(";")
for(e=0;e<s.length;e++)if(i=s[e].substr(0,s[e].indexOf("=")),r=s[e].substr(s[e].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==t)return unescape(r)}function setCookie(t,e,i){i%=99983489
var r=new Date
r.setDate(r.getDate()+i)
var s=escape(e)+(null==i?"":"; expires="+r.toUTCString())
document.cookie=t+"="+s}function getMetaData(){var t=$n("*meta"),e=[],r=[]
for(i=0;i<t.length;i++)e[i]=t[i].name||t[i].httpEquiv||t[i].title,r[i]=t[i].content||t[i].value
return[e,r]}function getResources(t){var e=$n("*link"),r=$n("*script"),s=($n("*style"),[]),n=$n("*a"),o=$n("*img"),a=$n("*input image"),h=[$n("*div"),$n("*section"),$n("*td"),$n("*th"),$n("*li")]
for(i=0;i<e.length;i++)isNon(e[i])||(s[i]=e[i].href),Essence.say(e[i].href.split("/")[e[i].href.split("/").length-1]+" has been added to the resources getter.","info")
for(i=0;i<r.length;i++)isNon(r[i])||s.push(r[i].src),Essence.say(r[i].src.split("/")[r[i].src.split("/").length-1]+" has been added to the resources getter.","info")
for(i=0;i<n.length;i++)isNon(n[i])||s.push(n[i].href),Essence.say(n[i].href.split("/")[n[i].href.split("/").length-1]+" has been added to the resources getter.","info")
for(i=0;i<o.length;i++)isNon(o[i])||s.push(o[i].src),Essence.say(o[i].src.split("/")[o[i].src.split("/").length-1]+" has been added to the resources getter.","info")
for(i=0;i<a.length;i++)isNon(a[i])||s.push(a[i].src),Essence.say(a[i].src.split("/")[a[i].src.split("/").length-1]+" has been added to the resources getter.","info")
for(i=0;i<h.length;i++)for(j=0;j<h[i].length;j++){s.push(h[i][j].style.backgroundImage.slice(4,h[i][j].style.backgroundImage.length-1))
var l=h[i][j].style.backgroundImage.slice(4,h[i][j].style.backgroundImage.length-1)
Essence.say(l.split("/")[l.split("/").length-1]+" has been added to the resources getter.","info")}return Essence.say("Resource list: "+s.clean()),t?s.clean():s}function gatherScripts(t){var e=$n("*script"),r=t?[]:{}
for(i=0;i<e.length;i++)t?r.push(e[i].src):r[e[i].src.split("/")[e[i].src.split("/").length-1]]=e[i].src
return r}function gatherStylesheets(t){var e=$n("*link"),r=t?[]:{}
for(i=0;i<e.length;i++)t?r.push(e[i].href):r[e[i].href.split("/")[e[i].href.split("/").length-1]]=e[i].href
return r}function include_once(t,e,i){e||(e=t.indexOf(".js")>0?"script":"style")
var r="script"===e?gatherScripts(!0):gatherStylesheets(!0)
i&&(keyList(r,!0).indexOf(i+t)>-1||valList(r,!0).indexOf(i+t)>-1)||keyList(r,!0).indexOf(t)>-1||valList(r,!0).indexOf(t)>-1||include(t,e)}function stripTags(t){return t.replace(/\<[\s\S]+\>(.*?)\<\/[\s\S]+\>/,"$1")}function stripPath(t){return t.split("/")[t.split("/").length-1]}function getLocalPath(t,e){e||(e="file:///")
for(var i=t.split("/"),r="",s=e.split("/"),n=0,o=0;e.indexOf(i[n])>-1;)n++
for(r=i.get(n).join("/");r.indexOf(s[o])>-1;)console.log("Gone through "+s[o]),o++
if(o>0)for(n=0;o>n;n++)r="../"+r
return r}function filenameList(t){var e=[]
for(i=0;i<t.length;i++)e.push(stripPath(t[i]))
return e.remove("")}function getDirectoryPath(t){return t||(t=location.href),t.get(0,t.indexOf(stripPath(t))-1)}function rand(t,e,i){return i?Math.floor(Math.random()*(e-t+1)+t):Math.random()*(e-t+1)+t}function randTo(t){return rand(0,t,!0)}function baseRand(t,e,i){return parseInt(rand(t,e)).toString(i||10)}function randVar(t,e,i){var r=Math.max(t,e),s=Math.min(t,e)
return rand(s,r,i)}function lenRand(t,e){return e?Math.floor(Math.random()*(t+1)):Math.floor(Math.random()*t)}function random16(){return(65280*Math.random()+255*Math.random())/65535}function randFloatSpread(t){return t*(.5-Math.random())}function randArr(t,e,r,s,n){var o=[]
for(i=0;i<t;i++)o[i]=n?conv(rand(e||0,r||100,!s||!0),10,n||10):rand(e||0,r||100,!s||!0)
return o}function genNearlySortedArr(t,e,r){var s,n=range(t,e,r),o=[]
for(s=n.getIncrement(0),i=0;i<n.length;i++){var a=rand(0,s,!0)
o.push(n[i]),i>0&&0==a?swap(o,i,i-1):i>1&&a==s&&swap(o,i,i-2)}return o}function sumPow2(t,e){if(!isArray(t))return!1
var r=0
for(i=0;i<t.length;i++)r+=Math.pow(t[i],2)
return r.toNDec(e)}function conv(t,e,i,r){return r?parseFloat(t,e||2).toString(i||10):parseInt(t,e||2).toString(i||10)}function negateBin(t,e){var r=[],s=0
for(i=0;i<t.length;i++)r[i]=1-parseInt(t[i])
return s=conv(r.join("")),s++,e?conv(s,10,2).split(""):conv(s,10,2)}function min2dec(t){return 50*t/30}function dec2min(t){return 30*t/50}function toS(t,e,i){if("undefined"!=t&&t||(t=e?"00:00:00.000":"00:00.000"),"String"!=typeof t&&(t+=""),t.length>=4&&1==t.indexOf(":"))return toS("0"+t,e,i)
if(e){var r,s,n,o
r=t.slice(0,2),s=t.slice(3,5),n=t.slice(6,8),r=parseInt(r),s=parseInt(s),n=parseInt(n),o=t.slice(8,t.length),o=parseInt(1e3*o),o=100>o&&0!=o[0]?"0"+o:o,n+=.001*o,n+="",n.split(".")[0]=n.split(".")[0].toNDigits(),n.length>6&&(n=n.slice(0,5)||t.split(":")[1])
var a=(360*r+60*s+Math.floor(1e3*n)/1e3+"").slice(0,7)
return i?parseFloat(a):parseFloat(a.toNDigits())}var s,n,o
s=t.slice(0,2),s=parseInt(s),n=t.slice(3,5),n=parseInt(n),o=t.slice(5,t.length),o=parseInt(1e3*o),o=100>o&&0!=o[0]?"0"+o:o,n+=.001*o,n+="",n.split(".")[0]=n.split(".")[0].toNDigits(),n.length>6&&(n=n.slice(0,5)||t.split(":")[1])
var a=(60*s+Math.floor(1e3*n)/1e3+"").slice(0,7)
return i?parseFloat(a):parseFloat(a.toNDigits())}function s2time(t,e){var i=0,r=0,s=t
return e?(s=(t%60).toNDigits(3),i=t>=3600?Math.floor(t/3600):0,r=Math.floor((t-s-3600*i)/60),s=(s+"").slice(0,6),r=0>=r?"00":r.toNDigits(),i=0>=i?"00":i.toNDigits(),0>=i?r+":"+s:i+":"+r+":"+s):(s=(t%60).toNDigits(3),r=Math.floor(t/60),s=(s+"").slice(0,6),r=0>=r?"00":r.toNDigits(),0>=r?s:r+":"+s)}function markConv(t,e,i,r){return(t/e*(i||100)).toNDec(r||2)}function nthroot(t,e,r){var s=t/2
for(i=0;i<60;i++)s+=(t-Math.pow(s,e))/(Math.pow(s+1,e)-Math.pow(s,e))
return s.toNDec(r||20)}function log(t,e){return Math.log(t)/Math.log(e||2)}function Bin(t,e,i){return C(t,i)*Math.pow(e,i)*Math.pow(1-e,t-i)}function BinCumul(t,e,i){}function Norm(t){var e=1/(1+.2316419*Math.abs(t)),i=.3989423*Math.exp(-t*t/2),r=i*e*(.3193815+e*(-.3565638+e*(1.781478+e*(-1.821256+1.330274*e))))
return r.toNDec(4)}function StdNorm(t,e,i){return Norm((i-t)/e)}function Po(t,e){return exp(-t)*Math.pow(t,e)/factorial(e).toNDec(4)}function PoCumul(t,e){}function factorial(t){var e=t
for(i=1;i<t;i++)e*=i
return e}function C(t,e){return factorial(t)/(factorial(e)*factorial(t-e))}function Bin2Norm(t,e,i,r){if(t*e>5&&t*(1-e)>5){var s=.5
return">="==r&&(s=-.5),i+=s,StdNorm(t*e,Math.sqrt(t*e*(1-e)),i)}return!1}function Bin2Po(t,e,i){return t>50&&.1>e?Po(t*e,i):!1}function Po2Norm(t){return t>10?StdNorm(y,Math.sqrt(y)):!1}function clamp(t,e,i){return e>t?e:t>i?i:t}function clampBottom(t,e){return e>t?e:t}function clampTop(t,e){return t>e?e:t}function mapLinear(t,e,i,r,s){return r+(t-e)*(s-r)/(i-e)}function degToRad(t){return t*Essence.d2r}function radToDeg(t){return t*Essence.r2d}function celsToFahr(t){return 33.8*cels}function fahrToCels(t){return t/33.8}function primeN(t){var e=t.quickSort()
for(i=0;i<t.length;i++)for(t[i]%2==0&&2!=t[i]&&(e[i]="x"),j=0;j<i;j++)primeCheck(e[j],e[i])&&(e[i]="x")
return e.remove("x")}function primeCheck(t,e){return t>1&&e>1&&e%t==0&&e!=t}function getClosestRoot(t,e){var r=0,s=0
for(t>=t/2*t/2/2-2?r=t/2:t>=t/3*t/3&&(r=t/3),p=1;p<=e;p++)for(i=1;i<t;i++)Math.pow(i,p)==t||Math.pow(i,p-1)*i==t?s=i:(Math.pow(i,p)>t||Math.pow(i,p-1)*i>t)&&(s=i-.5)
return Math.pow(s,e)<=t?s:(s=(Math.pow(e,-2)+t/Math.pow(e,4)-t/Math.pow(e,5)+Math.pow(t,e)/Math.pow(e,Math.pow(e,3)+3)+t/Math.pow(e,2))/2,Math.pow(s,e)>t&&(s=(s+r)/2),(t/s+s)/2)}function simpleInterest(t,e,i){return t*(1+e*i)}function compoundInterest(t,e,i,r){return r>1?t*Math.pow(1+e/r,i*r):t*Math.pow(1+e,i)}function non0(t){return 0==t?eps:t}function toFrac(t,e,i){var r=String(t),s=r.indexOf(".")
if(-1==s)return r
var n=Math.floor(t)||"",o=r.substring(s),a=e||Math.pow(10,o.length-1),h=i?Math.ceil(o*a):Math.round(o*a),l=a,c=Essence.gcd(h,l)
return l/c==1?String(n+h/c):(n&&(n+=" and "),n+String(h/c)+"/"+String(l/c))}function clearNum(t,e,r){var s=(Math.floor(t)+"").length/3,n=""
for(i=0;i<s;i++)n=(t-t%Math.pow(1e3,i))%Math.pow(1e3,i+1)/Math.pow(1e3,i)+" "+n
return n=n.split(" "),n.pop(),n.join(r?",":" ")+(t%1).toNDec(e||3)}function getStep(t,e,i){return[t,e].getIncrement(i)}function quadraticSolver(t,e,i,r){var s=Math.sqrt(e,2)-4*t*i
return 0==s?(-e/(2*t)).toNDec(r):[((-e-Math.sqrt(Math.abs(s)))/(2*t)+(0>s?"i":0)).toNDec(r),(-e+Math.sqrt(Math.abs(s)))/(2*t)+(0>s?"i":0).toNDec(r)]}function eqSolver(formula,res,a,b){a=a||-100,b=b||200
var r=mkArray(a>0?b-a:b-a+1,2,1)
if(formula.search(/\^[0-9]/g)>0){var expr="([(].*?[)]|\\d+\\.\\d+|\\d+|[a-z]+)",reg=RegExp(expr+"\\^"+expr)
formula=formula.replace(reg,"Math.pow($1, $2)")}else if(formula.search(/e\^/g)>0){var expr="([(].*?[)]|\\d+\\.\\d+|\\d+|[a-z]+)",reg=RegExp("e\\^"+expr)
formula=formula.replace(reg,"Math.exp($1)")}for(Essence.say("Formula now converted to "+formula,"info"),x=a;x<=b;x++)for(y=a;y<=b;y++)r[x][y]="("+x+","+y+") "+eval(formula)
return r.filter(function(t){return t.split(") ")[1]==res?t.split(") ")[0]+")":void 0})}function manuEqSolver(eq,max,dim,r){var res=mkArray(max+1,dim,1),p=[]
for(x=0;x<res.length;x++)if(2==dim)for(y=0;y<res.length;y++)res[x][y]=eval(eq),res[x][y]==r&&p.push("x="+x+", y="+y)
else if(3==dim)for(y=0;y<res.length;y++)for(z=0;z<res.length;z++)res[x][y][z]=eval(eq),res[x][y][z]==r&&p.push("x="+x+", y="+y+", z="+z)
else res[x]=eval(eq),res[x]==r&&p.push("x="+x)
return p}function getNumFromStr(t){return parseFloat(t.replace(/[A-Za-z_ ]+/g,""))}function toPixel(t){var e=1
switch(t.substring(String(getNumFromStr(t)).length,t.length)){case"em":e=16
break
case"cm":e=37.781
break
case"mm":e=3.766
break
case"ex":e=7.156
break
case"in":e=96
break
case"pt":e=1.328
break
case"pc":e=16
break
case"m":e=3778.1}return getNumFromStr(t)*e}function fromPixel(t,e){var i=1
switch(e){case"em":i=1/16
break
case"cm":i=1/37.781
break
case"mm":i=1/3.766
break
case"ex":i=1/7.156
break
case"in":i=1/96
break
case"pt":i=1/1.328
break
case"pc":i=1/16
break
case"m":i=1/3778.1}return t*i+e}function convUnit(t,e){return fromPixel(toPixel(t),e)}function AX(t,e,i,r){var s=new ActiveXObject("Scripting.FileSystemObject")
s.CreateTextFile(t,!0)
var n=s.OpenTextFile(t,1,!0)
n.Write(e),n.ReadAll(),i&&confirm("Do you realy want to close this file")&&n.Close(),r&&confirm("Do you realy want to delete this file")&&s.DeleteFile(t)}function execFile(t,e){var i=new ActiveXObject("WScript.Shell")
i.Run(t+"."+e,1,!0)}function copyToClipboard(t,e){clipboardData.setData(e||"Text",t)}function save(t,e,i){var r=new Blob([t],{type:"text/"+(i||"plain")}),s=document.createElement("a")
s.download=e,s.innerHTML="Download File",null!=window.webkitURL?s.href=window.webkitURL.createObjectURL(r):(s.href=window.URL.createObjectURL(r),s.onclick=function(t){document.body.removeChild(t.target)},s.style.display="none",document.body.appendChild(s)),s.click()}function getFileContent(t){var e=new XMLHttpRequest
e.open("GET",t,!1),e.onreadystatechange=function(){return 4!==e.readyState||200!==e.status&&0!=e.status?void 0:(fct=e.responseText,e.responseText)},e.send(null)}function getKey(t,e){var i=document.all?event.keyCode:t.which,r=e?String.fromCharCode(i).toLowerCase():String.fromCharCode(i)
return[r,i]}function getTime(){var t=new Date
return t.getHours().toNDigits(2)+":"+t.getMinutes().toNDigits(2)+":"+t.getSeconds().toNDigits(2)}function getDate(t){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date
return t?i.getDate().toNDigits(2)+e[i.getMonth()]+i.getUTCFullYear():i.getDate().toNDigits(2)+"/"+i.getMonth().toNDigits(2)+"/"+i.getUTCFullYear()}function getTimestamp(){new Date
return getDate(!0)+"-"+getTime().replace(/\:/g,"-")}function genStr(t,e){var i,r="",s=new Array("a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"),n=new Array,o=new Array("0","1","2","3","4","5","6","7","8","9"),a=new Array("&","~",'"',"#","'","{","[","(","-","|","`","_","\\","^","@",")","]","+","=","}","%","*","?",",",";",".","/",":","!"," ","")
for(l=0;l<s.length;l++)n[l]=s[l].toUpperCase()
i=s.concat(n,o,a)
for(var h="",c=0;r.length<t;){if(h=i[randTo(i.length-1)],"specificChar"==e.name)for(;h==e.character;)h=i[randTo(i.length-1)]
else if("noUpperCase"==e.name)h=h.toLowerCase()
else if("noLowerCase"==e.name)h=h.toUpperCase()
else if("cumultativeRepeat"==e.name)for(;h==r[c-1];)h=i[randTo(i.length-1)]
else if("cumultativeSensitiveRepeat"==e.name)for(;h===r[c-1];)h=i[randTo(i.length-1)]
else(e.name="noRepeat")&&(i.pop(c>0?r[c-1]:r[0]),h=i[randTo(i.length-1)])
r+=h,c++}return r.length<t?r+=i[randTo(i.length-1)]:r.length>t&&(r=r.slice(0,t+1)),""==r&&genStr(t,e),r}function Colour(t,e,i,r){return this.constructor=function(t,e,i,r){isArray(t)&&t.length>=3&&!e&&!i?(this.red=t[0],this.green=t[1],this.blue=t[2],this.alpha=4==t.length?t[3]:255):e||i||!t||0==e||0==i?e||i||!t?e&&!i&&t?(this.red=this.green=this.blue=t,this.alpha=e):(this.red=t||0,this.green=e||0,this.blue=i||0,this.alpha=r||255):(this.red=t,this.green=0,this.blue=0,this.alpha=2==t.length?t[1]:255):(this.red=this.green=this.blue=t,this.alpha=2==t.length&&isType(t,"Array")?t[1]:255),this.hex="#"+conv(this.red,10,16).toNDigits()+conv(this.green,10,16).toNDigits()+conv(this.blue,10,16).toNDigits(),this.rgba="rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},this.constructor(t,e,i,r),this.update=function(){this.hex="#"+conv(this.red,10,16).toNDigits()+conv(this.green,10,16).toNDigits()+conv(this.blue,10,16).toNDigits(),this.rgba="rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},this.getRGBAPerc=function(){return"rgba("+markConv(this.red,255,100)+", "+markConv(this.green,255,100)+", "+markConv(this.blue,255,100)+", "+markConv(this.alpha,255,100)+")"},this.getMaxClr=function(){return Math.max(Math.max(this.red,e),i)},this.getMinClr=function(){return Math.min(Math.min(this.red,e),i)},this.negative=function(t){this.red=255-parseInt(this.red),this.green=255-parseInt(this.green),this.blue=255-parseInt(this.blue),t&&(this.alpha=255-parseInt(this.alpha)),this.update()},this.redNegative=function(){this.red=255-parseInt(this.red),this.update()},this.greenNegative=function(){this.green=255-parseInt(this.green),this.update()},this.blueNegative=function(){this.green=255-parseInt(this.green),this.update()},this.rand=function(t){return this.red=randTo(255),this.green=randTo(255),this.blue=randTo(255),this.update(),t?this.hex:this.rgba},this.toLocaleString=function(){return"Colour(r="+this.red+", g="+this.green+", b="+this.blue+", a="+this.alpha+")"},this.toString=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},this.get=function(){return[this.red,this.green,this.blue,this.alpha]},this.increment=function(t){isNon(t)&&(t=63.75),this.blue+=t,this.blue>=255&&(this.blue-=255,this.green+=t),this.green>=255&&(this.green-=255,this.red+=t),this.update()},this}function hex2rgb(t,e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t)
return i?e?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16):/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(t)?(i=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(t),e?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:parseInt(i[1]+i[1],16)+", "+parseInt(i[2]+i[2],16)+", "+parseInt(i[3]+i[3],16)):null}function rgb2hex(t,e){return t=t.slice(4,t.length-1).split(", "),e?[conv(t[0],10,16).toNDigits(),conv(t[1],10,16).toNDigits(),conv(t[2],10,16).toNDigits()]:"#"+conv(t[0],10,16).toNDigits()+conv(t[1],10,16).toNDigits()+conv(t[2],10,16).toNDigits()}function negateColour(t,e,i){i=i?i[0].toLowerCase():"x"
var r=0==$e(t).css(e).indexOf("rgb(")?$e(t).css(e).slice(4,$e(t).css(e).length-1).split(", "):hex2rgb($e(t).css(e),!0),s=new Colour
"r"==i?(s.red=255-parseInt(r[0]),s.green=r[1],s.blue=r[2]):"g"==i?(s.red=r[0],s.green=255-parseInt(r[0]),s.blue=r[2]):"b"==i?(s.red=r[0],s.green=r[1],s.blue=255-parseInt(r[2])):"y"==i?(s.red=255-parseInt(r[0]),s.green=255-parseInt(r[1]),s.blue=r[2]):"c"==i?(s.red=r[0],s.green=255-parseInt(r[0]),s.blue=255-parseInt(r[2])):"m"==i?(s.red=255-parseInt(r[0]),s.green=r[1],s.blue=255-parseInt(r[2])):"a"==i||"f"==i||"w"==i?(s.red=255-parseInt(r[0]),s.green=255-parseInt(r[1]),s.blue=255-parseInt(r[2])):(s.red=r[0],s.green=r[1],s.blue=r[2]),s.hex="#"+conv(s.red,10,16).toNDigits()+conv(s.green,10,16).toNDigits()+conv(s.blue,10,16).toNDigits(),$e(t).setCSS(e,s.hex)}function colourNameToHex(t){switch(t.normal()){case"aqua":return"#00ffff"
case"cyan":return"#00ffff"
case"black":return"#000000"
case"blue":return"#0000ff"
case"fuchsia":return"#ff00ff"
case"magenta":return"#f800f8"
case"gray":return"#808080"
case"grey":return"#808080"
case"green":return"#008000"
case"lime":return"#00ff00"
case"brown":return"#800000"
case"maroon":return"#800000"
case"navy":return"#000080"
case"olive":return"#808000"
case"purple":return"#800080"
case"red":return"#ff0000"
case"silver":return"#c0c0c0"
case"teal":return"#008080"
case"white":return"#ffffff"
case"yellow":return"#ffff00"
case"gold":return"#ffd700"
case"seagreen":return"#2e8b57"
case"pink":return"#ffc0cb"
case"skyblue":return"#87ceeb"
case"coral":return"#ff7f50"
case"tan":return"#d2b48c"
case"orange":return"#ffa500"
case"cream":return"#feffff"
case"lightgray":return"#d3d3d3"
case"salmon":return"#fa8072"
default:return null}}function rgbList(t,e,i){var s=[]
for(isNon(t)&&(t=63.75),r=0;r<257;r+=t)for(g=0;g<257;g+=t)for(b=0;b<257;b+=t)i&&Essence.say("rgb("+(e?[Math.round(r),Math.round(g),Math.round(b)].join(", "):[r,g,b].join(", "))+")"),s.push("rgb("+(e?[Math.round(r),Math.round(g),Math.round(b)].join(", "):[r,g,b].join(", "))+")")
return s}function Person(t,e,i,r,s,n,o,a,h,l,c,u,d,f){return this.firstName=t||"",this.secondName=e||"",this.lastName=i||"",this.title=r||"",this.surname=""|s,this.phoneNum=n||"none",this.country=o||"",this.city=a||"",this.sex="male"==h.toLowerCase()||"female"==h.toLowerCase()?h:"other",this.birthday=l,this.jobs=c||"unemployed",this.activities=u||"none",this.websites=d||"none",this.quote=f||"",this.toString=function(){var t="Person("
for(p in this)this.hasOwnProperty(p)&&"toString"!=p&&(t+=p+"="+this[p]+", ")
return t.substring(0,t.length-2)+")"},this}function Item(t,e,r,s,n){return this.name=t||"unknown",this.category=e||"unknown",this.price=r||0,this.ageMinRequired=s||.25,this.quantity=n||1,this.firstMade=(new Date).toLocaleString(),this.dublicate=function(t,e){for(i=0;i<t;i++)e.push(new Item(this.name,this.category,this.price,this.ageMinRequired,this.quantity))},this.remove=function(t){t.remove(this)},this.toString=function(){var t=""
for(p in this)this.hasOwnProperty(p)&&"toString"!=p&&!isType(p,"function")&&(t+=p+"="+this[p]+", ")
return t.substring(0,t.length-2)},this}function range(t,e,r){var s=[],n=0
if(t&&!e&&!r&&0!=r)return range(0,1,t)
if(t&&e&&!r&&0!=r)return range(0,e,t)
if(t||(t=0),e||(e=1),r||(r=100),e>0)for(i=t;i<=r;i+=e)s[n++]=i
else for(i=t;i>=r;i+=e)s[n++]=i
return s}function rangeToBase(t,e,r,s){var n=[],o=0
if(e>0)for(i=t;i<=r;i+=e)n[o++]=conv(i,10,s)
else for(i=t;i>=r;i+=e)n[o++]=conv(i,10,s)
return n}function letterArray(t,e){var i=t.charCodeAt(0),r=e.charCodeAt(0),s=[],n=""
for(firstLetter=i;firstLetter<=r;firstLetter++)for(secondLetter=i;secondLetter<=r;secondLetter++)firstLetter!=secondLetter&&(n=String.fromCharCode(firstLetter)+String.fromCharCode(secondLetter),s.push(n))
return s}function mixedRange(t,e,r,s){var n=[],o=range(t,e,r)
if(s);else for(i=t;i<=r;i++)n[i]=o[randTo(o.length-1)]
return n}function mkArray(t,e,r){var s=[]
if(1==e)if(r)for(i=0;i<t;i++)s[i]=r
else s=new Array(t)
else if(2==e)if(r)for(i=0;i<t;i++)for(s[i]=new Array(t),j=0;j<t;j++)s[i][j]=r
else for(s=new Array(t),i=0;i<t;i++)s[i]=new Array(t)
else if(3==e)if(r)for(i=0;i<t;i++)for(s[i]=new Array(t),j=0;j<t;j++)for(s[i][j]=new Array(t),k=0;k<t;k++)s[i][j][k]=r
else for(s=new Array(t),i=0;i<t;i++)for(s[i]=new Array(t),j=0;j<t;j++)s[i][j]=new Array(t)
else{if(4!=e)return"Unvalid dimension. Only 1D-4D arrays can be made."
if(r)for(i=0;i<t;i++)for(s[i]=new Array(t),j=0;j<t;j++)for(s[i][j]=new Array(t),k=0;k<t;k++)for(s[i][j][k]=new Array(t),l=0;l<t;l++)s[i][j][k][l]=r
else for(s=new Array(t),i=0;i<t;i++)for(s[i]=new Array(t),j=0;j<t;j++)for(s[i][j]=new Array(t),k=0;k<t;k++)s[i][j][k]=new Array(t)}return s}function numArr(t,e){var r=[],s=e||0
for(i=0;i<t;i++)for(r[i]=[],j=0;j<t;j++)r[i][j]=s++
return r}function swap(t,e,i){if(i){var r=t[e]
return t[e]=t[i],t[i]=r,t}var r=t
return t=e,e=r,[t,e]}function fisherYatesShuffle(t){for(var e=t.length;e>0;)t.hasOwnProperty(e)&&swap(t,e,Math.floor(Math.random()*e--))
return t}function vectorProd(t,e){var i=[],r=[0,0,0]
return i[0]=["i","j","k"],i[1]=[t.x,t.y,t.z],i[2]=[e.x,e.y,e.z],r[0]=t.y*e.z-t.z*e.y,r[1]=t.x*e.z-t.z*e.x,r[2]=t.x*e.y-t.y*e.x,r[0]+"i+"+r[1]+"j+"+r[2]+"k"}function vectorToPoint(t){return new Pt(t.x,t.y,t.z)}function vectorToPointForm(t){return"("+cleanNb(t.split("i")[0])+", "+cleanNb(t.split("i")[1].split("j")[0].slice(1,t.split("i")[1].split("j")[0].length))+", "+cleanNb(t.split("i")[1].split("j")[1].split("k")[0])+")"}function scalarProd(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}function union(t,e,i,r){return r?rmDuplicates(t.concat(e,i)).quickSort():rmDuplicates(t.concat(e,i))}function intersection(t,e,r,s){var n=[]
t.quickSort(),e.quickSort(),r?r.quickSort():!1
for(i in t)e.indexOf(t[i])>-1&&isNon(r)?n.push(t[i]):e.indexOf(t[i])>-1&&r.indexOf(t[i])>-1&&n.push(t[i])
return s?rmDuplicates(n).quickSort():rmDuplicates(n)}function complement(t,e,r,s){var n=[]
t.quickSort(),e.quickSort(),r?r.quickSort():!1
for(i in t)-1==e.indexOf(t[i])&&isNon(r)?n.push(t[i]):-1==e.indexOf(t[i])&&-1==r.indexOf(t[i])&&n.push(t[i])
return s?rmDuplicates(n).quickSort():rmDuplicates(n)}function symDif(t,e,r,s){var n=[]
t.quickSort(),e.quickSort(),r?r.quickSortort():!1
for(i in t)-1==e.indexOf(t[i])&&isNon(r)?n.push(t[i]):-1==e.indexOf(t[i])&&-1==r.indexOf(t[i])&&n.push(t[i])
for(i in e)-1==t.indexOf(e[i])&&isNon(r)?n.push(e[i]):-1==t.indexOf(e[i])&&-1==r.indexOf(e[i])&&n.push(e[i])
if(r)for(i in r)-1==t.indexOf(r[i])&&-1==e.indexOf(r[i])&&n.push(r[i])
return s?rmDuplicates(n).quickSort():rmDuplicates(n)}function bitStr(t,e){var r=[]
for(i in t)r[i]=t[i]==e[i]?1:0
return r}function toSameLength(t,e,r){if(!t.isIterable()||!e.isIterable())throw new Error("invalid length equality operation on non-iterable objects")
if(r||(r=" "),t.length>e.length)for(i=e.length;i<t.length;i++)isType(e[i],"String")?e+=r:e.push(r)
else if(t.length<e.length)for(i=t.length;i<e.length;i++)isType(t[i],"String")?t+=r:t.push(r)
return[t,e]}function And(t,e,r,s){toSameLength(t,e,null|r)
var n=s?new Array(t.length):t[0]&&e[0]
for(i in t)s?n[i]=t[i]&&e[i]:n=n&&t[i]&&e[i]
return n}function Or(t,e,r,s){toSameLength(t,e,null|r)
var n=s?new Array(t.length):t[0]||e[0]
for(i in t)s?n[i]=t[i]||e[i]:n=n||t[i]||e[i]
return n}function Xor(t,e,r,s){toSameLength(t,e,null|r)
var n=s?new Array(t.length):xor(t[0],e[0])
for(i in t)s?n[i]=xor(t[i],e[i]):n=xor(n,xor(t[i],e[i]))
return n}function Imply(t,e,r,s){toSameLength(t,e,null|r)
var n=s?new Array(t.length):!t[0]||e[0]
for(i in t)s?n[i]=!t[i]||e[i]:n=!n||!t[i]||e[i]
return n}function manhattanDist(t,e){return Math.abs(Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1]))}function euclidianDist(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function diagDist(t,e){return Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1]))}function h(t,e,r){var s=new Array(t.length)
for(i=0;i<t.length;i++)for(s[i]=new Array(t[i].length),j=0;j<t[i].length;j++)s[i][j]=r([i,j],lookfor(t[i][j],e))||euclidianDist([i,j],lookfor(t[i][j],e))
return Essence.say(console.table(s)),s.sum2d()}function lookfor(t,e,r){for(i=0;i<e.length;i++)for(j=0;j<e[i].length;j++)if(e[i][j]==t)return r?[j,i]:[i,j]
return-1}function keyList(t,e){var i=[]
if(e)for(var r in t)t.hasOwnProperty(r)&&i.push(r)
else for(var r in t)i.push(r)
return i}function valList(t,e){var i=[]
if(e)for(var r in t)t.hasOwnProperty(r)&&i.push(t[r])
else for(var r in t)i.push(t[r])
return i}function keyTable(t,e){var i=hasName(t)?"<table cellspacing=0><caption>KeyTable: <i>"+t.getName()+"</i></caption><tr><th>Key</th><th>Value</th></tr>":"<table><caption>KeyTable</caption><tr><th>Key</th><th>Value</th></tr>"
for(var r in t)i+=e&&t.hasOwnProperty(r)?"<tr><td>"+r+"</td><td>"+t[r]+"</td></tr>":"<tr><td>"+r+"</td><td>"+t[r]+"</td></tr>"
return i+"</table>"}function LinkedList(t,e,i){return this.payload=t||1,this.next=e||{payload:1,next:null},this.next.show=function(){return this.name+":"+this.next.payload+"->"},this.name=i,this.show=function(){return this.name+":"+this.payload+"->"+this.next.show()},this.toString=function(){return"LinkedList("+this.show()+")"},this}function TreeNode(t,e,r){this.left=e,this.right=r,this.payload=t||0,this.add=function(t,e){this.left=t,this.right=e},this.addLeft=function(t){for(i=0;i<t.length;i++)0==i?this.left=t[0]:t[i-1].left=t[i]},this.addRight=function(t){for(i in t)0==i?this.righttChild=t[0]:t[i-1].right=t[i]},this.traverse=function(){return this.left&&this.left.traverse(),this.right&&this.right.traverse(),this},this.printInOrder=function(){this.left&&this.left.printInOrder(),Essence.addToPrinter(this.payload+"->"),this.right&&this.right.printInOrder(),Essence.addToPrinter("\r\n")},this.printPreOrder=function(){Essence.addToPrinter(this.payload+"->"),this.left&&this.left.printPreOrder(),this.right&&this.right.printPreOrder(),Essence.addToPrinter("\r\n")},this.printPostOrder=function(){this.left&&this.left.printPreOrder(),this.right&&this.right.printPreOrder(),Essence.addToPrinter(this.payload+"->"),Essence.addToPrinter("\r\n")},this.inOrder=function(t,e,i,r){t||(t=""),e||(e="&nbsp;&nbsp;"),i||(i=0),r||(r="|-"),this.left&&this.left.inOrder(t+e,e,i+1,r),println(t+r+this.payload+e+" (deepth="+i+")"),this.right&&this.right.inOrder(t+e,e,i+1,r)},this.preOrder=function(t,e,i,r){t||(t=""),e||(e="&nbsp;&nbsp;"),i||(i=0),r||(r="|-"),println(t+r+this.payload+e+" (deepth="+i+")"),this.left&&this.left.preOrder(t+e,e,i+1,r),this.right&&this.right.preOrder(t+e,e,i+1,r)},this.postOrder=function(t,e,i,r){t||(t=""),e||(e="&nbsp;&nbsp;"),i||(i=0),r||(r="|-"),this.left&&this.left.postOrder(t+e,e,i+1,r),this.right&&this.right.postOrder(t+e,e,i+1,r),println(t+r+this.payload+e+" (deepth="+i+")")},this.getInOrder=function(t){t||(t="->")
var e=""
return this.left&&(e+=this.left.getInOrder(t)),e+=t+this.payload,this.right&&(e+=this.right.getInOrder(t)),e},this.getPreOrder=function(t){t||(t="->")
var e=""
return e+=t+this.payload,this.left&&(e+=this.left.getPreOrder(t)),this.right&&(e+=this.right.getPreOrder(t)),e},this.getPostOrder=function(t){t||(t="->")
var e=""
return this.left&&(e+=this.left.getPostOrder(t)),this.right&&(e+=this.right.getPostOrder(t)),e+t+this.payload},this.isLeaf=function(){return!this.left&&!this.right},this.find=function(t,e){return"bfs"===e.normal()?this.bfs(t):this.dfs(t)},this.dfs=function(t,e,i){e||(e=0),i||(i=0)
var r=new Array
for(r.push(this);r!=[];){e=0
var s=r.pop()
try{if(s.payload===t)return[e,i]}catch(n){return[-1,i]}s.left&&r.push(s.left),s.right&&r.push(s.right),e++,i++}},this.bfs=function(t,e,i){e||(e=0),i||(i=0)
var r=new Array
for(r.unshift(this);r!=[];){e=0
var s=r.pop()
try{if(s.payload===t)return[e,i]}catch(n){return[-1,i]}s.left&&r.unshift(s.left),s.right&&r.unshift(s.right),e++,i++}},this.sum=function(){var t=this.payload
return this.left&&(t+=this.left.sum()),this.right&&(t+=this.right.sum()),t},this.min=function(){var t=this.payload
return this.left&&(t=Math.min(t,this.left.min())),this.right&&(t=Math.min(t,this.right.min())),t},this.max=function(){var t=this.payload
return this.left&&(t=Math.max(t,this.left.max())),this.right&&(t=Math.max(t,this.right.max())),t},this.nbOfBranches=function(t){return t||(t=0),this.left&&(t=this.left.nbOfBranches(t+1)),this.right&&(t=this.right.nbOfBranches(t+1)),t},this.avg=function(){return this.sum()/this.nbOfBranches()},this.printBFS=function(t){t||(t="->")
var e=new Array,i=""
for(e.unshift(this);e!=[];){var r=e.pop()
i+=r+t
try{r.left&&e.unshift(r.left),r.right&&e.unshift(r.right)}catch(s){}}return t},this.toString=function(){var t="TreeNode(payload="+this.payload+", "
return this.left&&(t+="left="+this.left.toString()),this.right&&(t+="right="+this.right.toString()),t.substring(0,t.length)+")"},this.toArray=function(t){var e=[]
return this.left&&(t?e.push(this.left.toArray().toString().split(",")):e.push(this.left.toArray())),e.push(this.payload),this.right&&(t?e.push(this.right.toArray().toString().split(",")):e.push(this.right.toArray())),t?e.toString().split(","):e}}function Node(t,e,i){this.payload=t||1,this.next=e||null,this.prev=i||null,this.traverse=function(){null!=this.next&&this.next.traverse(),Essence.say("payload: "+this.payload)},this.print=function(){null!=this.next&&this.next.print(),Essence.print(this.payload+"=>")},this.printList=function(){null==this.next?Essence.txt2print+="->"+this.v:this.next.printList(),Essence.print("")},this.last=function(){return null==this.next?this:this.next.last()},this.append=function(t){null==this.next?(this.next=new Node(t),this.next.prev=this):this.next.append(t)},this.remove=function(){var t=this.next
this.next=t.next,t.next.prev=this},this.reverse=function(){if(null==this.next)return this
var t=this.next.reverse()
return t.next=this,t.prev=null,this.prev=t,this.next=null,t},this.toString=function(){return"Node(payload="+this.payload+", previous="+this.prev+", next="+this.next+")"},this.equals=function(t){return this.payload==t.payload&&this.next.equals(t.next)&&this.prev.equals(t.prev)},this.find=function(t,e){return e||(e=0),this.payload===t?e:this.next?this.next.find(t,e+1):[-1,e]}}function PathNode(t,e){this.f=t+e||1,this.parent=null}function NTreeNode(t,e){this.payload=t||0,this.childs=e||[],this.add=function(t){this.childs.push(t)},this.traverse=function(){for(var t in this.childs)this.childs.hasOwnProperty(t)&&t.traverse()
return this},this.printInOrder=function(){this.left&&this.left.printInOrder(),Essence.addToPrinter(this.payload+"->"),this.right&&this.right.printInOrder(),Essence.addToPrinter("\r\n")},this.printPreOrder=function(){Essence.addToPrinter(this.payload+"->"),this.left&&this.left.printPreOrder(),this.right&&this.right.printPreOrder(),Essence.addToPrinter("\r\n")},this.printPostOrder=function(){this.left&&this.left.printPreOrder(),this.right&&this.right.printPreOrder(),Essence.addToPrinter(this.payload+"->"),Essence.addToPrinter("\r\n")},this.inOrder=function(t,e,i,r){t||(t=""),e||(e="&nbsp;&nbsp;"),i||(i=0),r||(r="|-"),this.left&&this.left.inOrder(t+e,e,i+1,r),println(t+r+this.payload+e+" (deepth="+i+")"),this.right&&this.right.inOrder(t+e,e,i+1,r)},this.preOrder=function(t,e,i,r){t||(t=""),e||(e="&nbsp;&nbsp;"),i||(i=0),r||(r="|-"),println(t+r+this.payload+e+" (deepth="+i+")"),this.left&&this.left.preOrder(t+e,e,i+1,r),this.right&&this.right.preOrder(t+e,e,i+1,r)},this.postOrder=function(t,e,i,r){t||(t=""),e||(e="&nbsp;&nbsp;"),i||(i=0),r||(r="|-"),this.left&&this.left.postOrder(t+e,e,i+1,r),this.right&&this.right.postOrder(t+e,e,i+1,r),println(t+r+this.payload+e+" (deepth="+i+")")},this.getInOrder=function(t){t||(t="->")
var e=""
return this.left&&(e+=this.left.getInOrder(t)),e+=t+this.payload,this.right&&(e+=this.right.getInOrder(t)),e},this.getPreOrder=function(t){t||(t="->")
var e=""
return e+=t+this.payload,this.left&&(e+=this.left.getPreOrder(t)),this.right&&(e+=this.right.getPreOrder(t)),e},this.getPostOrder=function(t){t||(t="->")
var e=""
return this.left&&(e+=this.left.getPostOrder(t)),this.right&&(e+=this.right.getPostOrder(t)),e+t+this.payload},this.isLeaf=function(){return!isNon(this.childs)},this.find=function(t,e){return"bfs"===e.normal()?this.bfs(t):this.dfs(t)},this.dfs=function(t,e,i){e||(e=0),i||(i=0)
for(var r in this.childs)this.childs.hasOwnProperty(r)&&r.dfs(t,e+1,i++)
return[-1,i]},this.bfs=function(t,e,i){e||(e=0),i||(i=0)
var r=new Array
for(r.unshift(this);r!=[];){e=0
var s=new TreeNode(r.pop())
if(s.payload===t)return[e,i]
s.left&&r.unshift(s.left),s.right&&r.unshift(s.right),e++,i++}return[-1,td]},this.sum=function(){var t=this.payload
return this.left&&(t+=this.left.sum()),this.right&&(t+=this.right.sum()),t},this.min=function(){var t=this.payload
return this.left&&(t=Math.min(t,this.left.min())),this.right&&(t=Math.min(t,this.right.min())),t},this.max=function(){var t=this.payload
return this.left&&(t=Math.max(t,this.left.max())),this.right&&(t=Math.max(t,this.right.max())),t},this.nbOfBranches=function(t){return t||(t=0),this.left&&(t=this.left.nbOfBranches(t+1)),this.right&&(t=this.right.nbOfBranches(t+1)),t},this.avg=function(){return this.sum()/this.nbOfBranches()},this.printBFS=function(t){var e=new Array,i=t||"-"
for(e.unshift(this);e!=[];){var r=new TreeNode(e.pop())
println(i+">"+r.payload),i+="-",r.left&&e.unshift(r.left),r.right&&e.unshift(r.right)}},this.toString=function(){var t="TreeNode(payload="+this.payload+", "
return this.left&&(t+="left="+this.left.toString()),this.right&&(t+="right="+this.right.toString()),t.substring(0,t.length)+")"},this.toArray=function(t){var e=[]
return this.left&&(t?e.push(this.left.toArray().toString().split(",")):e.push(this.left.toArray())),e.push(this.payload),this.right&&(t?e.push(this.right.toArray().toString().split(",")):e.push(this.right.toArray())),t?e.toString().split(","):e}}function Set(t){this.value=(isType(t,"arr")?t:[t])||[],this.size=function(){return this.value.length},this.add=function(t){-1==this.value.indexOf(t)&&(isType(t,"array")?this.value=this.value.concat(t):this.value.push(t))},this.remove=function(t){if(-1==this.value.indexOf(t))if(isType(t,"array"))for(i=0;i<t.length;i++)this.remove(t[i])
else this.value=this.value.remove(t)},this.clear=function(){this.value=[]},this.isEmpty=function(){return this.value===[]},this.contains=function(t){if(isType(t,"array")){var e=!0
for(i=0;i<t.length;i++){if(!e)return!1
e=e&&this.contains(t[i])}return e}return-1!=this.value.indexOf(t)},this.equals=function(t){return this.value.toString()===t.value.toString()},this.isSame=function(t){if(this.equals(t))return!0
var e=!0
for(i=0;i<t.size();i++){if(!e)return!1
e=e&&this.contains(t.value[i])}},this.toString=function(){return"Set("+this.value.toString()+")"},this.subset=function(t,e){return this.value.slice(t,e+1)},this.get=function(t){return this.value[t]},this.first=function(){return this.value[0]},this.last=function(){return this.value[this.value.lastIndex()]},this.min=function(t,e){return this.value.min(t,e)},this.max=function(t,e){return this.value.max(t,e)},this.median=function(t,e){return this.value.max(t,e)}}function SortedSet(t){this.add=function(t){-1==this.value.indexOf(t)&&(isType(t,"array")?this.value=this.value.concat(t):this.value.push(t)),this.value.quickSort()}}function Stack(t,e){this.value=isType(e,"Number")?new Array(e):[],this.limit=e||null,t&&this.value.push(t),this.peek=function(){return this.value.last()},this.ground=function(){return this.value[0]},this.push=function(t){if(this.isFull())throw new Error("Stack overflow !")
isType(t,"array")?this.value.append(t):this.value.push(t)},this.pop=function(){if(this.isEmpty())throw new Error("Stack underflow !")
var t=this.peek()
return this.value.pop(item),t},this.isEmpty=function(){return 0===this.value.length},this.isFull=function(){return null!=this.lim?this.value.length>=this.limit:!1},this.size=function(){return this.value.length},this.toString=function(){return"Stack("+this.value.toString()+")"},this.equals=function(t){return this.toString()===t.toString()}}function StackArray(t){this.value=new Array(t),this.top=-1,this.peek=function(){return this.value[this.top]},this.push=function(t){if(this.isFull())throw new Error("Stack overflow !")
if(isType(t,"array"))for(i=0;i<t.length;i++)this.push(t[i])
else this.top++,this.value[this.top]=t},this.pop=function(t){if(this.isEmpty())throw new Error("Stack underflow !")
if(!isType(t,"array")){var e=this.peek()
return this.top--,e}for(i=0;i<t.length;i++)this.pop(t[i])},this.isEmpty=function(){return this.top<=-1},this.isFull=function(){return this.top>=this.value.length},this.size=function(){return this.top+1},this.toString=function(){return"Stack("+this.value.toString()+")"},this.equals=function(t){return this.toString()===t.toString()}}function StackList(t){this.top=new Node,this.peek=function(){return this.isEmpty()||null==this.top?null:this.top.next.payload},this.push=function(t){if(isType(t,"array"))for(i=0;i<t.length;i++)this.push(t[i])
else{var e=new Node(t,this.top)
this.top=e}return this},this.pop=function(t){if(!this.isEmpty())throw new Error("I can't pop from an empty stack list")
if(!t){var e=this.top.payload
return this.top=this.top.next,e}for(i=0;i<t;i++)this.pop()},this.isEmpty=function(){return null==this.top},this.size=function(t){return null!=this.top?this.size(t+1):t}}function Queue(t,e){this.value=isType(e,"Number")?new Array(e):[],this.limit=e||null,t&&this.value.push(t),this.enqueue=function(t){if(this.isFull())throw new Error("Queue overflow !")
isType(t,"array")?this.value.preppend(t):this.value.unshift(t)},this.dequeue=function(){if(this.isEmpty())throw new Error("Queue underflow !")
var t=this.head()
return this.value.pop(),t},this.head=function(){return this.value.last()},this.tail=function(){return this.value[0]},this.isEmpty=function(){return 0===this.value.length},this.isFull=function(){return null!=this.lim?this.value.length>=this.limit:!1},this.size=function(){return this.value.length},this.toString=function(){return"Queue(head="+this.head()+", tail="+this.tail()+", value="+this.value.toString()+")"},this.equals=function(t){return this.toString()===t.toString()}}function QueueArray(t){this.value=t||[],this.front=-1,this.back=-1,this.enqueue=function(t){if(isType(t,"array"))for(i=0;i<t.length;i++)this.enqueue(t[i])
else{if(this.isFull())throw new Error("The queue is full")
this.isEmpty()?(this.front++,this.back++,this.value[this.back]=t):(this.back=(this.back+1)%this.value.length,this.value[this.back]=t)}},this.dequeue=function(){var t
if(this.isEmpty())throw new Error("I can't dequeue from an empty queue")
return this.front==this.back?(t=this.value[this.front],this.front=this.back=-1):(t=this.value[this.front],this.front=(this.front+1)%this.value.length),t},this.isEmpty=function(){return-1==this.front&&-1==this.back},this.isFull=function(){return this.back>(this.front+1)%this.value.length},this.size=function(){return this.value.length},this.toString=function(){return"Queue(front="+this.front+", back="+this.back+", value="+this.value.toString()+")"},this.equals=function(t){return this.toString()===t.toString()}}function QueueList(){this.front=null,this.back=null,this.len=0,this.enqueue=function(t){if(isType(t,"array"))for(i=0;i<t.length;i++)this.enqueue(t[i])
else{var e=null!=this.back?new Node(t,this.back,null):new Node(t)
null!=this.back.prev&&(this.back.prev=e),this.back=e,this.len++}return this},this.dequeue=function(){if(this.isEmpty())throw new Error("I can't dequeue an empty queue list")
return this.front=this.front.prev,this.len--,this.front},this.isEmpty=function(){return 0==len||null==this.back},this.size=function(t){return this.len},this.toString=function(){for(var t="",e=this.front;null!=e;)t+="<-"+e.payload,e=e.prev
return t},this.equals=function(t){return this.toString()===t.toString()},this.remove=function(t){for(var e=this.front;null!=e;)null==e.payload||e.payload!=t&&!e.payload.equals(t)||(e=null),e=e.next},this.insertAt=function(t,e){this.back.next=new Node(e),0==t?this.front=new Node(e):t==len?this.back=new Node(e):t>len&&this.enqueue(e)}}function Astar(){for(var t,e,r,s=[e];s!=[];){var n=[],o=s[0].f
for(i in s)n.push(s[i].f),o=Math.min(o,s[i].f)
if(r=s.filter(function(t){return t.f==o?t:void 0})[0],s=s.filter(function(t){return t.f!=o?t:void 0}),r==t)throw"Solution found !"}}function IDAstar(){}function readCoord(t,e){var i=t.slice(1,t.length-1).split(", ")
return e?[parseInt(i[0]),parseInt(i[1])]:i}function rmConsecDuplicates(t){var e=[],r=0
for(i=0;i<t.length;i++)0!=i&&t[i]==t[i-1]||(e[r++]=t[i])
for(r=0,i=0;i<t.length-1;i++)t[i]!=t[i+1]&&(e[r++]=t[i])
return e}function rmDuplicates(t){var e=rmConsecDuplicates(t),r=0
for(i=0;i<t.length;i++)(0==i||t[i]!=t[i-1]||i>=1&&t[i]!=t[i-2]||i>=2&&t[i]!=t[i-3])&&(e[r++]=t[i])
for(i=0;i<e.length;i++)for(r=0;r<e.length;r++)i!=r&&e[i]==e[r]&&(e[r]=void 0)
return e.remove(void 0)}function Shape(t,e,i,r){this.x=t||0,this.y=e||0,this.border=i||1,this.vel=r||new Vector(0,0),this.norm=this.vel.getNormal(),this.update=function(){this.x+=this.vel.x,this.y+=this.vel.y,this.norm=this.vel.getNormal()},this.stop=function(){this.vel=this.norm=new Vector(0,0)},this.toString=function(){return"Shape(x="+this.x+", y="+this.y+", border="+this.border+", velocity="+this.vel+")"},this.offset=function(i){return"l"==i?t-1-border:"r"==i?t+1+border:"u"==i?e-1-border:e+1+border},this.bounce=function(t){this.vel.reflect(t)},this.copy=function(){return new Shape(this.x,this.y,this.b,this.vel)},this.mult=function(t){return this.x*=t,this.y*=t,this},this.div=function(t){return this.x/=t,this.y/=t,this},this.add=function(t){return this.x+=t.x,this.y+=t.y,this},this.sub=function(t){return this.x-=t.x,this.y-=t.y,this},this.draw=function(){},this.getSpeed=function(){return Math.sqrt(Math.pow(this.vel.x,2)+Math.pow(this.vel.y,2))}}function Box(x,y,z,w,h,d,bsz,bclr,bgclr,brd){return this.x=x||0,this.y=y||0,this.z=z||0,this.width=w||10,this.height=h||10,this.deepth=d||.1,this.borderSize=bsz||1,this.borderColor=bclr||"#000",this.borderRadius=brd||0,this.backgroundColor=bgclr||"#fff",this.ratio=(this.height/this.width).toNDigits(4),this.ratio3d=[this.ratio,this.height/non0(this.deepth),this.width/non0(this.deepth)].mean(4),this.draw=function(){},this.erase=function(){},this.rot=function(t,e,i){},this.translate=function(t,e,i){},this.toString=function(){with(this)return"Box(x="+x+", y="+y+", z="+z+", width="+width+", height="+height+", deepth="+deepth+", borderSize="+borderSize+", borderColor="+borderColor+", borderRadius="+borderRadius+", backgroundColor="+backgroundColor+")"},this}function AABB(t,e,i,r,n,o){this.x=t||0,this.y=e||this.y,this.w=i||10,this.h=r||this.w,this.border=n||1,this.vel=o||new Vector(0,0),this.ratio=this.h/this.w,this.norm=this.vel.getNormal(),this.getPoints=function(){return[new Pt(this.x,this.y),new Pt(this.x+this.w,this.y),new Pt(this.x+this.w,this.y+this.h),new Pt(this.x,this.y+this.h)]},this.equals=function(t){return this.x==t.x&&this.y==t.y&&this.w==t.w&&this.h==t.h&&this.border==t.border&&this.vel.equals(t.vel)},this.toString=function(){return"AABB(x="+this.x+", y="+this.y+", width="+this.w+", height="+this.h+", velocity="+this.vel.toString()+", border="+this.border+")"},this.hit=function(t,e){return"l"==s?t.offset("l")<=this.offset("r"):"r"==s?t.offset("r")>=this.offset("l"):"u"==s?t.offset("u")<=this.offset("d"):"d"==s?t.offset("d")>=this.offset("u"):this.hit(t,"l")||this.hit(t,"r")||this.hit(t,"u")||this.hit(t,"d")},this.copy=function(){return new AABB(this.x,this.y,this.w,this.h,this.b,this.vel)},this.concat=function(t){this.w=t.x-this.x-this.w,this.h=t.y-this.y-this.h},this.deconcat=function(t){this.w=(t.x-this.x)/2,this.h=(t.y-this.y)/2},this.draw=function(){},this.getPerimeter=function(){return 2*this.w+2*this.h},this.getArea=function(){return this.w*this.h},this.getDiag=function(){return Math.sqrt(Math.pow(this.w,2)+Math.pow(this.h,2))}}function Circ(t,e,i,r,s){this.x=t||0,this.y=e||0,this.r=i||10,this.border=r||1,this.vel=s||new Vector(0,0),this.norm=this.vel.getNormal(),this.offset=function(t){return"l"==t?this.x-this.r:"r"==t?this.x+this.r:"u"==t?this.y-this.r:this.y+this.r},this.equals=function(t){return this.x==t.x&&this.y==t.y&&this.r==t.r&&this.border==t.border&&this.vel.equals(t.vel)},this.toString=function(){return"Circ(x="+this.x+", y="+this.y+", radius="+this.r+", velocity="+this.vel.toString()+")"},this.hit=function(t,e){return t.hit(this,"")?(this.bounce(t.norm),this.update(),!0):!1},this.draw=function(){},this.getCircumference=function(){return 2*this.r*Math.PI}}function Pt(t,e){this.prototype=Shape.prototype,this.x=t||0,this.y=e||0,this.vel=new Vector(0,0),this.equals=function(t){return this.x==t.x&&this.y==t.y},this.toString=function(){return"Pt(x="+this.x+", y="+this.y+")"}}function Line(t,i){this.s=t,this.e=i,this.equals=function(t){return this.s==t.s&&this.e==t.e},this.toString=function(){return"Line(start="+this.s.toString()+", end="+e.toString()+")"}}function Vector(t,e){this.prototype=Shape.prototype,this.x=t||0,this.y=e||0,this.toString=function(){return"Vector(x="+this.x+", y="+this.y+")"},this.equals=function(t){return this.x==t.x&&this.y==t.y},this.copy=function(){return new Vector(this.x,this.y)},this.normalise=function(){var t=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))
this.x/=t,this.y/=t},this.getNormal=function(){return new Vector(this.x/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)),this.y/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)))},this.zero=function(){return this.x=this.y=0,this},this.neg=function(){return this.x=-x,this.y=-y,this},this.dot=function(t){return this.x*t.x+this.y*t.y},this.cross=function(t){return this.x*t.y-this.y*t.x},this.lenSq=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},this.length=function(){return Math.sqrt(this.lenSq())},this.reflect=function(t){var e=this.normal.copy()
return e.mult(2*this.dot(this.normal)),this.sub(e),this},this.angle=function(t){return Math.acos((this.x*t.x+this.y*t.y)/(this.length()*t.length()))}}function Polygon(t,e,i){this.points=t,this.border=e||1,this.vel=i||new Vector(0,0),this.norm=this.vel.getNormal(),this.equals=function(t){var e=!0
for(p in this.points)this.points.hasOwnProperty(p)&&t.points.hasOwnProperty(p)&&(e=e&&this.points[p].equals(t.points[p]))
return e&&this.border==t.border&&this.vel.equals(t.vel)},this.toString=function(){var t="["
for(p in this.points)this.points.hasOwnProperty(p)&&(t+=this.points[p].toString()+", ")
return t+="]","Polygon(points="+t+", velocity="+this.vel.toString()+", border="+this.border+")"},this.hit=function(t,e){return"l"==s?t.offset("l")<=this.offset("r"):"r"==s?t.offset("r")>=this.offset("l"):"u"==s?t.offset("u")<=this.offset("d"):"d"==s?t.offset("d")>=this.offset("u"):this.hit(t,"l")||this.hit(t,"r")||this.hit(t,"u")||this.hit(t,"d")},this.copy=function(){return new Polygon(this.points,this.b,this.vel)},this.draw=function(){}}function simpleTable(t,e,r,s,n){var o=t?"<table id="+r+" style="+s+" cellspacing=0 cellpadding=2><caption>"+t+"</caption>":"<table>"
for(i=0;i<e.length;i++){if(o+="<tr>",n)for(j=0;j<e[i].length;j++)o+="<td>"+e[i][j]+"</td>"
else o+="<td>"+e[i]+"</td>"
o+="</tr>"}return o+="</table><style>table{background: #000;}table, td {border: 1px solid #000; color: #000; background: #fff;} tr:nth-child(even) td{background: #ddd;} tr td:hover{background: #bbb;}</style>"}function rowTable(t,e,r,s,n,o){var a=t?"<table id="+s+" style="+o+" cellspacing=0 cellpadding=2><caption>"+t+"</caption>":"<table>"
for(i=0;i<r.length;i++){if(a+=e?"<tr><th>"+e[i]+"</th>":"<tr>",n)for(j=0;j<r[i].length;j++)a+="<td>"+r[i][j]+"</td>"
else a+="<td>"+r[i]+"</td>"
a+="</tr>"}return a+="</table><style>table{background: #000;}table, td, th {border: 1px solid #000; color: #000; background: #fff;} tr:nth-child(even) td, tr:nth-child(even) th {background: #ddd;} tr td:hover, tr th:hover{background: #bbb;}</style>"}function colTable(t,e,r,s,n,o){var a=t?"<table id="+s+" style="+o+" cellspacing=0 cellpadding=2><caption>"+t+"</caption>":"<table>"
if(e){for(a+="<tr>",i=0;i<e.length;i++)a+="<th>"+e[i]+"</th>"
a+="</tr>"}for(i=0;i<r.length;i++){if(a+="<tr>",n)for(j=0;j<r[i].length;j++)a+="<td>"+r[j][i]+"</td>"
else a+="<td>"+r[i]+"</td>"
a+="</tr>"}return a+="</table><style>table{background: #000;}table, td, th {border: 1px solid #000; color: #000; background: #fff;} tr:nth-child(even) td{background: #ddd;} tr td:hover{background: #bbb;}"}function complexTable(t,e,r,s,n,o,a){var h=t?"<table id="+n+" style="+a+" cellspacing=0 cellpadding=2><caption>"+t+"</caption>":"<table><tr><td></td>"
for(i=0;i<s.length;i++)h+="<th>"+s[i]+"</th>"
for(h+="</tr>",i=0;i<r.length;i++){if(h+=e?"<tr><th>"+e[i]+"</th>":"<tr>",o)for(j=0;j<r[i].length;j++)h+="<td>"+r[i][j]+"</td>"
else h+="<td>"+r[i]+"</td></tr>"
h+="</tr>"}return h+="</table><style>table{background: #000;}table, td, th {border: 1px solid #000; color: #000; background: #fff;} tr:nth-child(even) td{background: #ddd;} tr td:hover{background: #bbb;}</style>"}function colourTable(t,e,r,s,n,o){var a=t?"<table id="+s+" style="+o+" cellspacing=0 cellpadding=2><caption>"+t+"</caption>":"<table>"
if(e){for(a+="<tr>",i=0;i<e.length;i++)a+="<th>"+e[i]+"</th>"
a+="</tr>"}for(i=0;i<r.length;i++){if(a+="<tr>",n)for(j=0;j<r[i].length;j++)a+=isValid(r[i][j],"color")?"<td style='background:"+r[i][j]+";'><br /></td>":"<td>"+r[i][j]+"</td>"
else a+="<td style='background:"+r[i]+";'><br /></td>"
a+="</tr>"}return a+="</table><style>table{background: #000;}table, td, th {border: 1px solid #000; color: #000; background: #fff;} tr:nth-child(even) td{background: #ddd;} tr td:hover{background: #bbb;}</style>"}function database(t,e,r,s,o,a){for(this.name=t||"Database",this.headerRow=isNon(e)?range(0,1,100):e,this.content=isNon(r)?fillIn([],"..."):r,this.headerCol=s||["Index","Value"],this.admin=o||"Anonymous",this.version=a||1,this.val=new Array(this.headRow.length),i=0;i<this.val.length;i++)this.val[i]=new Array(s.length)
for(i=0;i<this.headerCol.length;i++)this.val[0][i]=this.headerCol[i]
for(i=0;i<this.content.length;i++)for(this.val[i][0]=this.headerRow?this.headerRow[i]:i,j=0;j<this.content[i].length;j++)this.val[i][j+1]=this.content[i][j]
this.setStorage=function(){localStorage[this.name]=JSON.stringify(this.val)},this.html=complexTable(this.name,this.headerRow,this.content,this.headerCol,t),this.css="<style>*{font-family: Consolas, Segoe UI, Tahoma;}table{background: #000;}table, td, th {border: 1px solid #000; color: #000; background: #fff;} tr:nth-child(even) td, tr:nth-child(even) th{background: #eee;}</style>",this.disp=function(t){var e=t?"#"+t:"body"
$e(e).write(this.html+this.css,!0),this.setStorage()},this.update=function(){localStorage[this.name]?this.val=JSON.parse(localStorage[this.name]):this.setStorage()},this.searchAndRemove=function(t){for(n=0;n<t.length;n++)for(i=0;i<this.val.length;i++)for(j=0;j<this.val.length;j++)this.val[i][j]==t[n]&&(this.val[i][j]=null)},this.remove=function(t,e){for(i=0;i<t.length;i++)for(j=0;j<e.length;j++)this.val[e[j]][t[i]]=null}}function char2hex(t){return conv(t.charCodeAt(0),10,16)}function hex2char(t){return String.fromCharCode(conv(t,16))}function char2bin(t){return conv(t.charCodeAt(0),10,2)}function bin2char(t){return String.fromCharCode(conv(t,2))}function trans(t,e){var i=t.charCodeAt(0)
return String.fromCharCode(i+e)}function encrypt(t,e){if(!e){var r=t.length,s=0,n=Math.floor(r/2)
n=r%2==0?t.charCodeAt(n):(t.charCodeAt(t[n-1])+t.charCodeAt(t[n]))/2,s=n>=97&&122>=n?2:n>=65&&90>=n?1:n-2*floor(n/2)==0?-1:2,e=Math.round((Math.pow(2,7)+sumOfString(t)-48)/prodOfString(t))+s}var o=""
for(i=0;i<t.length;i++)o+=trans(t[i],e)
return r=n=s=void 0,o}function decrypt(t,e){var r=""
if(e)for(i=1;i<=t.length;i++)r+=trans(t[i-1],e)
else for(r=new Array(131073),i=-65536;i<65537;i++)for(r[i+65536]="",j=0;j<t.length;j++)r[i+65536]+=trans(t[j],i%65537)
return console.log(console.table(r)),e?t+" => "+r:complexTable("Decryption result for <i>"+t+"</i>",range(-65536,1,65536),r,["Key","Result"],"decrypted_"+t,!1,Essence.css)}function abcEncode(t){var e=new Array(t.length)
if(isType(t,"string")||isType(t,"array")){for(i in t)switch(t[i].toLowerCase()){case" ":e[i]="00"
break
case"a":e[i]="01"
break
case"b":e[i]="02"
break
case"c":e[i]="03"
break
case"d":e[i]="04"
break
case"e":e[i]="05"
break
case"f":e[i]="06"
break
case"g":e[i]="07"
break
case"h":e[i]="08"
break
case"i":e[i]="09"
break
case"j":e[i]=10
break
case"k":e[i]=11
break
case"l":e[i]=12
break
case"m":e[i]=13
break
case"n":e[i]=14
break
case"o":e[i]=15
break
case"p":e[i]=16
break
case"q":e[i]=17
break
case"r":e[i]=18
break
case"s":e[i]=19
break
case"t":e[i]=20
break
case"u":e[i]=21
break
case"v":e[i]=22
break
case"w":e[i]=23
break
case"x":e[i]=24
break
case"y":e[i]=25
break
case"z":e[i]=26
break
case".":e[i]=27
break
case",":e[i]=28
break
case"!":e[i]=29
break
case"?":e[i]=30
break
case"(":e[i]=31
break
case")":e[i]=32
break
case":":e[i]=33
break
case";":e[i]=34
break
case"@":e[i]=35
break
case"~":e[i]=36
break
case"'":e[i]=37
break
case'"':e[i]=38
break
case"#":e[i]=39
break
case"{":e[i]=40
break
case"}":e[i]=41
break
case"-":e[i]=42
break
case"\\":e[i]=43
break
case"/":e[i]=44
break
case"":e[i]=45
break
case"$":e[i]=46
break
case"":e[i]=47
break
case"+":e[i]=48
break
case"*":e[i]=49
break
case"%":e[i]=50
break
case"^":e[i]=51
break
case"":e[i]=52
break
default:e[i]="x"}return isType(t,"string")?e.join(""):e}return Essence.say("The parameter of abcEncode must be a string or an array.","err")}function abcDecode(t){var e=new Array(t.length)
if(isType(t,"string")||isType(t,"array")){for(i=0;i<t.length;i+=2)switch(t.substr(i,2)){case"00":e[i]=" "
break
case"01":e[i]="a"
break
case"02":e[i]="b"
break
case"03":e[i]="c"
break
case"04":e[i]="d"
break
case"05":e[i]="e"
break
case"06":e[i]="f"
break
case"07":e[i]="g"
break
case"08":e[i]="h"
break
case"09":e[i]="i"
break
case"10":e[i]="j"
break
case"11":e[i]="k"
break
case"12":e[i]="l"
break
case"13":e[i]="m"
break
case"14":e[i]="n"
break
case"15":e[i]="o"
break
case"16":e[i]="p"
break
case"17":e[i]="q"
break
case"18":e[i]="r"
break
case"19":e[i]="s"
break
case"20":e[i]="t"
break
case"21":e[i]="u"
break
case"22":e[i]="v"
break
case"23":e[i]="w"
break
case"24":e[i]="x"
break
case"25":e[i]="y"
break
case"26":e[i]="z"
break
case"27":e[i]="."
break
case"28":e[i]=","
break
case"29":e[i]="!"
break
case"30":e[i]="?"
break
case"31":e[i]="("
break
case"32":e[i]=")"
break
case"33":e[i]=":"
break
case"34":e[i]=";"
break
case"35":e[i]="@"
break
case"36":e[i]="~"
break
case"37":e[i]="'"
break
case"38":e[i]='"'
break
case"39":e[i]="#"
break
case"40":e[i]="{"
break
case"41":e[i]="}"
break
case"42":e[i]="-"
break
case"43":e[i]="\\"
break
case"44":e[i]="/"
break
case"45":e[i]=""
break
case"46":e[i]="$"
break
case"47":e[i]=""
break
case"48":e[i]="+"
break
case"49":e[i]="*"
break
case"50":e[i]="%"
break
case"51":e[i]="^"
break
case"52":e[i]=""
break
default:e[i]=0}return isType(t,"string")?e.join(""):e}return Essence.say("The parameter of abcDecode must be a string or an array.","err")}function addFav(t,e,i){var r=i?"#"+i:"body"
"Mic"==nav&&ver>=4?$e(r).write('<a href="#" onClick="window.external.AddFavorite('+t+", "+e+');return(false);">Bookmark this webpage</a><br />',!0):$e(r).write("Press CTRL+D to add this webpage to your bookmarks!",!0)}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function writemsg(t,e){for(var i=t.length+10;i>pos;)txt=t.substring(pos,0),e.write(txt),pos++}function dateTime(t){var e=new Date,i=e.getFullYear(),r=e.getMonth(),n=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),o=e.getDate(),a=e.getDay(),h=e.getHours(),l=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saterday"),c="",u=e.getTimezoneOffset()
10>h&&(h="0"+h),m=e.getMinutes(),h>12?(h-=12,c="PM"):c="AM",m<10&&(m="0"+m),s=e.getSeconds(),s<10&&(s="0"+s),u=u>=0?"GMT+"+u:"GMT-"+u
var d="We're "+l[a]+" "+o+" "+n[r]+" "+i+" and it's "+h+":"+m+":"+s+" "+c+" "+u
return $e("#"+t).write(d,!0),setTimeout('dateTime("'+t+'");',1e3),!0}function viewHide(t){return"hidden"==$e("#"+t).css("visibility")?($e("#"+t).setCSS("visibility","visible"),$e("#btn_"+t).write("Hide",!0)):($e("#"+t).setCSS("visibility","hidden"),$e("#btn_"+t).write("View",!0)),!0}function process(t,e,i,r){this.name=t,this.author=e||"Anonymous",this.bitsize=0,this.description=i||"",this.content=r||"",this.sig=this.name[0]+this.name[this.name.length-1]+prodOfString(this.name)+this.author.slice(0,2)+"-"+getType(this.content)[0],this.update=function(){this.author!=e||"Anonymous"==this.author||isNon(this.author)?this.sig=this.name[0]+this.name[this.name.length-1]+"-"+prodOfString(this.name)+this.author.slice(0,2)+"-"+getType(this.content)[0]:this.sig=this.name[0]+this.name[this.name.length-1]+prodOfString(this.name)+this.author.slice(0,2)+"-"+getType(this.content)[0],"N"==this.sig[this.sig.length-1]?this.bitsize=8*sumOfString(conv(this.content,10,2)):"B"==this.sig[this.sig.length-1]?this.bitsize=8:"A"==this.sig[this.sig.length-1]?this.bitsize=is2dArray(this.content)?8*numElm(this.content):8*this.content.length:"O"==this.sig[this.sig.length-1]?this.bitsize=0:"S"==this.sig[this.sig.length-1]?this.bitsize=8*this.content.length:this.bitsize=null},this.update(),this.askPermission=function(t){this.update(),t.add(this)},this.destroy=function(){Essence.say("The process named "+this.name+" (created by "+this.author+") has been destroyed !","info")},Essence.addProcess(this)}function server(t,e,r,s,n){this.name=t,this.admin=e,this.version=s||1,this.maxsize=n||Math.pow(2,14),this.nb_slots=Math.pow(2,6),this.slots=mkArray(this.nb_slots,1,"empty"),this.type=r||"data",this.type=this.type.toLowerCase(),"data"==this.type?this.data=new database(this.name,range(1,1,this.maxsize),this.slots,["Index","Value"],this.admin,this.version):"process"==this.type?this.data=new database(this.name,range(1,1,this.maxsize),this.slots,["N","Name","Author","Description","Content","Bit size"],this.admin,this.version):"storage"==this.type?this.data=new database(this.name,range(1,1,this.maxsize),this.slots,["Key","Value"],this.admin,this.version):"authentification"==this.type?this.data=new database(this.name,range(1,1,this.maxsize),this.slots,["Username","Password","Email","Hash"],this.admin,this.version):"register"==this.type||"details"==this.type?this.data=new database(this.name,range(1,1,this.maxsize),this.slots,["First name","Last Name","Title","Email","Phone","Sex","City/Country","Birthday","Websites","Job","Quote"],this.admin,this.version):"location"==this.type&&(this.data=new database(this.name,range(1,1,this.maxsize),this.slots,["Name","Longitude","Latitude"],this.admin,this.version)),this.addProcess=function(e){if("-"==e.sig[2]||e.bitsize>this.maxsize/this.nb_slots)console.log("[Server:"+t+"] The process named "+e.name+" has been rejected")
else{var r
for(i=0;i<this.nb_slots;i++)if(isNon(this.slots[i])){this.slots[i]=[e.name,e.author,e.description,e.content,e.bitsize],r=i,i=this.nb_slots
break}this.slots[r]!=[e.name,e.author,e.description,e.content,e.bitsize]&&this.nb_slots<this.maxsize&&(this.nb_slots+=this.maxsize/this.nb_slots,this.slots[this.nb_slots]=[e.name,e.author,e.description,e.content,e.bitsize])}},this.add=function(t){var e
for(i=0;i<this.nb_slots;i++)if(isNon(this.slots[i])){this.slots[i]=JSON.stringify(this),e=i,i=this.nb_slots
break}this.slots[e]!=t&&this.nb_slots<this.maxsize&&(this.nb_slots+=this.maxsize/this.nb_slots,this.slots[this.nb_slots]=JSON.stringify(this))},this.rm=function(t){this.slots[t]=null},this.store=function(){localStorage["server_"+this.name]=JSON.stringify(this)},this.update=function(){localStorage["server_"+this.name]?(this.name=localStorage["server_"+this.name].name,this.admin=localStorage["server_"+this.name].admin,this.version=localStorage["server_"+this.name].version,this.maxsize=localStorage["server_"+this.name].maxsize,this.nb_slots=localStorage["server_"+this.name].nb_slots,this.slots=JSON.parse(localStorage["server_"+this.name].slots),this.data=localStorage["server_"+this.name].data):this.store()},this.fire=function(t){for(i in this.slots)this.slots[i][0]==t.name&&this.slots[i][1]==t.author&&this.rm(i)},this.reset=function(){for(i in this.slots)this.rm(i)},Essence.addServer(this)}function setupConnexionEval(t,e,i,r){window.defaultStatus="Evalue the connexion and see the downloading speed",src=t||"img/random2000x2000.jpg"||"img\\random2000x2000.jpg",size=e||61784,delay=i||100,nb=-1,t1=0,t2=0,maxDelay=r||2e4}function CECheck(t){img=new Image,t1=(new Date).getTime(),img.src=src+"?t 1="+t1,nb=0,$e(t).write("Verification in progress..."),setTimeout("CETimer("+t+")",delay)}function CETimer(t){nb++,$e(t).yxy("Verification in progress..."),nb*delay>=maxDelay?$e(t).write(evalDownload(0)):img.complete?(t2=(new Date).getTime(),$e(t).write(evalDownload(size/(t2-t1))),console.log("["+Date()+"] Connexion: "+toNDigits(size/(t2-t1),3)+" kbps")):setTimeout("CETimer("+t+")",delay)}function evalDownload(t){return nb=-1,res="",0==t?res="No connexion":t>0&&56>=t?res="Low debit":t>56&&8e3>=t?res="ADSL debit":t>8e3&&2e4>=t?res="ADSL2+":t>2e4&&5e4>=t?res="wire":t>5e4&&1e5>=t?res="optical fibre":res="Ethernet",res+" ("+toNDigits(t,3)+" kbps)"}function evalUpload(t){return nb=-1,res="",0==t?res="No connexion":t>0&&56>=t?res="Low debit":t>56&&1e3>=t?res="ADSL+":t>1e3&&5e3>=t?res="wire":res="Ethernet",res+" ("+toNDigits(t,3)+" kbps)"}function evalPing(t){return nb=-1,res="",t>0&&30>=t?res="Excellent":t>30&&60>=t?res="Really good":t>60&&100>=t?res="Good":t>100&&200>=t?res="Okay":t>200&&300>=t?res="Poor":t>300&&400>=t?res="Bad":res="Really bad",res+" ("+ping+" ms)"}function msgBox(t,e,i,r,s,n){t=rmChar(t.toLowerCase()," ")
var o={borderColor:"#bababa",borderSize:"1px",borderRadius:5,backgroundColor:"#fbfbfb",textColor:"#000",textSize:"14px",textFont:"Calibrie",buttonBorderColor:"#aaa",buttonBorderSize:.8,buttonBorderRadius:5,buttonColor:"#ccc",buttonTextColor:"#000",buttonTextSize:"14px",buttonText:"OK"},a="",h=""
"info"==t?(a="img/info.png",h="i",o.borderColor="#088",o.backgroundColor="rgba(0,255,255,1)",console.info("[Essence.js] "+e+": "+i)):"error"==t?(a="img/error.png",h="x",o.borderColor="#800",o.backgroundColor="rgba(255,0,0,1)",o.textColor="#FFF",console.error("[Essence.js] "+e+": "+i)):"warning"==t?(a="img/warning.png",h="/!\\",o.borderColor="#840",o.backgroundColor="rgba(255,127,0,1)",o.textColor="#FFF",o.buttonText="Got it",console.warn("[Essence.js] "+e+": "+i)):"question"==t?(a="img/question.png",h="?",o.borderColor="#008",o.backgroundColor="rgba(0,0,255,1)",o.textColor="#FFF",o.buttonText="Continue",console.log("[Essence.js] "+e+": "+i+" ?")):"success"==t?(a="img/success.png",h="v/",o.borderColor="#080",o.backgroundColor="rgba(0,255,0,1)",o.textColor="#FFF",o.buttonText="OK",console.log("[Essence.js] "+e+": "+i)):"load"==t?(a="img/load.gif",h="o",o.borderColor="#888",o.backgroundColor="rgba(255,255,255,1)",o.textColor="#FFF",o.buttonText="Continue",console.log("[Essence.js] "+e+": "+i+"...")):"custom"==t?(a=n,h=" ",s.borderColor&&(o.borderColor=s.borderColor),s.borderSize&&(o.borderSize=s.borderSize),s.borderRadius&&(o.borderRadius=s.borderRadius),s.backgroundColor&&(o.backgroundColor=s.backgroundColor),s.textColor&&(o.textColor=s.textColor),s.textSize&&(o.textSize=s.textSize),s.textFont&&(o.textFont=s.textFont),s.buttonBorderColor&&(o.buttonBorderColor=s.buttonBorderColor),s.buttonBorderSize&&(o.buttonBorderSize=s.buttonBorderSize),s.buttonBorderRadius&&(o.buttonBorderRadius=s.buttonBorderRadius),s.buttonColor&&(o.buttonColor=s.buttonColor),s.buttonTextColor&&(o.buttonTextColor=s.buttonTextColor),s.buttonTextSize&&(o.buttonTextSize=s.buttonTextSize),s.buttonText&&(o.buttonText=s.buttonText),console.log("[Essence.js] "+e+": "+i)):a=!1
var l=document.createElement("div"),c=document.createElement("span"),u=document.createElement("p"),d=document.createElement("input"),f="<img src="+a+" alt='"+h+"' />"
l.id="overlay",c.id="msgBoxHeader",u.id="msg",d.id="msgBoxBtn",d.type="button",d.value=o.buttonText,f.id="msgImg",r?(c.innerHTML=e,u.innerHTML=i):(c.innerText=e,u.innerText=i),$e("#overlay").isEmpty()&&(Essence.handleError("The #overlay element is voided","essence.js",1336),$e("#overlay").write("<div id='overlay'></div>",!0),$n("#overlay")||body.appendChild(document.createElement("div").id="overlay")),$e("#overlay").setStyles(["visibility","hidden","position","absolute","left",0,"top",0,"width","100%","height","100%","text-align","center","z-index","1000","background","rgba(127,127,127,.5)"]),$e("div#overlay").setStyles(["width","300px","margin","100px auto","background",o.backgroundColor,"border",o.borderSize+" solid "+o.borderColor,"padding","15px","textAlign","center","boxShadow","3px 3px 3px #333","borderRadius",o.borderRadius]),$e("#msgBoxHeader").setStyles(["fontSize",parseInt(o.textSize+2)+"px","fontFamily",o.textFont,"color",o.textColor]),$e("#msg").setStyles(["fontSize",o.textSize,"fontFamily",o.textFont,"color",o.textColor]),$e("#btnBoxBtn").setStyles(["border",o.buttonBorderSize+" solid "+o.buttonBorderColor,"color",o.buttonTextColor,"fontSize",o.buttonTextSize]),$e("#msgImg").setStyles(["position","","top","2%","left","2%"]),l.appendChild(c,f,u,d),body.appendChild(l),d.onClick=function(){body.removeChild(l)}}function genPassword(){var t=[],e=["&","~",'"',"#","'","{","[","(","-","|","`","_","\\","^","@",")","]","+","=","}","%","*","?",",",";",".","/",":","!"," ",""],r=""
for(i=65;i<123;i++)(i<=90||i>=97)&&(t[i-65]=String.fromCharCode(i))
for(t=t.concat(e,range(0,1,9)).remove(void 0),t.indexOf(void 0)>-1&&(t=t.concat(e,range(0,1,9)).remove(void 0));r.length<20;)r+=t[randTo(t.length-1)]
return r.length<20&&(r+=t[randTo(t.length-1)]),r}function genHash(t){var e,r,s="",n=toNDigits((821-sumOfString(t))/avgOfString(t)*t.charCodeAt(0),1)
for(i=0;i<t.length;i++)e=toNDigits(t.charCodeAt(i)+n,1)%255,r=toNDigits(Math.abs(t.charCodeAt(i)+n),1),32>r&&(r+=48),s+=String.fromCharCode(clamp(r%127,32,126))
return s}function weekDay(t){var e,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=parseInt(t.split("/")[0]),s=parseInt(t.split("/")[1]),n=parseInt(t.split("/")[2])
return e=Math.floor(n/100),n%=100,i[Math.round((1+2.6*s-.2+r+n+n/4+e/4-2*e)%7)-1]}function dayOfWeek(t){var e,i=parseInt(t.split("/")[0]),r=[0,3,3,6,1,4,6,2,5,0,3,5],s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n=parseInt(t.split("/")[2])%100+Math.floor(t.split("/")[2]/4),o=Math.floor(t.split("/")[2]/100%4)
return e=0==o?6:1==o?4:2==o?2:0,s[(i+r[parseInt(t.split("/")[1])-1]+n+e)%7]}function linearGradient(t,e,i){var r=parseInt(conv(t,16)),s=parseInt(conv(e,16))
i=parseInt(i)||10
var n=((s-r).sign(),[]),o=(s-r)/(i-1)
for(j=0;j<i;j++)n.push(conv(r+j*o,10,16))
return n}function radialGradient(t,e,i){}function parseURL(t,e){var r=location.href.split("?")
if(r.length>1){var s=r[1].split("&")
if("[object Array]"===Object.prototype.toString.call(t))for(j=0;j<t.length;j++)for(i=0;i<s.length;i++){var n=s[i].split("=")
n[0]==t[j]&&("[object Array]"===Object.prototype.toString.call(e)?e[j](n[1],n[0]):e(n[1],n[0]))}else for(i=0;i<s.length;i++){var n=s[i].split("=")
n[0]==t&&e(n[1])}}}function GET(t){return(t=new RegExp("[?&]"+encodeURIComponent(t)+"=([^&]*)").exec(location.search))?decodeURIComponent(t[1]):void 0}function POST(t,e){var i=document.createElement("form")
i.setAttribute("method","post"),i.setAttribute("action",t)
for(var r in e)if(e.hasOwnProperty(r)){var s=document.createElement("input")
s.setAttribute("type","hidden"),s.setAttribute("name",r),s.setAttribute("value",e[r]),i.appendChild(s)}document.body.appendChild(i),i.submit()}function PUT(){}function DELETE(){}function alphabetSort(t){if(!t.isIterable())throw new Error("alphabetSort cannot sort non iterable objects")
if(isType(t,"String"))return t.split("").quickSort().join("")
for(var e=!0;e;)for(e=!1,k=0;k<=t.maxLength();k++)for(i=0;i<=t.length;i++){if(t[i].length!=t[i+1]){var r=toSameLength(t[i].split(""),t[i+1].split("")).to1d()
t[i]=r[0],t[i+1]=r[1]}t[i].charCodeAt(k)>t[i+1].charCodeAt(k)&&(t=swap(t,i,i+1),e=k>=t.maxLength()-1)}}function timeUp(t,e,i){var r=new Date,s=0
return r=1e3*(60*r.getMinutes()+r.getSeconds())+r.getMilliseconds(),t(i),s=new Date,s=1e3*(60*s.getMinutes()+s.getSeconds())+s.getMilliseconds(),isNon(e)||"auto"==e.slice(0,4).toLowerCase()||"none"==e.slice(0,4).toLowerCase()?s-r>1e3?(s-r)/1e3+"s":s-r+"ms":"ms"==e.toLowerCase()||"millisec"==e.slice(0,8).toLowerCase()?s-r+"ms":(s-r)/1e3+"s"}function binarySearch(t,e){t.quickSort()
for(var i=2,r=t[Math.floor(t.length/i)];r!=e&&i>0;){if(r==e)return!0
i*=2,r=e>r?t[Math.floor(t.length/i)]:t[3*Math.floor(t.length/i)]}return r==e}function daynightMode(t){var e=(new Date).getHours()
t&&(dnM=!dnM),dnM?e>=21?$e("body").setStyles(["backgroundColor","#000","color","#fff"]):$e("body").setStyles(["backgroundColor","#fff","color","#000"]):Essence.say("You cannot use the day/night modder if it's disabled.","warn")}function archive(t,e){return this.name=t,this.data=e,this.dictionnary=[],this.updateDict=function(){var t,r=[],s=alphabetSort(e)
for(i=0;i<e.length-1;i++)s[i]!=s[i+1]&&r.push(s[i])
for(r=rmDuplicates(r),console.log(r.getOccurences()),t=new Array(r.length),s=[],i=0;i<r.length;i++)t[i]=e.count(r[i]),Essence.say("lexiq["+i+"]="+r[i]+" is present "+timesLiteral(t[i]),"inf"),s[i]=r[i]+t[i]
Essence.say("Lexiq of "+this.name+": "+r+"\ncounts: "+t)},this}function Machine(t,e,r,s){switch(this.capacity=r||1024,this.version=e||5,this.name=t||"Machine_"+this.version,this.version){case 1:this.base=2
break
case 2:this.base=3
break
case 3:this.base=8
break
case 4:this.base=10
break
case 5:this.base=16
break
case 6:this.base=36
break
default:this.base=16}this.operation=function(t,e,i){switch(i){case"+":return t+e
case"-":return t-e
case"*":return t*e
case"/":return t/e
case"%":return t%e
case">>":return t>>e
case"<<":return t<<e
case">>>":return t>>>e
case">":return t>e
case"<":return e>t
case"|":return t|e
case"&":return t&e
case"^":return t^e
case"=":return t==e
case"!=":return t!=e
case">=":return t>=e
case"<=":return e>=t
case"||":return t||e
case"&&":return t&&e
default:return t+""+e}},this.inv=function(t){for(isType(t,"String")||(t+=""),i=0;i<t.length;i++)t[i]=parseInt(this.base)-1-parseFloat(t[i])
return t},this.memory=new Memory(this.capacity,s||"",this.name),this.send=function(t,e){POST(e,"msg="+this.parse(t))},this.parse=function(t){var e="",r=[]
for(i=0;i<t.length;i++)r[i]=conv(t[i],this.base),e+=String.fromCharCode(conv(t[i],this.base))
return console.log(r),JSON.parse(e)},this.unparse=function(t){var e=JSON.stringify(t),r="",s=[]
for(i=0;i<e.length;i++)s[i]=e.charCodeAt(i),r+=2==this.base?conv(e.charCodeAt(i).toNDigits(8),10,this.base):conv(e.charCodeAt(i),10,this.base)
return Essence.say(t+"= "+s,"info"),2==this.base?r.divide(8):r.divide(2)},this.store=function(t){this.memory.add(this.unparse(t)),this.memory.save()},this.show=function(){for(i=0;i<this.memory.slots.length;i++)Essence.say(this.memory.slots[i])},this.specs=function(){return"Name: "+this.name+"\nCapacity: "+this.capacity+" bits\nMemory: \n"+this.memory.toString()}}function Memory(t,e,r){this.capacity=t||1024,this.slots=new Array(this.capacity),this.type="local"==e?"local":"session",this.name=r?r+"_"+this.type+"M"+log(this.capacity):this.type+"M"+log(this.capacity),this.free=0,this.save=function(){for(i=0;i<this.slots.length;i++)"local"==this.type?localStorage.setItem(this.name+"#"+i,this.slots[i]):sessionStorage.setItem(this.name+"#"+i,this.slots[i])},this.remove=function(t){this.slots.remove(JSON.stringify(t)),"local"==this.type?localStorage.setItem(this.getLocation(t),void 0):sessionStorage.setItem(this.getLocation(t),void 0)},this.getLocation=function(t){if("local"==this.type){for(i in localStorage)if(localStorage[i]==JSON.stringify(t))return i}else for(i in sessionStorage)if(sessionStorage[i]==JSON.stringify(t))return i
return-1},this.clear=function(){if(this.slots=new Array(this.capacity),this.free=0,"local"==this.type)for(i in localStorage)i.indexOf(this.name)>-1&&localStorage.removeItem(i)
else for(i in sessionStorage)i.indexOf(this.name)>-1&&sessionStorage.removeItem(i)},this.add=function(t){this.slots[this.free++]=JSON.stringify(t)},this.print=function(){for(Essence.say(this.name+"'s slots: ","info"),i=0;i<this.slots.length;i++)try{Essence.say(i+": "+JSON.parse(this.slots[i]))}catch(t){Essence.say(i+": ")}},this.pop=function(){"local"==this.type?localStorage.removeItem(this.getLocation(this.slots.last())):sessionStorage.removeItem(this.getLocation(this.slots.last())),this.free--,this.slots.pop()},this.toString=function(){return this.type.capitalize()+" memory "+this.name+": "+toStr(this.slots,!0)}}function EvtShow(t){alert("	Name: "+t.name+"\nsource: "+t.source+"\ndata: "+t.data+"\ntarget: "+t.target+"\ntime stamp: "+t.timeStamp)}function evtLog(t){for(atr in t)Essence.say(atr+": "+t[atr])}function noobTest(t,e){try{t(e)}catch(i){location.href="http://stackoverflow.com/search?q=[js] + "+i.message}}function chTab(t){$e("#tab_"+oldTab).rmClass("tabOn"),$e("#tab_"+oldTab).addClass("tabOff"),$e("#tab_"+t).rmClass("tabOff"),$e("#tab_"+t).addClass("tabOn"),$e("#contentTab_"+oldTab).style.display="none",$e("#contentTab_"+t).style.display="block",oldTab=t}function animField(t){for(l in $e("*label"))$e("*label").hasOwnProperty(l)&&l.htmlFor==t.id&&(l.write(t.value),t.value="")}function WebPage(t,e,r,s,n,o,a){this.title=t||"My web page",this.type=a.normal()||"html",this.name=e+this.type||"index."+this.type,this.path=r+"/"+this.name||this.name,this.author=s||"Maximilian Berkmann",this.version=n||1,this.structure=o||"header!h-menu!content|aside!footer",this.code="",this.template="",this.word2code=function(t){switch(t.norm()){case"header":return"<header><img src='img/icon.png' /><hgroup><h1>{{title}}</h1><h3>{{subtitle}}</h3></hgroup></header>"
case"h-menu":return"<menu class='h-menu'><li onClick=''>{{0}}</li><li onClick=''>{{1}}</li><li onClick=''>{{2}}</li></menu>"
case"v-menu":return"<menu class='v-menu'><li onClick=''>{{0}}</li><li onClick=''>{{1}}</li><li onClick=''>{{2}}</li></menu>"
case"content":return"<div id='content'>{{content}}</div>"
case"aside":return"<aside>{{aside}}</aside>"
case"footer":return"<footer>{{footer}}</footer>"
case"article":return"<article id='{{article_title}}'><header>{{article_title}}</header>{{content}}<footer>{{article_footer}}</footer></div>"
case"searc":return"<form action='search.php' method='post'><input type='search' name='search' /><input type='image' src='img/search.png' alt='?' /></form>"
default:return t}},this.genTemplate=function(){var t=this.structure.split("!")
for(this.template="<table class='none'>",i=0;i<t.length;i++){this.template+="<tr>"
var e=t.split("|")
for(j=0;j<e.length;i++)this.template+=this.word2code(e[i])
this.template+="</tr>"}return this.template+="</table>",this.template},this.genPage=function(){}}function WebAppBuilder(t,e,r,s,n){this.name=t||"Web App",this.path=e||"",this.version=s||1,this.author=r||"Maximilian Berkmann",this.dirs=["img","script","style"],this.pages=[new WebPage(this.name,"index",this.path,this.author,this.ver,this.stct),new WebPage("Contact us","contact",this.path,this.author,this.ver,this.stct),new WebPage("About us","about",this.path,this.author,this.ver,this.stct)],this.build=function(){for(i=0;i<this.pages.length;i++)this.pages[i].genPage()}}function virtualHistory(t){this.src=t,this.DEFAULT_STATE=t,this.states=new Set(this.src),this.state=0,this.reset=function(){this.src=this.DEFAULT_STATE},this.update=function(t){this.src!=t&&this.add(t)},this.add=function(t){if(isType(t,"array"))for(i=0;i<t.length;i++)this.add(t[i])
else this.src=t,this.states.add(this.src),this.state++},this.undo=function(){if(0==this.state)throw new Error("Set underflow, it's not possible to undo to a non-existent state.")
this.state--,this.src=this.states.get(this.state)},this.redo=function(){if(this.state==this.states.size()-1)throw new Error("Set overflow, it's not possible to redo to a non-existent state.")
this.state++,this.src=this.states.get(this.state)},this.get=function(t){return this.states.get(t)},this.getStates=function(){return this.states.toString()},this.isStateDefault=function(){return this.src==this.DEFAULT_STATE}}function Editor(t,e,i,r,s){this.id=t||"#editor",this.node=$n(this.id),this.linesId="#lines",this.linesNode=$n(this.linesId),this.nbLines=0,this.language=e||"none",this.previewer=i,this.code=$e(this.id).val(),this.codeHistory=new virtualHistory(this.code),this.toolbar=s||new Toolbar,this.toolbar["for"]=this,this.toggleLine=function(t){$e("#"+t).setCSS("background","rgba(0, 0, 0, 0)"==$e("#"+t).css("background")?"red":"rgba(0, 0, 0, 0)")},this.update=function(t){this.node!=$n(this.id)&&(this.node=$n(this.id)),this.linesNode!=$n(this.linesId)&&(this.linesNode=$n(this.linesId)),this.code!=$e(this.id).val()&&(this.code=$e(this.id).val()),t=t||toPixel($e(this.id).css("height"))/(1.12*toPixel($e(this.id).css("fontSize"))),$e(this.linesId).write("",!0),this.nbLines=Math.round(t)
for(var e=1;e<=this.nbLines;e++)$e(this.linesId).after("<span id='l_"+e+"' style='color: black;'>"+e+"</span><br />")
for(this.codeHistory.update(this.code),this.toolbar.update(),e=0;e<this.toolbar.tools.length;e++)this.toolbar.fn[e]=this[this.toolbar.tools[e]]},this.write=function(t){$e(this.id).after(t),this.codeHistory.update(this.code)},this.clear=function(){$e(this.id).write(""),this.codeHistory.reset()},this.undo=function(){this.codeHistory.undo(),$e(this.id).write(this.codeHistory.src)},this.redo=function(){this.codeHistory.redo(),$e(this.id).write(this.codeHistory.src)},this.save=function(){save($e(this.id).val(),"script"+getTimestamp()+".ws","webscript")},this.select=function(){this.node.select()},this.copy=function(){copyToClipboard($e(this.id).val(),"webscript")},this.paste=function(t){t?$e(this.id).write(clipboardData.getData("webscript")):this.write(clipboardData.getData("webscript"))},this.load=function(){var t=prompt("File: ",".ws")
this.clear(),getFileContent(t),$e(this.id).write(fct)},this.generate=function(){this.previewer?/\<\?php([\s\S]*?)\?\>/.test($e(this.id).val())?save($e(this.previewer.id).val(!0),"script"+getTimestamp()+".php","php"):save($e(this.previewer.id).val(!0),"script"+getTimestamp()+".html","html"):/\<\?php([\s\S]*?)\?\>/.test($e(this.id).val())?save($e("#preview").val(!0),"script"+getTimestamp()+".php","php"):save($e(i.id).val(!0),"script"+getTimestamp()+".html","html")},this.view=function(){this.previewer.run($e(this.id).val(),!0)},this.highlightSynthax=function(t,e){switch(e.normal()){case"html":break
case"javascript":break
case"css":break
case"php":break
case"mips":break
case"batch":break
case"bash":break
case"java":break
case"c++":break
case"python":break
case"xml":break
case"webscript":t=t.replace(/(\<|\>|\/\>)([A-Za-z]*|)(\<|\>|\/\>)/g,"<span class='code-tag'>$1</span>"),t=t.replace(/(\"|\')(.*)(\"|\')/g,"<span class='code-str'>$1</span>"),t=t.replace(/(?!\"|\')(\d+)(?!\"|\')/g,"<span class='code-num'>$1</span>"),t=t.replace(/([\s\S]*?)(=)/g,"<span class='code-attr'>$1</span>"),t=t.replace(/\<\!--([\s\S]*)--\>/g,"<span class='code-cmt'>$1</span>"),t=t.replace(/\/\/(.*?)/g,"<span class='code-cmt'>$1</span>"),t=t.replace(/=[A-Za-z0-9\.]+(| )/g,"<span class='code-val'>$1</span>"),t=t.replace(/[=\{\}\[\]\(\)\;]/g,"<span class='code-op'>$1</span>")
break
case"markdown":}return t}}function Preview(t,e,i,r){this.id=t||"#preview",this.node=$n(this.id),this.language=e||"none",this.associatedParser=i||new Parser,this.associatedEditor=r||new Editor,this.update=function(){this.node!=$n(this.id)&&(this.node=$n(this.id))},this.run=function(t,e){$e(this.id).write(e?this.associatedParser.run(t):t,!0)},this.viewCode=function(){var t=open("","Resulting code","width=800,height=600,location=no,menubar=yes,scrollbars=yes,status=no,toolbar=yes"),e=escapeHTML($e(wsIDE.preview.id).val(!0))
e=e.replace(/\n/g,"<br />"),e=e.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),t.document.write(this.associatedEditor.highlightSynthax(e,this.language)),t.document.write("<style>"+Essence.css+"</style>")}}function Debugger(t,e){this.id=t||"#debugger",this.node=$n(this.id),this.language=e||"none",this.update=function(){this.node!=$n(this.id)&&(this.node=$n(this.id))},this.run=function(){}}function lorem(){return"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"}function Parser(t,e,i){this.from="WebScript"|t,this.to=e||"DHTML",this.run=i||function(t){var e=t
return e=e.replace(/\<tab \/\>/gm,"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),e=e.replace(/\{{tab}}/gm,"	"),e=e.replace(/\<info\>(.*?)\<\/info\>/gm,"<span class='block info'>$1</span>"),e=e.replace(/\<question\>(.*?)\<\/question\>/gm,"<span class='block question'>$1</span>"),e=e.replace(/\<error\>(.*?)\<\/error\>/gm,"<span class='block error'>$1</span>"),e=e.replace(/\<warning\>(.*?)\<\/warning\>/gm,"<span class='block warning'>$1</span>"),e=e.replace(/\<success\>(.*?)\<\/success\>/gm,"<span class='block success'>$1</span>"),lorem||(lorem="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),e=e.replace(/(\{\{)LOREM(\}\})/gi,lorem),e=e.replace(/(?:\{\{)LOREM\x7c(\d+)-(\d+)(?:\}\})/gi,lorem.chunk("$1","$2")),e=e.replace(/(?:\{\{)HW(?:\}\})/gi,"Hello World !"),e=e.replace(/\<icon \/\>/gm,"<img src='img/icon.png' class='icon'/>"),e=e.replace(/\<icon size=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<img src='img/icon.png' class='icon' style='width: $1; height: $1;' />"),e=e.replace(/\<icon name=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<img src='img/$1.png' class='icon' />"),e=e.replace(/\<(s|m|l|xs|xl):icon name=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<img src='img/$2.png' class='$1-icon' />"),e=e.replace(/\<js\>([\s\S]*?)\<\/js\>/gm,"<script type='text/javascript'>$1</script>"),e=e.replace(/\<js src=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<script type='text/javascript' src='$1'></script>"),e=e.replace(/\<vb\>([\s\S]*?)\<\/vb\>/gm,"<script type='text/vbscript'>$1</script>"),e=e.replace(/\<vb src=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<script type='text/vbscript' src='$1'></script>"),e=e.replace(/\<css\>([\s\S]*?)\<\/css\>/gm,"<style type='text/css'>$1</style>"),e=e.replace(/\<css href=(?:\"|\')([A-Za-z_ -\.]+)(?:\"|\') \/\>/gm,"<link rel='stylesheet' type='text/css' href='$1' />"),e=e.replace(/\<charset=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<meta charset='$1' />"),e=e.replace(/\<author name=(?:\"|\')(\w+)(?:\"|\') href=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<meta name='author' content='$1' /><link rel='author' href='$2' />"),e=e.replace(/\<desc\>(.*?)\<\/desc\>/gm,"<meta name='description' content='$1' />"),e=e.replace(/\<copy\>(.*?)\<\/copy\>/gm,"<meta name='copyrights' content='$1' />"),e=e.replace(/\<lbl\>(.*?)\<\/lbl\>/gm,"<label>$1</label>"),e=e.replace(/\<submit \/\>/gm,"<input type='submit' />"),e=e.replace(/\<submit val=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<input type='submit' value='$1' />"),e=e.replace(/\<reset \/\>/gm,"<input type='reset' />"),e=e.replace(/\<reset val=(?:\"|\')(\w+)(?:\"|\') \/\>/gm,"<input type='reset' value='$1' />"),e=e.replace(/\<hdn name=(?:\"|\')(\w+)(?:\"|\')\>(.*?)\<\/hdn\>/gm,"<input type='hidden' name='$1' value='$2' />"),e=e.replace(/\<hdn name=(?:\"|\')(\w+)(?:\"|\') id=(?:\"|\')(\w+)(?:\"|\')\>(.*?)\<\/hdn\>/gm,"<input type='hidden' name='$1' value='$3' id='$2' />"),e=e.replace(/<txt ((?:id|name|class)(\=(?:\"|\')(\w+)(?:\"|\'))(| ))\/>/gm,"<input type='text' />"),e=e.replace(/\<sql query=(?:\"|\')(.*?)(?:\"|\') \/\>/gm,"<?php\n	if(mysqli_ping($$dbc)){\n		$r = mysqli_query($$dbc, '$1');\n	}else printMsg('error', 'No ping');\n?>"),e=e.replace(/\<sqlt table=(?:\"|\')(\w+)(?:\"|\') query=(?:\"|\')(.*?)(?:\"|\') \/\>/gm,"<?php\n	if(mysqli_ping($$dbc)){\n		echo 'Last updated at '._time().\"<br />\";selectTable($dbc, '$1', '$2');\n	}else printMsg('error', 'No ping');\n?>")}}function Toolbar(t,e,r){this.id=t||"#toolbar",this.node=$n(this.id),this.tools=e||["undo","redo","clear","save","select","copy","paste","load","generate","view"],this.fn=[],this["for"]=r,this.update=function(){for(this.node!=$n(this.id)&&(this.node=$n(this.id)),i=0;i<this.tools.length;i++)this.fn[i]=this["for"][this.tools[i]]}}function IDE(t,e,i,r,s,n){this.editor=e||new Editor,this.parser=r||new Parser,this.preview=i||new Preview,this.preview.associatedParser=this.parser,this.editor.previewer=this.preview,this.editor.parser=this.parser,this["debugger"]=s||new Debugger,this.language=t||"none",this.init=function(t,e){"none"!=this.language&&(this.editor.language=this["debugger"].language=this.parser.from=this.language),t&&(this.parser.to=t,this.preview.language=t)},this.toolbar=this.editor.toolbar,this.update=function(t){this.editor.update(t),this.preview.update(),this["debugger"].update()}}function loadDoc(t,e){var i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")
i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i)},i.open("GET",t,!0),i.send()}function AJAXpost(t,e,i){var r,s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")
s.onreadystatechange=function(){4==s.readyState&&200==s.status&&(r=i?s.responseXML:s.responseText)},s.open("POST",e,!0),i?(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(t)):(s.setRequestHeader("Content-Type","text/plain"),s.send(t))}function getHTTPMsg(t){switch(t){case 100:return"Continue"
case 101:return"Switching Protocols"
case 200:return"OK"
case 201:return"Created"
case 202:return"Accepted"
case 203:return"Non-Authoriative Information"
case 204:return"No Content"
case 205:return"Reset Content"
case 206:return"Partial Content"
case 300:return"Multiple Choices"
case 301:return"Moved Permanently"
case 302:return"Found"
case 303:return"See Other"
case 304:return"Not Modified"
case 305:return"Use Proxy"
case 306:return"Unused"
case 307:return"Temporary Redirect"
case 400:return"Bad Request"
case 401:return"Unauthorized"
case 402:return"Payment Required"
case 403:return"Forbidden"
case 404:return"Not Found"
case 405:return"Method Not Allowed"
case 406:return"Not Acceptable"
case 407:return"Proxy Authentification Required"
case 408:return"Request Timeout"
case 409:return"Conflict"
case 410:return"Gone"
case 411:return"Length Required"
case 412:return"Precondition Failed"
case 413:return"Requeust Entity Too Large"
case 414:return"Request-url Too Long"
case 415:return"Bad Request"
case 416:return"Unsupported Media Type"
case 417:return"Expectation Failed"
case 500:return"Internal Server Error"
case 501:return"Not Implemented"
case 502:return"Bad Gateway"
case 503:return"Service Unavailable"
case 504:return"Gateway Timeout"
case 505:return"HTTP Version Not Supported"
default:return"Unknown status"}}function Template(t,e,r,s){this.name=t||"Template",this.path=e||this.name+".jst",this.params=s||["name","description","version","title","path"],this.special=["tab","date","time","timestamp"],this.specialEq=["&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",getDate(),getTime(),getTimestamp()],this.text=r||"",this.gen=function(t){var e=this.text,r=keyList(t,!0)
for(i=0;i<r.length;i++)e=e.replace("{{"+r[i]+"}}",t[r[i]])
for(i=0;i<this.special.length;i++)e=e.replace("%"+this.special[i]+"%",this.specialEq[i])
return e},this.save=function(t,e,i){t?save(this.gen(t),(e||this.name)+"."+(i||".js"),i||"javascript"):save(this.text,this.path,"javascript")}}function moveHTMLRange(t,e){$e("#"+t).write(parseFloat($e("#"+t).val())+e),$e("#"+t+"_val").write($e("#"+t).val())}function htmlRange(t,e,i,r){if(!t)throw new Error("htmlRange needs to know the id of the element implementing the range")
return Essence.addCSS(".arrow{cursor: pointer;font-size: 20px;vertical-align: middle}"),'<b class="arrow" onClick="moveHTMLRange(\''+t+'\', -1)">&triangleleft;</b><input type="range" value='+(i||0)+" max="+(r||100)+" min="+(e||0)+' id="'+t+'" onChange="$e(\'#'+t+'_val\').write(this.value);" /><b class="arrow" onClick="moveHTMLRange(\''+t+'\', 1)">&triangleright;</b><span id="'+t+'_val">'+(i||"")+"</span>"}function labelFieldSwap(t,e){$e("#lbl_"+t).isEmpty()&&$e("#lbl_"+t).write("&ensp;",!0),$e("#"+t).isEmpty()||"\b"===$e("#"+t).val()||$e("#"+t).val()!=e&&$e("#"+t).val().length<2?($e("#"+t).write($e("#lbl_"+t).val()),$e("#lbl_"+t).write("&ensp;",!0)):($e("#lbl_"+t).write(e||$e("#"+t).val()),$e("#"+t).val()!==e&&""!==$e("#"+t).val()||$e("#"+t).write("\b"))}function htmlInput(t,e,i){if(!t)throw new Error("htmlInput needs to know the id of the element implementing the input")
return i||(i=e||t),"<label for='"+t+"' id='lbl_"+t+"'>&ensp;</label><br /><input type='"+(e||"text")+"' id='"+t+"' value='"+i+"' onFocus='labelFieldSwap(\""+t+'", "'+i+"\")' onBlur='labelFieldSwap(\""+t+'", "'+i+"\")' />"}var Essence={version:"1.0b",author:"Maximilian Berkmann",description:"library used for DHTML connexions, maths, database management and cryptography",source:document.URL.indexOf("essence.min.js")>-1?"https://www.dropbox.com/s/1prjdvv9ku0ga92/essence.min.js?dl=0":"https://www.dropbox.com/s/n2sz2mxz5zwc05t/essence.js?dl=0",element:$n,handleError:function(t,e,i){alert("[Essence.js] An error has occurred (line "+i+" of "+e+").\n\nMessage: "+t)},say:function(t,e){e=isNon(e)?"":e.slice(0,4).toLowerCase(),"info"==e?console.info("[Essence.js] "+t):"erro"==e?console.error("[Essence.js] "+t):"warn"==e?console.warn("[Essence.js] "+t):console.log("[Essence.js] "+t)},css:"*{font-family:Calibrie,Verdana,Segoe UI}body{height:100%;width:auto;padding:0}table{background:#000}table,td,th{border:1px solid #000;color:#000;background:#fff;cellspacing:0;cellpadding:2;border-collapse:true;}tr:nth-child(even) td{background:#ddd}.none,.none td,.none th{border:none}.inf{color:#008}.succ{color:#0f0}.err{color:#f00}.quest{color:#00f}.warn{color:#fc0}.info{border-color:#008;background-color:#00008f}.success{border-color:#080;background-color:#008f00}.error{border-color:#800;background-color:#8f0000}.question{border-color:#00f;background-color:#0000f8}.warning{border-color:#f8c808;background-color:#fc0}.block{color:#fff;background-repeat:repeat;background-position:0 center;border-style:solid;border-width:1px;-webkit-appearance:none;outline:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:1.1em;line-height:200%;white-space:nowrap;min-height:16px;position:relative;margin:2px;padding:.3em 2px;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none;border-radius:7px;-webkit-border-radius:7px;-moz-border-radius:7px}.icon{width:64px;height:64px;border:none;margin:2px}kbd{border:3px outset #ccc;background:#ccc;border-radius:5px;-webkit-border-radius:7px;-moz-border-radius:7px;-o-border-radius:7px;padding:2px;font-family:Consolas,Tahoma,Segoe UI}h1.title{text-decoration:underline}h2{color:#088}h3{color:#0ff}.code-tag,.code-inst{color:#00f}.code-cmt{color:#0f0}.code-str,.code-id{color:#00c0c0}.code-num,.code-class{color:#f00}.code-attr{color:#c00}.code-val{color:#fc0}.code-type{color:#800080}.code-doc, .code-op{color:#0ff},.code-var{color:#0000c0}.code-keyword{color:#f0f}",applyCSS:function(){if(isNon($n("style"))||$e("style").isEmpty()?$e("head").write($n("head").outerHTML+"<style type='text/css'>"+Essence.css+"</style>",!0):$n("style").innerHTML+=Essence.css,$e("html").val(!0).indexOf("<body></body>")>-1){var t=$e("html").val(!0).indexOf("<body></body>"),e=$e("html").val(!0).slice(0,t),i=$e("html").val(!0).slice(t+13,$e("html").val(!0).length)
$e("html").write(e+i,!0)}},d2r:Math.PI/180,r2d:180/Math.PI,addCSS:function(t){var e=document.createElement("style")
e.innerText=t,$n("head").appendChild(e)},addJS:function(t){var e=document.createElement("script")
e.innerText=t,$n("head").appendChild(e)},update:function(){var t=$e("*script")
for(i=0;i<t.length;i++)(t[i].src.indexOf("essence.js")>-1||t[i].src.indexOf("essence.min.js")>-1)&&(t[i].src=this.source||Essence.source)
Essence.say("Essence.(min).js has been updated","info")},e:Math.exp(1),eps:Math.pow(2,-52),gcd:function(t,e){return e?Essence.gcd(e,t%e):Math.abs(t)},emptyDoc:function(t,e){$e("html").write("<head><title>"+(t||document.title)+"</title><meta charset='UTF-8' /><meta name='author' content="+(e||"unknown")+" /><script type='text/javascript' src="+Essence.source+"></script></head><body></body>",!0)},editor:function(t){location.href="data:text/html, <html contenteditable>"+(t?t+"</html>":"</html>")},processList:[["Name (signature)","Author","Size"]],addProcess:function(t){t.update(),Essence.processList.push([t.name+" ("+t.sig+")",t.author,t.bitsize]),t.id=Essence.processList.length-1,Essence.processSize+=t.bitsize},processSize:0,serverList:[["Name","Author","Maximum size"]],addServer:function(t){t.update(),Essence.serverList.push([t.name,t.author,t.maxsize]),Essence.serverSize+=t.maxsize},serverSize:0,toString:function(){return"[object Essence]"},txt2print:"",addToPrinter:function(t,e){t.indexOf("\r\n")>-1?this.print(t,e):this.txt2print+=t},print:function(t,e){for(this.txt2print+=t,this.txt2print=this.txt2print.split("\b"),i=0;i<this.txt2print.length;i++)this.say(this.txt2print[i],e)
this.txt2print=""},preInit:function(){t1=1e3*t1.getSeconds()+t1.getMilliseconds()},init:function(){t2=new Date,t2=1e3*t2.getSeconds()+t2.getMilliseconds(),t=t2-t1>1e3?(t2-t1)/1e3+"s":t2-t1+"ms",Essence.say("Page loaded in "+t,"succ")}},t1=new Date,t2=0,t,$e=function(t){return new Element(t)}
Object.prototype.hasName=function(){return void 0!==this.name||void 0!==this.title},Object.prototype.getName=function(){return void 0!==this.name?this.name:this.title},Object.prototype.count=function(t){var e=0
for(i=0;i<this.length;i++)this[i]===t&&e++
return e},Object.prototype.positions=function(t){var e=[]
for(i=0;i<this.length;i++)this[i]===t&&e.push(i)
return e},Object.prototype.isIterable=function(){return isType(this,"String")||isType(this,"Array")||isType(this,"Object")},Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.lastIndex=function(){return this.length-1},Array.prototype.midIndex=function(t){return t?Math.floor(this.length/2)-1:Math.floor(this.length/2)},Array.prototype.even=function(){var t=[]
for(i=0;i<this.length;i+=2)t.push(this[i])
return t},Array.prototype.odd=function(){var t=[]
for(i=1;i<this.length;i+=2)t.push(this[i])
return t},Array.prototype.max=function(t,e){var r=this[t||0]
if(!t&&!e||0==t&&e>=this.length-1)for(i=1;i<this.length;i++)r=Math.max(r,this[i])
else if(t&&!e)for(i=t+1;i<this.length;i++)r=Math.max(r,this[i])
else for(i=t+1;i<=e;i++)r=Math.max(r,this[i])
return r},Array.prototype.median=function(){var t=this.sort(function(t,e){return t-e}),e=Math.floor(t.length/2)
return t.length%2?t[e]:(t[e-1]+t[e])/2},Array.prototype.min=function(t,e){var r=this[t||0]
if(!t&&!e||0==t&&e>=this.length-1)for(i=1;i<this.length;i++)r=Math.min(r,this[i])
else if(t&&!e)for(i=t+1;i<this.length;i++)r=Math.min(r,this[i])
else for(i=t+1;i<=e;i++)r=Math.min(r,this[i])
return r},Array.prototype.shuffle=function(t){for(i=0;i<(t||this.length);i++)swap(this,randTo(this.length-1),randTo(this.length-1))},Array.prototype.maxLength=function(){var t=0
for(i=0;i<this.length;i++)t=Math.max(t,this[i].length)
return t},Array.prototype.minLength=function(){var t=this[0].length
for(i=0;i<this.length;i++)t=Math.min(t,this[i].length)
return t},Array.prototype.Fill2D=function(t){return this.fill(new Array(this.length).fill(t))},Array.prototype.all=function(t){var e=t(this[0])
for(i=1;i<this.length;i++)e=e&&t(this[i])
return e},Array.prototype.remove=function(t){if(str=this,!isArray(t)){for(i=0;i<str.length;i++)str[i]===t&&(str=str.slice(0,i).concat(str.slice(i+1,str.length)))
if(str=str.map(function(e){return e===t?void 0:e}),-1!=str.indexOf(void 0)&&str.length>0){var e=[]
for(i=0;i<str.length;i++)void 0!==str[i]&&e.push(isType(str[i],"Number")?parseFloat(str[i]):str[i])
str=e}return str}for(i=0;i<t.length;i++)str=str.remove(t[i])},Array.prototype.debug=function(){for(Essence.say("Debugging the following array: "+this),i=0;i<this.length;i++)Essence.say(i+": "+this[i])},Array.prototype.getOccurences=function(){var t=rmDuplicates(this),e=[]
for(i=0;i<t.length;i++)e.push(t[i]+":"+this.count(t[i])+"["+this.positions(t[i]).toStr(!0)+"]"),Essence.say(t[i]+": "+this.positions(t[i]).toStr(!0))
return e},Array.prototype.replace=function(t,e,r){for(i=0;i<this.length;i++)this[i]==t&&(this[i]=e)},Array.prototype.sum=function(t,e){var r=0
if(!t&&!e||0==t&&e>=this.length-1)for(i=0;i<this.length;i++)r+=this[i]
else if(t&&!e)for(i=t;i<this.length;i++)r+=this[i]
else for(i=t;i<=e;i++)r+=this[i]
return r},Array.prototype.prod=function(t,e){var r=0
if(!t&&!e||0==t&&e>=this.length-1)for(i=0;i<this.length;i++)r*=this[i]
else if(t&&!e)for(i=t;i<this.length;i++)r*=this[i]
else for(i=t;i<=e;i++)r*=this[i]
return r},Array.prototype.sum2d=function(t,e){var r=0
if(!t&&!e||0==t&&e>=this.length-1)for(i=0;i<this.length;i++)for(j=0;j<this[i].length;j++)r+=this[i][j]
else if(t&&!e)for(i=t[0];i<this.length;i++)for(j=t[1];j<this[i].length;j++)r+=this[i][j]
else for(i=t[0];i<e[0];i++)for(j=t[1];j<e[1];j++)r+=this[i][j]
return r},Array.prototype.mean=function(t,e,i){e||(e=0),i||(i=this.lastIndex())
var r=this.sum(e,i)
return(r/(this.length-e)).toNDec(t)+0},Array.prototype.avg=function(t,e,i){e||(e=0),i||(i=this.lastIndex())
var r=this.sum(e,i)-this.slice(e,i+1).max()-this.slice(e,i+1).min()
return(r/(this.length-2-e)).toNDec(t)+0},Array.prototype.variance=function(t){var e=Math.pow(this.mean(t),2),i=sumPow2(this,t),r=this.length
return(i/r-e).toNDec(t)},Array.prototype.stddev=function(t){var e=Math.sqrt(this.variance(t))
return e.toNDec(t)},Array.prototype.rand=function(){return this[Math.floor(randTo(this.length-1)%this.length)]},Array.prototype.quartile=function(t,e){return this.length%2==0?((this[Math.floor(t*this.length/4)-1]+this[Math.floor(t*this.length/4)])/2).toNDec(e):values[Math.floor(t*values.length/4)].toNDec(e)},Array.prototype.quintile=function(t,e){return this.length%2==0?((this[Math.floor(t*this.length/5)-1]+this[Math.floor(t*this.length/5)])/2).toNDec(e):values[Math.floor(t*values.length/5)].toNDec(e)},Array.prototype.decile=function(t,e){return this.length%2==0?((this[Math.floor(t*this.length/10)-1]+this[Math.floor(t*this.length/10)])/2).toNDec(e):values[Math.floor(t*values.length/10)].toNDec(e)},Array.prototype.percentile=function(t,e){return this.length%2==0?((this[Math.floor(t*this.length/100)-1]+this[Math.floor(t*this.length/100)])/2).toNDec(e):values[Math.floor(t*values.length/100)].toNDec(e)},Array.prototype.getIncrement=function(t){return 0==t?parseInt((this.max()-this.min())/(this.length-1)):((this.max()-this.min())/(this.length-1)).toNDec(t)},Array.prototype.increment=function(t){for(i=0;i<this.length;i++)this[i]+=t||1},Array.prototype.iqr=function(t){return this.quartile(3,t)-this.quartile(1,t).toNDec(t)},Array.prototype.get=function(t,e){var r=[]
for(0>e&&(e=this.length-e),i=t;i<=(e||this.length-1);i++)r.push(this[i])
return r.remove()},Array.prototype.quickSort=function(t,e){t||e||(t=0,e=this.lastIndex())
var i
if(this.length>1){var r=this[Math.floor((e+t)/2)],s=e
for(i=t;s>=i;){for(;this[i]<r;)i++
for(;this[s]>r;)s--
s>=i&&(swap(this,i,s),i++,s--)}i-1>t&&this.quickSort(t,i-1),e>i&&this.quickSort(i,e)}return this},Array.prototype.revSort=function(t,e){t||e||(t=0,e=this.lastIndex())
var i
if(this.length>1){var r=this[Math.floor((e+t)/2)],s=e
for(i=t;s>=i;){for(;this[i]>r;)i++
for(;this[s]<r;)s--
s>=i&&(swap(this,i,s),i++,s--)}t>i-1&&this.revSort(t,i-1),i>e&&this.revSort(i,e)}return this},Array.prototype.bubbleSort=function(t){var e=this,r=1,s=!0
if(isNon(t)||isType(t,"string")&&"a"==t[0].toLowerCase())for(;s;){for(s=!1,i=0;i<=e.length-r;i++)e[i]>e[i+1]&&(e=swap(e,i,i+1),s=!0),i<e.length-(r+1)&&(e[i]>e[i+2]&&(e=swap(e,i,i+2)),e[i+1]>e[i+2]&&(e=swap(e,i+1,i+2),s=!0)),i<e.length-(r+2)&&(e[i]>e[i+3]&&(e=swap(e,i,i+3)),e[i+1]>e[i+3]&&(e=swap(e,i+1,i+3)))
r++}else if(1==t||isType(t,"string")&&"d"==t[0].toLowerCase())for(;s;){for(s=!1,i=0;i<=e.length-r;i++)e[i]<e[i+1]&&(e=swap(e,i,i+1),s=!0),i<e.length-(r+1)&&(e[i]<e[i+2]&&(e=swap(e,i,i+2)),e[i+1]<e[i+2]&&(e=swap(e,i+1,i+2),s=!0)),i<e.length-(r+2)&&(e[i]<e[i+3]&&(e=swap(e,i,i+3)),e[i+1]<e[i+3]&&(e=swap(e,i+1,i+3)))
r++}return e},Array.prototype.bruteForceSort=function(){for(i=0;i<this.length;i++){for(s=this[i],pos=i,j=i+1;j<=this.length;j++)s>this[j]&&(s=this[j],pos=j)
var t=this[i]
this[i]=s,this[pos]=t}return this},Array.prototype.maxSort=function(){var t=this.min(),e=this.median(),r=this.max(),s=new Array(this.length),n=this.getIncrement(3),o=this.quartile(1),a=this.quartile(3)
for(s[0]=t,s[s.length-1]=r,s.length%2!=0&&(s[s.length/2]=e,s[s.length/4]=o,s[3*s.length/4]=a),i=1;i<this.length-1;i++)this[i]==Math.floor(s[0]+i*n)?s[i]=this[i]:this[i]==Math.round(s[0]+i*n)?s[i]=this[i]:this[i]==Math.ceil(s[0]+i*n)?s[i]=this[i]:this[i]>=Math.floor(s[0]+i*n)&&this[i]<=Math.ceil(s[0]+i*n)&&(s[i]=this[i])
for(i=this.length-1;i>1;i--)this[i]==Math.floor(s[s.length-1]-i*n)&&isNon(s[i])?s[i]=this[i]:this[i]==Math.round(s[s.length-1]-i*n)&&isNon(s[i])?s[i]=this[i]:this[i]==Math.ceil(s[s.length-1]+i*n)&&isNon(s[i])?s[i]=this[i]:this[i]>=Math.floor(s[s.length-1]+i*n)&&this[i]<=Math.ceil(s[0]+i*n)&&isNon(s[i])&&(s[i]=this[i])
for(i=1;i<this.length-1;i++)for(j=0;j<this.length;j++)this[j]==Math.floor(s[0]+i*n)?s[i]=this[j]:this[j]==Math.round(s[0]+i*n)?s[i]=this[j]:this[j]==Math.ceil(s[0]+i*n)?s[i]=this[j]:this[j]>=Math.floor(s[0]+i*n)&&this[j]<=Math.ceil(s[0]+i*n)&&(s[i]=this[j])
return s},Array.prototype.cenSort=function(t,e){var i=new Array(this.length)
if(t||e||(t=Math.floor(this.length/2),right=Math.ceil(this.length/2)),!(this.length<=1)){for(var r=this[Math.floor((e+t)/2)],s=e,n=t;s>=n;){for(;this[n]<r;)n--
for(;this[s]>r;)s++
n>=s&&(swap(this,n,s),n--,s++)}return t>n-1&&this.cenSort(t,n-1),n>e&&this.cenSort(n,e),i}},Array.prototype.spreadSort=function(){var t,e,i=this[this.midIndex()]
t=e=i},Array.prototype.setSort=function(){var t=[],e=this.length,r=[]
for(i=0;i<1e3;i++)t[i]=0
for(i=0;i<e;i++)t[this[i]]=1
for(i=0;i<1e3;i++)1==t[i]&&r.push(i)
return r},Array.prototype.clean=function(t){var e=[],r=0
for(i=0;i<this.length;i++)isNon(this[i])||(e[r++]=this[i])
return t?rmDuplicates(e).remove(void 0):e},Array.prototype.xclean=function(){return this.clean(!0).remove([void 0,"undefined",null,"null"])},Array.prototype.rot=function(t){var e
if(t%90!=0)throw new Error("The absolute degree of rotation must be either 90 or 180")
if(4==this.numElm()&&2==this.length)90==t?(e=this[0][0],this[0][0]=this[1][0],this[1][0]=this[1][1],this[1][1]=this[0][1],this[0][1]=e):-90==t?(e=this[0][0],this[0][0]=this[0][1],this[0][1]=this[1][1],this[1][1]=this[1][0],this[1][0]=e):180==Math.abs(t)&&(e=[this[0][0],this[0][1]],this[0][0]=this[1][1],this[1][1]=e[0],this[0][1]=this[1][0],this[1][0]=e[1])
else if(9==this.numElm()&&3==this.length)90==t?(e=[this[0][0],this[0][1]],this[0][0]=this[2][0],this[2][0]=this[2][2],this[2][2]=this[0][2],this[0][2]=e[0],this[0][1]=this[1][0],this[1][0]=this[2][1],this[2][1]=this[1][2],this[1][2]=e[1]):-90==t?(e=[this[0][0],this[0][1]],this[0][0]=this[0][2],this[0][2]=this[2][2],this[2][2]=this[2][0],this[2][0]=e[0],this[0][1]=this[1][2],this[1][2]=this[2][1],this[2][1]=this[1][0],this[1][0]=e[1]):180==Math.abs(t)&&(e=[this[0][0],this[0][1],this[0][2],this[1][0]],this[0][0]=this[2][2],this[2][2]=e[0],this[0][2]=this[2][0],this[2][0]=e[2],this[0][1]=this[2][1],this[2][1]=e[1],this[1][0]=this[1][2],this[1][2]=e[3])
else{if(16!=this.numElm()||4!=this.length)throw"Unsupported matrix. Please wait or contact the developer to add this matrix' support."
90==t?(e=[this[0][0],this[0][1]],this[0][0]=this[2][0],this[2][0]=this[2][2],this[2][2]=this[0][2],this[0][2]=e[0],this[0][1]=this[1][0],this[1][0]=this[2][1],this[2][1]=this[1][2],this[1][2]=e[1]):-90==t?(e=[this[0][0],this[0][1]],this[0][0]=this[0][2],this[0][2]=this[2][2],this[2][2]=this[2][0],this[2][0]=e[0],this[0][1]=this[1][2],this[1][2]=this[2][1],this[2][1]=this[1][0],this[1][0]=e[1]):180==Math.abs(t)&&(e=[this[0][0],this[0][1],this[0][2],this[1][0]],this[0][0]=this[2][2],this[2][2]=e[0],this[0][2]=this[2][0],this[2][0]=e[2],this[0][1]=this[2][1],this[2][1]=e[1],this[1][0]=this[1][2],this[1][2]=e[3])}return this},Array.prototype.numElm=function(){return this.toString().split(",").length},Array.prototype.size=function(t){return t?this.length+"x"+this.maxLength():[this.length,this.maxLength()]},Array.prototype.det=function(){var t=0
return 4==this.numElm()&&2==this.length?t=this[0][0]*this[1][1]-this[0][1]*this[1][0]:9==this.numElm()&&3==this.length?t=this[0][0]*(this[1][1]*this[2][2]-this[1][2]*this[2][1])-this[0][1]*(this[1][0]*this[2][2]-this[1][2]*this[2][0])+this[0][2]*(this[1][0]*this[2][1]-this[1][1]*this[2][0]):Essence.say("Unsupported matrix format","error"),t},Array.prototype.translate=function(){for(i=0;i<Math.round(this.length/2);i++)for(j=0;j<this[0].length;j++)if(!(1==i&&0==j&&this[0].length>2)){var t=this[i][j]
this[i][j]=this[j][i],this[j][i]=t}if("4x4"==this.size(!0)){var e=this[3][2]
this[3][2]=this[2][3],this[2][3]=e}return this},Array.prototype.lookFor=function(t){for(i=0;i<this.length;i++)if(this[i]==t)return i
return-1},Array.prototype.divide=function(t){var e=new Array(Math.round(this.length/t)).fill(""),r=0
for(i=0;i<e.length;i++)for(j=0;j<t;j++)e[i]+=this[r++]
return e},Array.prototype.getAdjoint=function(){var t=this.translate(),e=mkArray(this.length,2,Essence.eps)
return 4==t.numElm()&&2==t.length?(e[0]=[t[1][1],-t[1][0]],e[1]=[-t[0][1],t[0][1]]):9==t.numElm()&&3==t.length?(e[0]=[t[1][1]*t[2][2]-t[1][2]*t[2][1],-(t[1][0]*t[2][2]-t[1][2]*t[2][0]),t[1][0]*t[2][1]-t[1][1]*t[2][0]],e[1]=[-(t[0][1]*t[1][2]-t[0][2]*t[1][1]),t[0][0]*t[2][2]-t[0][2]*t[2][0],-(t[0][0]*t[2][1]-t[0][1]*t[2][0])],e[2]=[t[0][1]*t[1][2]-t[0][2]*t[1][1],-(t[0][0]*t[1][2]-t[0][2]*t[1][0]),t[0][0]*t[1][1]-t[0][1]*t[1][0]]):Essence.say("Unsupported matrix format","error"),e},Array.prototype.dotProd=function(t){var e=[]
for(i=0;i<this.length;i++)for(e[i]=[],j=0;j<this[i].length;j++)e[i][j]=t*this[i][j]
return e},Array.prototype.dotAdd=function(t){var e=[]
for(i=0;i<this.length;i++)for(e[i]=[],j=0;j<this[i].length;j++)e[i][j]=t+this[i][j]
return e},Array.prototype.dotSub=function(t,e){var r=[]
for(e=e.toLowerCase().remove(" "),i=0;i<this.length;i++)for(r[i]=[],j=0;j<this[i].length;j++)r[i][j]="a-b"==e?t-this[i][j]:this[i][j]-t
return r},Array.prototype.dotFrac=function(t,e){var r=[]
for(e=e.toLowerCase().remove(" "),i=0;i<this.length;i++)for(r[i]=[],j=0;j<this[i].length;j++)r[i][j]="a/b"==e?t/this[i][j]:this[i][j]/t
return r},Array.prototype.toStr=function(t){var e=""
if(is2dArray(this)){for(i in this)this.hasOwnProperty(i)&&(e+=t?this[i].join(", "):this[i].join(""))
return t?this.toStr().split("").join(", "):e}return this.join(t?", ":"")},Array.prototype.toInt=function(){var t=0
for(i in this)this.hasOwnProperty(i)&&(t+=this[i]*Math.pow(10,this.length-i-1))
return t},Array.prototype.inv=function(){return this.dotProd(1/this.det(),this.getAdjoint())},Array.prototype.mix=function(){var t=mixedRange(0,1,this.length-1),e=[]
for(i=0;i<this.length;i++)e[i]=this[t[i]]
return e},Array.prototype.append=function(t){for(i=0;i<t.length;i++)this.push(t[i])},Array.prototype.preppend=function(t){for(i=0;i<t.length;i++)this.unshift(t[i])},Array.prototype.unique=function(){var t=[]
for(i=0;i<this.length;i++)1===this.count(this[i])&&t.push(this[i])
return t},Array.prototype.to1d=function(t){var e=this
for(i=0;i<e.length;i++)e[i]=e[i].join(t||"")
return e},String.prototype.remove=function(t){var e=this
if(!isArray(t)){var r=e.split(t).map(function(e){return e===t?void 0:e}).join("")
return-1!=r.indexOf(void 0)?e.remove(void 0):r}for(i in t)e=e.remove(i)},String.prototype.toNDigits=function(t){var e=this
if(t=t||2,parseFloat(e)<Math.pow(10,t-1))for(;e.split(".")[0].length<t;)e="0"+e
return e},String.prototype.mix=function(t,e){seperator=isNon(t)?"":t,e=e?e:t
var r=mixedRange(0,1,this.length-1),s=this.split(seperator||""),n=[]
for(i=0;i<this.length;i++)n[i]=s[r[i]]
return n.join(e)},String.prototype.divide=function(t){var e=new Array(Math.round(this.length/t)).fill(""),r=0
for(i=0;i<e.length;i++)for(j=0;j<t;j++)e[i]+=this[r++]
return e},String.prototype.capitalize=function(t){var e=this.toString()
if(t){var r=e.split(" ")
for(i=0;i<r.length;i++)r[i]=r[i].capitalize()
return r.join(" ")}return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.sum=function(){var t=0
for(i=0;i<this.length;i++)t+=this.charCodeAt(i)
return t},String.prototype.prod=function(){var t=1
for(i=0;i<this.length;i++)t*=this.charCodeAt(i)
return t},String.prototype.mean=function(){var t=[]
for(i=0;i<this.length;i++)t[i]=this.charCodeAt(i)
return t.mean(2)},String.prototype.normal=function(){return this.toLowerCase().remove(" ")},String.prototype.getOccurences=function(){var t=rmDuplicates(this),e=[]
for(i in t)t.hasOwnProperty(i)&&(e.push(t[i]+":"+this.count(t[i])+"{"+this.positions(t[i]).toStr(!0)+"}"),Essence.say(t[i]+": "+this.positions(t[i]).toStr(!0)))
return e},String.prototype.chunk=function(t,e){return 0>e&&(e=this.split(" ").length-e),this.split(" ").get(parseInt(t),parseInt(e)).join(" ")},String.prototype.get=function(t,e){var r=""
for(0>e&&(e=this.length-e),i=t;i<=(e||this.length-1);i++)r+=this[i]
return r},Number.prototype.length=function(){if(-1!=(this+"").indexOf("."))return[parseInt((this+"").split(".")[0]).length(),parseInt((this+"").split(".")[1]).length()]
for(var t=0,e=this;0!=Math.floor(e);)e/=10,t++
return t},Number.prototype.toNDec=function(t){var e=Math.pow(10,t||2)
return t?Math.round(e*this)/e:this},Number.prototype.toNDigits=function(t){var e=this+""
if(t=t||2,parseFloat(e)<Math.pow(10,t-1))for(;e.split(".")[0].length<t;)e="0"+e
return e},Number.prototype.sign=function(t){return t?0>this?"-":this>0?"+":"":0>this?-1:this>0?1:0},Number.prototype.isPrime=function(t){for(i=2;i<t;i++)if(primeCheck(i,t))return!1
return!0},Number.prototype.clean=function(t){return 0==this?0:this>0&&"+"==this[0]?t?this.slice(1,this.length).toNDec(t):this.slice(1,this.length):"-"==this?this+1:"+"==this?1:t?this.toNDec(t):this},Number.prototype.toArr=function(){for(var t=new Array(this.length()),e=0,i=this;i>0;)t[e]=i%10,e++,i/=10
return i},Function.prototype.inheritsFrom=function(t){return t.constructor==Function?(this.prototype=new t,this.prototype.constructor=this,this.prototype.parent=t.prototype):(this.prototype=t,this.prototype.constructor=this,this.prototype.parent=t),this}
var sec2time=s2t=s2time,toSec=toS,fct=""
NTreeNode.inheritsFrom(TreeNode),SortedSet.inheritsFrom(Set),AABB.inheritsFrom(Shape),Circ.inheritsFrom(Shape),Pt.inheritsFrom(Shape),Line.inheritsFrom(Shape),Vector.inheritsFrom(Shape),Polygon.inheritsFrom(Shape)
var nav=navigator.appName.substring(0,3),ver=navigator.appVersion.substring(0,1),BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;e<t.length;e++){var i=t[e].string,r=t[e].prop
if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(r)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString)
if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"Android",identity:"HTC/Samsung/LG"},{string:navigator.userAgent,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]}
BrowserDetect.init()
var pos=0,img,src,size=0,delay=100,nb=-1,t1=0,t2=0,maxDelay=2e4
base64={},base64.PADCHAR="=",base64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64.getbyte64=function(t,e){var e=base64.ALPHA.indexOf(t.charAt(e))
if(-1==e)throw"Cannot decode base64"
return e},base64.decode=function(t){t+=""
var e,i,r,s=base64.getbyte64,n=t.length
if(0==n)return t
if(n%4!=0)throw"Cannot decode base64"
e=0,t.charAt(n-1)==base64.PADCHAR&&(e=1,t.charAt(n-2)==base64.PADCHAR&&(e=2),n-=4)
var o=[]
for(i=0;n>i;i+=4)r=s(t,i)<<18|s(t,i+1)<<12|s(t,i+2)<<6|s(t,i+3),o.push(String.fromCharCode(r>>16,r>>8&255,255&r))
switch(e){case 1:r=s(t,i)<<18|s(t,i+1)<<12|s(t,i+2)<<6,o.push(String.fromCharCode(r>>16,r>>8&255))
break
case 2:r=s(t,i)<<18|s(t,i+1)<<12,o.push(String.fromCharCode(r>>16))}return o.join("")},base64.getbyte=function(t,e){var i=t.charCodeAt(e)
if(i>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5"
return i},base64.encode=function(t){if(1!=arguments.length)throw"SyntaxError: Not enough arguments"
var e,i,r=base64.PADCHAR,s=base64.ALPHA,n=base64.getbyte,o=[]
t+=""
var a=t.length-t.length%3
if(0==t.length)return t
for(e=0;a>e;e+=3)i=n(t,e)<<16||n(t,e+1)<<8||n(t,e+2),o.push(s.charAt(i>>18)),o.push(s.charAt(i>>12&63)),o.push(s.charAt(i>>6&63)),o.push(s.charAt(63&i))
switch(t.length-a){case 1:i=n(t,e)<<16,o.push(s.charAt(i>>18)+s.charAt(i>>12&63)+r+r)
break
case 2:i=n(t,e)<<16||n(t,e+1)<<8,o.push(s.charAt(i>>18)+s.charAt(i>>12&63)+s.charAt(i>>6&63)+r)}return o.join("")}
var dnM=!1,oldTab="home"
