function toMaxSize(){try{if(clientWidth||ActiveX||ActiveXObject)window.resizeTo(clientWidth,clientHeight)
else if(client.Width)window.resizeTo(client.Width,client.Height)
else if(client.width)window.resizeTo(client.width,client.height)
else if(clientX)window.resizeTo(clientX,clientY)
else if(client.X)window.resizeTo(client.X,client.Y)
else if(client.x)window.resizeTo(client.x,client.y)
else if(screenWidth)window.resizeTo(screenWidth,screenHeight)
else if(screen.Width)window.resizeTo(screen.Width,screen.Height)
else if(screen.width)window.resizeTo(screen.width,screen.height)
else if(screenX)window.resizeTo(screenX,screenY)
else if(screen.X)window.resizeTo(screen.X,screen.Y)
else if(screen.x)window.resizeTo(screen.x,screen.y)
else if(deviceWidth)window.resizeTo(deviceWidth,deviceHeight)
else if(device.Width)window.resizeTo(device.Width,device.Height)
else if(device.width)window.resizeTo(device.width,device.height)
else if(deviceX)window.resizeTo(deviceX,deviceY)
else if(device.X)window.resizeTo(device.X,device.Y)
else if(device.x)window.resizeTo(device.x,device.y)
else if(pageWidth)window.resizeTo(pageWidth,pageHeight)
else if(page.Width)window.resizeTo(page.Width,page.Height)
else if(page.width)window.resizeTo(page.width,page.height)
else if(pageX)window.resizeTo(pageX,pageY)
else if(page.X)window.resizeTo(page.X,page.Y)
else if(page.x)window.resizeTo(page.x,page.y)
else if(windowWidth)window.resizeTo(windowWidth,windowHeight)
else if(window.Width)window.resizeTo(window.Width,window.Height)
else if(window.width)window.resizeTo(window.width,window.height)
else if(windowX)window.resizeTo(windowX,windowY)
else if(window.X)window.resizeTo(window.X,window.Y)
else if(window.x)window.resizeTo(window.x,window.y)
else if(monitorWidth)monitor.resizeTo(monitorWidth,monitorHeight)
else if(monitor.Width)monitor.resizeTo(monitor.Width,monitor.Height)
else if(monitor.width)monitor.resizeTo(monitor.width,monitor.height)
else if(monitorX)monitor.resizeTo(monitorX,monitorY)
else if(monitor.X)monitor.resizeTo(monitor.X,monitor.Y)
else if(monitor.x)monitor.resizeTo(monitor.x,monitor.y)
else if(frameWidth)frame.resizeTo(frameWidth,frameHeight)
else if(frame.Width)frame.resizeTo(frame.Width,frame.Height)
else if(frame.width)frame.resizeTo(frame.width,frame.height)
else if(frameX)frame.resizeTo(frameX,frameY)
else if(frame.X)frame.resizeTo(frame.X,frame.Y)
else{if(!frame.x)throw new Error("It's not possible to maximise the size or you need to do more researches.")
frame.resizeTo(frame.x,frame.y)}}catch(e){Essence.say("An error occurred when trying to maximise the size Because of %c"+e,"err","text-decoration: underline;")}}function getScreenDim(){return[screen.width,screen.height]}function getWinDim(){return[screen.availWidth,screen.availHeight]}function Colour(e,t,i,r){return this.constructor=function(e,t,i,r){isType(e,"Array")&&e.length>=3&&!t&&!i?(this.red=e[0],this.green=e[1],this.blue=e.last(),this.alpha=4===e.length?e[3]:255):t||i||!e||0==t||0==i?t||i||!e?t&&!i&&e?(this.red=this.green=this.blue=e,this.alpha=t):(this.red=e||0,this.green=t||0,this.blue=i||0,this.alpha=r||255):(this.red=e,this.green=0,this.blue=0,this.alpha=2===e.length?e[1]:255):(this.red=this.green=this.blue=e,this.alpha=2===e.length&&isType(e,"Array")?e[1]:255),this.hex="#"+conv(this.red,10,16).toNDigits()+conv(this.green,10,16).toNDigits()+conv(this.blue,10,16).toNDigits(),this.rgba="rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},this.constructor(e,t,i,r),this.update=function(){this.hex="#"+conv(this.red,10,16).toNDigits()+conv(this.green,10,16).toNDigits()+conv(this.blue,10,16).toNDigits(),this.rgba="rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},this.getRGBAPerc=function(){return"rgba("+markConv(this.red,255)+"%, "+markConv(this.green,255)+"%, "+markConv(this.blue,255)+"%, "+markConv(this.alpha,255)+"%)"},this.getMaxClr=function(){return Math.max(Math.max(this.red,t),i)},this.getMinClr=function(){return Math.min(Math.min(this.red,t),i)},this.negative=function(e){this.red=255-parseInt(this.red),this.green=255-parseInt(this.green),this.blue=255-parseInt(this.blue),e&&(this.alpha=255-parseInt(this.alpha)),this.update()},this.redNegative=function(){this.red=255-parseInt(this.red),this.update()},this.greenNegative=function(){this.green=255-parseInt(this.green),this.update()},this.blueNegative=function(){this.green=255-parseInt(this.green),this.update()},this.rand=function(e){return this.red=randTo(255),this.green=randTo(255),this.blue=randTo(255),this.update(),e?this.hex:this.rgba},this.toLocaleString=function(){return"Colour(rad="+this.red+", g="+this.green+", b="+this.blue+", a="+this.alpha+")"},this.toString=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},this.get=function(){return[this.red,this.green,this.blue,this.alpha]},this.increment=function(e){isNon(e)&&(e=63.75),this.blue+=e,this.blue>=255&&(this.blue-=255,this.green+=e),this.green>=255&&(this.green-=255,this.red+=e),this.update()},this}function hex2rgb(e,t){var i=function(e){return parseInt(e,16)},r=isType(e,"Array")?e.map(i):/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(e).get(1).map(i)
return t?r:"rgb("+r.join(", ")+")"}function rgb2hex(e,t){var i=isType(e,"Array")?e:clrToArr(e),r=function(e){return conv(e,10,16).toNDigits()}
return i=i.map(r),t?i:"#"+i.join("")}function rgb2hsl(e,t){var i,r,n,s=isType(e,"Array")?e:clrToArr(e),o=function(e){return 100*e+.5|0},h=s[0]/255,a=s[1]/255,l=s[2]/255,u=s.max(),d=s.min()
if(n=(u+d)/2,u===d)i=r=0
else{var c=u-d
switch(r=n>=.5?c/(2-c):c/(u+d),u){case h:i=(a-l)/c*60
break
case a:i=60*((l-h)/c+2)
break
case l:i=60*((h-a)/c+4)}i/=6}return t?[o(i),100*o(r),100*o(n)]:"hsl("+o(i)+", "+100*o(r)+"%, "+100*o(n)+"%)"}function hsl2rgb(e,t){var i,r,n,s=clrToArr(e),o=function(e){return(e-.5)/100|0},h=o(s[0]),a=o(s[1]),l=o(s[2])
if(0===a)i=r=n=1
else{var u=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},d=l<.5?l*(1+a):l+a-l*a,c=2*l-d
i=u(c,d,h+1/3),r=u(c,d,h),n=u(c,d,h-1/3)}var f=[i,r,n].map(function(e){return Math.min(Math.floor(256*e),255)})
return t?f:"rgb("+f.join(", ")+")"}function rgb2hsv(e,t){var i=isType(e,"Array")?e:clrToArr(e)
i=i.map(function(e){return e/255})
var n,s,o=i.max(),h=i.min(),a=o,l=o-h
if(s=0===o?0:l/o,o===h)n=0
else{switch(o){case r:n=(g-b)/l+(g<b?6:0)
break
case g:n=(b-r)/l+2
break
case b:n=(r-g)/l+4}n/=6}return t?[n,s,a]:"hsv("+n+", "+s+"%, "+a+"%)"}function hsv2rgb(e,t){var i,r,n,s=isType(e,"Array")?e:clrToArr(e),o=Math.floor(6*s[0]),h=6*s[0]-o,a=s[2]*(1-s[1]),l=s[2]*(1-h*s[1]),u=s[2]*(1-(1-h)*s[1])
switch(o%6){case 0:i=s[2],r=u,n=a
break
case 1:i=l,r=s[2],n=a
break
case 2:i=a,r=s[2],n=u
break
case 3:i=a,r=l,n=s[2]
break
case 4:i=u,r=a,n=s[2]
break
case 5:i=s[2],r=a,n=l}var d=[i,r,n].map(function(e){return 255*e})
return t?d:"rgb("+d.join(", ")+")"}function getColourType(e){if(!isValid(e,"colour"))throw new InvalidExpressionError(e+" isn't a colour!")
if(/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.test(e))return"hex"
var t=[e.replace(/^(rgb|hsl|hsv|hsb)\(([0-9]+,\s){2}([0-9]+)\)$/,"$1"),e.replace(/^(rgb|hsl|hsv|hsb)a\(([0-9]+,\s){3}((0|1|)\.[0-9]*)\)$/,"$1")]
return t[0]!=e?t[0]:t[1]!=e?t[1]:null}function negateColour(e,t,i){i=i?i[0].toLowerCase():"x"
var r=0===$e(e).css(t).indexOf("rgb(")?clrToArr($e(e).css(t)):hex2rgb($e(e).css(t),!0),n=new Colour
"rad"===i?(n.red=255-parseInt(r[0]),n.green=r[1],n.blue=r[2]):"g"===i?(n.red=r[0],n.green=255-parseInt(r[0]),n.blue=r[2]):"b"===i?(n.red=r[0],n.green=r[1],n.blue=255-parseInt(r[2])):"y"===i?(n.red=255-parseInt(r[0]),n.green=255-parseInt(r[1]),n.blue=r[2]):"c"===i?(n.red=r[0],n.green=255-parseInt(r[0]),n.blue=255-parseInt(r[2])):"m"===i?(n.red=255-parseInt(r[0]),n.green=r[1],n.blue=255-parseInt(r[2])):"a"===i||"f"===i||"width"===i?(n.red=255-parseInt(r[0]),n.green=255-parseInt(r[1]),n.blue=255-parseInt(r[2])):(n.red=r[0],n.green=r[1],n.blue=r[2]),n.update(),$e(e).setCSS(t,n.hex)}function colourName2Hex(e){switch(e.normal()){case"aqua":return"#00ffff"
case"cyan":return"#00ffff"
case"black":return"#000000"
case"blue":return"#0000ff"
case"fuchsia":return"#ff00ff"
case"magenta":return"#f800f8"
case"gray":return"#808080"
case"grey":return"#808080"
case"green":return"#008000"
case"lime":return"#00ff00"
case"brown":return"#800000"
case"maroon":return"#800000"
case"navy":return"#000080"
case"olive":return"#808000"
case"purple":return"#800080"
case"red":return"#ff0000"
case"silver":return"#c0c0c0"
case"teal":return"#008080"
case"white":return"#ffffff"
case"yellow":return"#ffff00"
case"gold":return"#ffd700"
case"seagreen":return"#2e8b57"
case"pink":return"#ffc0cb"
case"skyblue":return"#87ceeb"
case"coral":return"#ff7f50"
case"tan":return"#d2b48c"
case"orange":return"#ffa500"
case"cream":return"#feffff"
case"lightgray":return"#d3d3d3"
case"salmon":return"#fa8072"
default:return null}}function rgbList(e,t,i){var r=[]
isNon(e)&&(e=63.75)
for(var n=0;n<257;n+=e)for(var s=0;s<257;s+=e)for(var o=0;o<257;o+=e)i&&Essence.sayClr(t?[Math.round(n),Math.round(s),Math.round(o)]:[n,s,o]),r.push("rgb("+(t?[Math.round(n),Math.round(s),Math.round(o)].join(", "):[n,s,o].join(", "))+")")
return r}function Shape(e,t,i,r){return this.x=e||0,this.y=t||0,this.border=i||1,this.vel=r||new Vector,this.norm=this.vel.getNormal(),this.update=function(){this.x+=this.vel.x,this.y+=this.vel.y,this.norm=this.vel.getNormal()},this.stop=function(){this.vel=this.norm=new Vector},this.toString=function(){return"Shape(x = "+this.x+", y = "+this.y+", border = "+this.border+", velocity = "+this.vel+")"},this.offset=function(e){return"l"===e?this.x-1-this.border:"rad"===e?this.x+1+this.border:"u"===e?this.y-1-this.border:this.y+1+this.border},this.bounce=function(e){this.vel.reflect(e)},this.copy=function(){return new Shape(this.x,this.y,this.border,this.vel)},this.mult=function(e){return this.x*=e,this.y*=e,this},this.div=function(e){return this.x/=e,this.y/=e,this},this.add=function(e){return this.x+=e.x,this.y+=e.y,this},this.sub=function(e){return this.x-=e.x,this.y-=e.y,this},this.draw=function(){},this.getSpeed=function(){return Math.sqrt(Math.pow(this.vel.x,2)+Math.pow(this.vel.y,2))},this}function Box(e,t,i,r,n,s,o,h,a,l){this.x=e||0,this.y=t||0,this.z=i||0,this.width=r||10,this.height=n||10,this.depth=s||.1,this.borderSize=o||1,this.borderColor=h||"#000",this.borderRadius=l||0,this.color=a||"#fff",this.ratio=(this.height/this.width).toNDigits(),this.ratio3d=[this.ratio,this.height/non0(this.depth),this.width/non0(this.depth)].mean(4)
var u=this
return this.draw=function(){runCanvas(function(e){e.fillStyle=u.color,e.strokeStyle=u.borderColor,e.lineWidth=u.borderSize,e.fill(),e.stroke(),e.beginPath(),e.rect(u.x,u.y,u.width,u.height),e.closePath()})},this.erase=function(){runCanvas(function(e){e.clearRect(u.x-u.borderSize,u.y-u.borderSize,u.width+u.borderSize+1,u.height+u.borderSize+1)})},this.rot=function(e,t,i){runCanvas(function(t){t.rotate(e)})},this.translate=function(e,t){runCanvas(function(i){i.translate(e,t)})},this.toString=function(){return"Box(x="+this.x+", y="+this.y+", z="+this.z+", width="+this.width+", height="+this.height+", depth="+this.depth+", borderSize="+this.borderSize+", borderColor="+this.borderColor+", borderRadius="+this.borderRadius+", color="+this.color+")"},this}function AABB(e,t,i,r,n,s){this.x=e||0,this.y=t||this.x,this.width=i||10,this.height=r||this.width,this.border=n||1,this.vel=s||new Vector,this.ratio=this.height/this.width,this.norm=this.vel.getNormal()
var o=this
return this.getPoints=function(){return[new Pt(this.x,this.y),new Pt(this.x+this.width,this.y),new Pt(this.x+this.width,this.y+this.height),new Pt(this.x,this.y+this.height)]},this.equals=function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height&&this.border==e.border&&this.vel.equals(e.vel)},this.toString=function(){return"AABB(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+", velocity="+this.vel.toString()+", border="+this.border+")"},this.hit=function(e,t){return"l"===t?e.offset("l")<=this.width:"r"===t?e.offset("rad")>=this.x:"u"===t?e.offset("u")<=this.height:"d"===t?e.offset("d")>=this.y:this.hit(e,"l")||this.hit(e,"rad")||this.hit(e,"u")||this.hit(e,"d")},this.copy=function(){return new AABB(this.x,this.y,this.width,this.height,this.border,this.vel)},this.concat=function(e){this.width=e.x-this.x-this.width,this.height=e.y-this.y-this.height},this.deconcat=function(e){this.width=(e.x-this.x)/2,this.height=(e.y-this.y)/2},this.draw=function(){runCanvas(function(e){e.lineWidth=o.border,e.fill(),e.stroke(),e.beginPath(),e.rect(o.x,o.y,o.width,o.height),e.closePath()})},this.getPerimeter=function(){return 2*this.width+2*this.height},this.getArea=function(){return this.width*this.height},this.getDiag=function(){return Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))},this}function Circ(e,t,i,r,n){this.x=e||0,this.y=t||0,this.rad=i||10,this.border=r||1,this.vel=n||new Vector,this.norm=this.vel.getNormal()
var s=this
return this.offset=function(e){return"l"===e?this.x-this.rad:"r"===e?this.x+this.rad:"u"===e?this.y-this.rad:this.y+this.rad},this.equals=function(e){return this.x===e.x&&this.y===e.y&&this.rad===e.rad&&this.border===e.border&&this.vel.equals(e.vel)},this.toString=function(){return"Circ(x="+this.x+", y="+this.y+", radius="+this.rad+", velocity="+this.vel.toString()+")"},this.hit=function(e,t){return!!e.hit(this,t||"")&&(this.vel.bounce(e.norm),this.vel.update(),!0)},this.draw=function(){runCanvas(function(e){e.lineWidth=s.border,e.fill(),e.stroke(),e.beginPath(),e.arc(s.x,s.y,s.rad,0,2*Math.PI),e.closePath()})},this.getCircumference=function(){return 2*this.rad*Math.PI},this}function Pt(e,t){return this.x=e||0,this.y=t||0,this.vel=new Vector,this.equals=function(e){return this.x===e.x&&this.y===e.y},this.toString=function(){return"Pt(x="+this.x+", y="+this.y+")"},this}function Line(e,t){this.start=e,this.end=t
var i=this
return this.equals=function(e){return this.start.equals(e.start)&&this.end.equals(e.end)},this.toString=function(){return"Line(start="+this.start.toString()+", end="+this.end.toString()+")"},this.draw=function(){runCanvas(function(e){e.lineWidth=1,e.fill(),e.stroke(),e.beginPath(),e.lineTo(i.start.x,i.start.y),e.lineTo(i.end.x,i.end.y),e.closePath()})},this}function Vector(e,t){return this.prototype=Shape.prototype,this.x=e||0,this.y=t||0,this.toString=function(){return"Vector(x="+this.x+", y="+this.y+")"},this.equals=function(e){return this.x==e.x&&this.y==e.y},this.copy=function(){return new Vector(this.x,this.y)},this.normalise=function(){var e=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))
this.x/=e,this.y/=e},this.getNormal=function(){return new Vector(this.x/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)),this.y/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)))},this.zero=function(){return this.x=this.y=0,this},this.mult=function(e){return this.x*=e,this.y*=e,this},this.div=function(e){return this.x/=e,this.y/=e,this},this.addScalar=function(e){return this.x+=e,this.y+=e,this},this.add=function(e){return this.x+=e.x,this.y+=e.y,this},this.sub=function(e){return this.x-=e.x,this.y-=e.y,this},this.neg=function(){return this.x=-this.x,this.y=-this.y,this},this.dot=function(e){return this.x*e.x+this.y*e.y},this.cross=function(e){return this.x*e.y-this.y*e.x},this.lenSq=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},this.length=function(){return Math.sqrt(this.lenSq())},this.reflect=function(e){var t=e||this.getNormal().copy()
return t.mult(2*this.dot(e||this.getNormal())),this.sub(t),this},this.angle=function(e){return Math.acos((this.x*e.x+this.y*e.y)/(this.length()*e.length()))},this}function Polygon(e,t,i){this.points=e,this.border=t||1,this.vel=i||new Vector,this.norm=this.vel.getNormal()
var r=this
return this.equals=function(e){var t=!0
for(var i in this.points)this.points.hasOwnProperty(i)&&e.points.hasOwnProperty(i)&&(t=t&&this.points[i].equals(e.points[i]))
return t&&this.border===e.border&&this.vel.equals(e.vel)},this.toString=function(){var e="["
for(var t in this.points)this.points.hasOwnProperty(t)&&(e+=this.points[t].toString()+", ")
return e+="]","Polygon(points="+e+", velocity="+this.vel.toString()+", border="+this.border+")"},this.hit=function(e,t){return"l"===t?e.offset("l")<=this.offset("rad"):"rad"===t?e.offset("rad")>=this.offset("l"):"u"===t?e.offset("u")<=this.offset("d"):"d"===t?e.offset("d")>=this.offset("u"):this.hit(e,"l")||this.hit(e,"rad")||this.hit(e,"u")||this.hit(e,"d")},this.copy=function(){return new Polygon(this.points,this.border,this.vel)},this.draw=function(){runCanvas(function(e){e.lineWidth=1,e.fill(),e.stroke(),e.beginPath(),r.points.map(function(t){e.lineTo(t.x,t.y)}),e.closePath()})},this}function msgBox(e,t,i,r,n,s){e=e.normal()
var o={borderColor:"#bababa",borderSize:"1px",borderRadius:5,backgroundColor:"#fbfbfb",textColor:"#000",textSize:"14px",textFont:"Calibrie",buttonBorderColor:"#aaa",buttonBorderSize:.8,buttonBorderRadius:5,buttonColor:"#ccc",buttonTextColor:"#000",buttonTextSize:"14px",buttonText:"OK"},h="",a=""
"info"===e?(h="img/info.png",a="i",o.borderColor="#088",o.backgroundColor="rgba(0,255,255,1)",console.info("[Essence.js] "+t+": "+i)):"error"===e?(h="img/error.png",a="x",o.borderColor="#800",o.backgroundColor="rgba(255,0,0,1)",o.textColor="#FFF",console.error("[Essence.js] "+t+": "+i)):"warning"===e?(h="img/warning.png",a="/!\\",o.borderColor="#840",o.backgroundColor="rgba(255,127,0,1)",o.textColor="#FFF",o.buttonText="Got it",console.warn("[Essence.js] "+t+": "+i)):"question"===e?(h="img/question.png",a="?",o.borderColor="#008",o.backgroundColor="rgba(0,0,255,1)",o.textColor="#FFF",o.buttonText="Continue",console.log("[Essence.js] "+t+": "+i+" ?")):"success"===e?(h="img/success.png",a="v/",o.borderColor="#080",o.backgroundColor="rgba(0,255,0,1)",o.textColor="#FFF",o.buttonText="OK",console.log("[Essence.js] "+t+": "+i)):"load"===e?(h="img/load.gif",a="o",o.borderColor="#888",o.backgroundColor="rgba(255,255,255,1)",o.textColor="#FFF",o.buttonText="Continue",console.log("[Essence.js] "+t+": "+i+"...")):"custom"===e?(h=s,a=" ",n.borderColor&&(o.borderColor=n.borderColor),n.borderSize&&(o.borderSize=n.borderSize),n.borderRadius&&(o.borderRadius=n.borderRadius),n.backgroundColor&&(o.backgroundColor=n.backgroundColor),n.textColor&&(o.textColor=n.textColor),n.textSize&&(o.textSize=n.textSize),n.textFont&&(o.textFont=n.textFont),n.buttonBorderColor&&(o.buttonBorderColor=n.buttonBorderColor),n.buttonBorderSize&&(o.buttonBorderSize=n.buttonBorderSize),n.buttonBorderRadius&&(o.buttonBorderRadius=n.buttonBorderRadius),n.buttonColor&&(o.buttonColor=n.buttonColor),n.buttonTextColor&&(o.buttonTextColor=n.buttonTextColor),n.buttonTextSize&&(o.buttonTextSize=n.buttonTextSize),n.buttonText&&(o.buttonText=n.buttonText),console.log("[Essence.js] "+t+": "+i)):h=!1
var l=document.createElement("div"),u=document.createElement("span"),d=document.createElement("p"),c=document.createElement("input"),f="<img src = "+h+" alt = '"+a+"' />"
l.id="overlay",u.id="msgBoxHeader",d.id="msg",c.id="msgBoxBtn",c.type="button",c.value=o.buttonText,f.id="msgImg",r?(u.innerHTML=t,d.innerHTML=i):(u.innerText=t,d.innerText=i),$e("#overlay").isEmpty()&&(Essence.handleError("The #overlay element is voided","essence.js",1336),$e("#overlay").write("<div id = 'overlay'></div>",!0),$n("#overlay")||document.body.appendChild(document.createElement("div").id="overlay")),$e("#overlay").setStyles(["visibility","hidden","position","absolute","left",0,"top",0,"width","100 % ","height","100 % ","text-align","center","z-index","1000","background","rgba(127,127,127,.5)"]),$e("div#overlay").setStyles(["width","300px","margin","100px auto","background",o.backgroundColor,"border",o.borderSize+" solid "+o.borderColor,"padding","15px","textAlign","center","boxShadow","3px 3px 3px #333","borderRadius",o.borderRadius]),$e("#msgBoxHeader").setStyles(["fontSize",parseInt(o.textSize+2)+"px","fontFamily",o.textFont,"color",o.textColor]),$e("#msg").setStyles(["fontSize",o.textSize,"fontFamily",o.textFont,"color",o.textColor]),$e("#btnBoxBtn").setStyles(["border",o.buttonBorderSize+" solid "+o.buttonBorderColor,"color",o.buttonTextColor,"fontSize",o.buttonTextSize]),$e("#msgImg").setStyles(["position","","top","2 % ","left","2 % "]),l.appendChild(u),l.appendChild(f),l.appendChild(d),l.appendChild(c),document.body.appendChild(l),c.onClick=function(){document.body.removeChild(l)}}function linearGradient(e,t,i){var r=parseInt(conv(e,16)),n=parseInt(conv(t,16))
i=parseInt(i)||10
for(var s=[],o=(n-r)/(i-1),h=0;h<i;h++)s.push(conv(r+h*o,10,16))
return s}function radialGradient(e,t,i){var r
parseInt(conv(e,16)),parseInt(conv(t,16))
return i=parseInt(i)||10,r}function getLuminance(e,t,i){return.299*(e||0)+.587*(t||0)+.114*(i||0)}function isDark(e){var t=clrToArr(e)
return"rgb"!=getColourType(e)&&(t=window[getColourType(e)+"2rgb"](t,!0)),getLuminance(t[0],t[1],t[2])<128}function daynightMode(e){var t=(new Date).getHours(),i=function(){return rmDuplicates(DomTree().getOrder().split("->"))}
if(e&&($G.dnM=!$G.dnM),$G.dnM){var r=i().map(function(e){return $e("*"+e)}),n=t>=20||t<=3
Essence.say((n?"It's dark":"It's light")+"!","info")
for(var s=0;s<r.length;s++)isNon(r[s].css("backgroundColor"))&&r[s].setCSS("backgroundColor","#FFF"),console.log("backgroundColor of "+r[s].selector+"="+r[s].css("backgroundColor"))}else Essence.say("You cannot use the day/night mod if it's disabled.","warn")}function chTab(e){$e("#tab_"+$G.oldTab).rmClass("tabOn"),$e("#tab_"+$G.oldTab).addClass("tabOff"),$e("#tab_"+e).rmClass("tabOff"),$e("#tab_"+e).addClass("tabOn"),$e("#contentTab_"+$G.oldTab).setCSS("display","none"),$e("#contentTab_"+e).setCSS("display","block"),$G.oldTab=e}function moveHTMLRange(e,t){$e("#"+e).write(parseFloat($e("#"+e).val())+(t||1)),$e("#"+e+"_val").write($e("#"+e).val())}function htmlRange(e,t,i,r){if(!e)throw new Error("htmlRange needs to know the id of the element implementing the range")
return Essence.addCSS(".arrow{cursor: pointer;font-size: 20px;vertical-align: middle}"),'<b class="arrow" onClick="moveHTMLRange(\''+e+'\', -1)">&triangleleft;</b><input type="range" value='+(i||0)+" max="+(r||100)+" min="+(t||0)+' id="'+e+'" onChange="$e(\'#'+e+'_val\').write(this.value);" /><b class="arrow" onClick="moveHTMLRange(\''+e+'\', 1)">&triangleright;</b><span id="'+e+'_val">'+(i||"")+"</span>"}function labelFieldSwap(e,t){$e("#lbl_"+e).isEmpty()&&$e("#lbl_"+e).write("&ensp;",!0),$e("#"+e).isEmpty()||"\b"===$e("#"+e).val()||$e("#"+e).val()!=t&&$e("#"+e).size()<2?($e("#"+e).write($e("#lbl_"+e).val()),$e("#lbl_"+e).write("&ensp;",!0)):($e("#lbl_"+e).write(t||$e("#"+e).val()),$e("#"+e).val()!==t&&""!==$e("#"+e).val()||$e("#"+e).write("\b"))}function labelPwSwap(e,t){$e("#lbl_"+e).isEmpty()&&$e("#lbl_"+e).write("&ensp;",!0),$e("#"+e).isEmpty()||"\b"===$e("#"+e).val()||$e("#"+e).val()!=t&&$e("#"+e).size()<2?($e("#"+e).type="text",$e("#"+e).write($e("#lbl_"+e).val()),$e("#lbl_"+e).write("&ensp;",!0)):($e("#"+e).type="password",$e("#lbl_"+e).write(t||$e("#"+e).val()),$e("#"+e).val()!==t&&""!==$e("#"+e).val()||$e("#"+e).write("\b"))}function htmlInput(e,t,i){if(!e)throw new Error("htmlInput needs to know the id of the element implementing the input")
return i||(i=t||e),"<label for='"+e+"' id='lbl_"+e+"'>&ensp;</label><br /><input type='"+(t||"text")+"' id='"+e+"' value='"+i+"' onFocus='labelFieldSwap(\""+e+'", "'+i+"\")' onBlur='labelFieldSwap(\""+e+'", "'+i+"\")' />"}function htmlPassword(e,t){if(!e)throw new Error("htmlPassword needs to know the id of the element implementing the input")
return t||(t=e),"<label for='"+e+"' id='lbl_"+e+"'>&ensp;</label><br /><input type='text' id='"+e+"' value='"+t+"' onFocus='labelPwSwap(\""+e+'", "'+t+"\")' onBlur='labelPwSwap(\""+e+'", "'+t+"\")' />"}function htmlDate(e,t,i){for(var r="<select name='"+(e?e+"_":"")+"day'>",n="<select name='"+(e?e+"_":"")+"month'>",s="<select name='"+(e?e+"_":"")+"year'>",o=["January","February","March","April","May","June","July","August","September","October","November","December"],h=(new Date).getFullYear(),a=1;a<32;a++)r+="<option value="+a+">"+a+"</option>"
for(a=0;a<o.length;a++)n+="<option value="+(a+1)+">"+o[a]+"</option>"
for(a=t||h-80;a<(i||h-2);a++)s+="<option value="+a+">"+a+"</option>"
return r+"</select>"+n+"</select>"+s+"</select>"}function initCanvas(e,t){e||(e=500),t||(t=500),null===$n("canvas#essenceCanvas",!0)?print("<canvas id='essenceCanvas' width='"+e+"' height='"+t+"'>Canvas isn't supported by this browser</canvas>",!0):($n("canvas#essenceCanvas").width=e,$n("canvas#essenceCanvas").height=t)}function runCanvas(e,t,i){i||(i=0),e($n("canvas#essenceCanvas").getContext(t||"2d")),i<1&&runCanvas(e,t,i+1)}function clrToArr(e){return"hex"===getColourType(e)?e.get(1).divide((e.length-1)/3):e.get(e.indexOf("(")+1,-1).split(", ")}function syncCSS(){var e=document.styleSheets.toArray()
for(var t in e)if(e.hasOwnProperty(t)){var i=(document.all?e[t].rules:e[t].cssRules).toArray(),r=i.map(function(e){return $n(e.selectorText,!0)?$e("*"===e.selectorText?"html":e.selectorText).setStyles(e.style.cssText.split(";").map(function(e){return e.split(":")}).linearise()):debugging&&console.log("No need to implement rule: "+e.cssText),e.selectorText+" {\n\t"+e.style.cssText+"\n}"})
console.info("Rules of %s:\n%s",e[t],r.join("\n"))}}function addCSSRule(e,t,i,r){i||(i=document.styleSheets[0])
var n=document.all?i.rules:i.cssRules
r||(r=n.length-1),debugging&&console.info("Adding %s {%s} into %s",e,t,i)
for(var s=r;s>0;s--)n[s].selectorText===e&&(t=n[s].style.cssText+t,i.deleteRule(s),r=s)
return"insertRule"in i?i.insertRule(e+"{"+t+"}",r):"addRule"in i&&i.addRule(e,t,r),n[r].cssText}function clearCSSRules(e){e||(e=document.styleSheets[0])
for(var t=(document.all?e.rules:e.cssRules).length-1;t>=0;)"deleteRule"in e?e.deleteRule(t):"removeRule"in e&&e.removeRule(t),t--}function findCSSRules(e){var t=document.styleSheets.toArray()
for(var i in t)if(t.hasOwnProperty(i))for(var r=document.all?t[i].rules:t[i].cssRules,n=[],s=0;s<r.length;s++)console.log("seeing "+r[s].selectorText+" in sheet "+i),r[s].selectorText===e&&n.push(r[s].style.cssText)
return n}function getCSS(e){var t=document.styleSheets.toArray(),i=[]
for(var r in t)if(t.hasOwnProperty(r)){var n=(document.all?t[r].rules:t[r].cssRules).toArray()
i.push(n.map(function(e){return e.selectorText+" {\n\t"+e.style.cssText+"\n}"}).join("\n"))}return e?i:i.join("\n")}var UI=new Module("UI","UI stuff",["Maths","DOM","QTest"])
AABB.inheritsFrom(Shape),Circ.inheritsFrom(Shape),Pt.inheritsFrom(Shape),Line.inheritsFrom(Shape),Vector.inheritsFrom(Shape),Polygon.inheritsFrom(Shape),$G.dnM=!1,$G.oldTab="home"
