/**
 * @module Misc
 * @description Miscellaneous stuff
 * @version 1.0
 * @since 1.1
 * @license MIT
 * @author Maximilian Berkmann <maxieberkmann@gmail.com>
 * @copyright Maximilian Berkmann 2016
 * @requires ../essence
 * @requires Files
 * @namespace
 * @type {{name: string, version: number, run: Misc.run, description: string, dependency: Array, author: string, complete: boolean}}
 * @since 1.1
 * @exports Misc
 */
function asciiTable(t,e){"A-Z"!==t||e?"a-z"!==t||e?"A-z"!==t||e?"printable"!==t||e||(t=32,e=126):(t=65,e=122):(t=97,e=122):(t=65,e=90),t||(t=0),e||(e=255)
for(var r=[],s=t;e>=s;s++)r.push(String.fromCharCode(s))
return r}function Person(t,e,r,s,n,a,i,o,c,h,u,g,y,l){return this.firstName=t||"",this.secondName=e||"",this.lastName=r||"",this.title=s||"",this.nickname=n||"",this.phoneNum=a||"none",this.country=i||"",this.city=o||"",this.sex="male"===c.toLowerCase()||"female"===c.toLowerCase()?c:"other",this.birthday=h||"01/01/2000",this.deathday=null,this.jobs=u||"unemployed",this.activities=g||"none",this.websites=y||"none",this.quote=l||"",this.toString=function(){var t="Person("
for(var e in this)this.hasOwnProperty(e)&&"toString"!=e&&(t+=e+"="+this[e]+", ")
return t.substring(0,t.length-2)+")"},this.genID=function(){return(this.lastName.get(0,3)+this.birthday.split("/")[1]+this.firstName.get(0,1)+this.secondName.get(0,1)+this.birthday.split("/")[2]+this.sex[0]).toUpperCase()},this.getAge=function(){return(date2num(getDate())-date2num(this.birthday)).toNDec(2)},this.isMajor=function(){return("UN"===this.country.get(0,1)||"united states"===this.country.toLowerCase())&&this.getAge()>20||("UN"!=this.country.get(0,1)||"united states"!=this.country.toLowerCase())&&this.getAge()>17},this.getFullName=function(){return this.firstName+" "+this.secondName+(""!=this.nickname?' "'+this.nickname+'" ':" ")+this.lastName},this}function Item(t,e,r,s,n){return this.name=t||"unknown",this.category=e||"unknown",this.price=r||0,this.ageMinRequired=s||.25,this.quantity=n||1,this.firstMade=(new Date).toLocaleString(),this.dublicate=function(t,e){for(var r=0;t>r;r++)e.push(new Item(this.name,this.category,this.price,this.ageMinRequired,this.quantity))},this.remove=function(t){t.remove(this)},this.toString=function(){var t=""
for(var e in this)this.hasOwnProperty(e)&&"toString"!=e&&!isType(e,"function")&&(t+=e+"="+this[e]+", ")
return t.substring(0,t.length-2)},this}function letterArray(t,e){for(var r=t.charCodeAt(0)||97,s=e.charCodeAt(0)||122,n=[],a="",i=r;s>=i;i++)for(var o=r;s>=o;o++)i!=o&&(a=String.fromCharCode(i)+String.fromCharCode(o),n.push(a))
return n}function rmConsecDuplicates(t){for(var e=[],r=0,s=0;s<t.length;s++)0!==s&&t[s]==t[s-1]||(e[r++]=t[s])
for(r=0,s=0;s<t.length-1;s++)t[s]!=t[s+1]&&(e[r++]=t[s])
return e}function rmDuplicates(t){for(var e=rmConsecDuplicates(t),r=0,s=0;s<t.length;s++)(0===s||t[s]!=t[s-1]||s>=1&&t[s]!=t[s-2]||s>=2&&t[s]!=t[s-3])&&(e[r++]=t[s])
for(s=0;s<e.length;s++)for(r=0;r<e.length;r++)s!=r&&e[s]===e[r]&&(e[r]=void 0)
return e.remove(void 0)}function Machine(t,e,r,s){switch(this.capacity=r||1024,this.version=e||5,this.name=t||"Machine_"+this.version,this.version){case 1:this.base=2
break
case 2:this.base=3
break
case 3:this.base=8
break
case 4:this.base=10
break
case 5:this.base=16
break
case 6:this.base=36
break
default:this.base=16}return this.operation=function(t,e,r){switch(r.normal()){case"+":return t+e
case"-":return t-e
case"*":return t*e
case"/":return t/e
case"%":return t%e
case">>":return t>>e
case"<<":return t<<e
case">>>":return t>>>e
case">":return t>e
case"<":return e>t
case"|":return t|e
case"&":return t&e
case"^":return t^e
case"=":return t===e
case"!=":return t!=e
case">=":return t>=e
case"<=":return e>=t
case"||":return t||e
case"&&":return t&&e
case"e":return t*Math.pow(10,e)
case"e^":case"exp":return[Math.exp(t),Math.exp(e)]
case"log":return log(t,e)
case"++":return[t++,e++]
case"--":return[t--,e--]
case"+=":return t+=e
case"-=":return t-=e
case"*=":return t*=e
case"/=":return t/=e
case"%=":return t%=e
case".=":return t.concat(e)
default:return t+""+e}},this.inv=function(t){isType(t,"String")||(t+="")
for(var e=0;e<t.length;e++)t[e]=parseInt(this.base)-1-parseFloat(t[e])
return t},this.memory=new Memory(this.capacity,s||"",this.name),this.send=function(t,e){POST(e,"msg="+this.parse(t))},this.parse=function(t){isType(t,"Array")||(t=2===this.base?t.divide(8):t.divide(2))
for(var e="",r=[],s=0;s<t.length;s++)r[s]=conv(t[s],this.base),e+=String.fromCharCode(conv(t[s],this.base))
return Essence.say(r),JSON.parse(e)},this.unparse=function(t,e){for(var r=JSON.stringify(t),s="",n=[],a=0;a<r.length;a++)n[a]=r.charCodeAt(a),s+=2===this.base?conv(r.charCodeAt(a).toNDigits(8),10,this.base):conv(r.charCodeAt(a),10,this.base)
return e?s:2===this.base?s.divide(8):s.divide(2)},this.store=function(t){this.memory.add(this.unparse(t)),this.memory.save()},this.show=function(){for(var t=0;t<this.memory.slots.length;t++)Essence.say(this.memory.slots[t])},this.specs=function(){return"Name: "+this.name+"\nCapacity: "+this.capacity+" bits\nMemory: \n"+this.memory.toString()},this.toString=function(){return"Machine("+this.specs()+")"},this.conv=function(t,e){return conv(t,e||36,this.base)},this}function Memory(t,e,r){return this.capacity=t||1024,this.slots=new Array(this.capacity),this.type="local"===e?"local":"session",this.name=r?r+"_"+this.type+"M"+log(this.capacity):this.type+"M"+log(this.capacity),this.free=0,this.save=function(){for(var t=0;t<this.slots.length;t++)"local"===this.type?localStorage.setItem(this.name+"#"+t,this.slots[t]):sessionStorage.setItem(this.name+"#"+t,this.slots[t])},this.remove=function(t){this.slots.remove(JSON.stringify(t)),"local"===this.type?localStorage.setItem(this.getLocation(t),void 0):sessionStorage.setItem(this.getLocation(t),void 0)},this.getLocation=function(t){if("local"===this.type){for(var e in localStorage)if(localStorage.hasOwnProperty(e)&&localStorage[e]===JSON.stringify(t))return e}else for(e in sessionStorage)if(sessionStorage.hasOwnProperty(e)&&sessionStorage[e]===JSON.stringify(t))return e
return-1},this.clear=function(){if(this.slots=new Array(this.capacity),this.free=0,"local"===this.type)for(var t in localStorage)localStorage.hasOwnProperty(t)&&t.indexOf(this.name)>-1&&localStorage.removeItem(t)
else for(t in sessionStorage)sessionStorage.hasOwnProperty(t)&&t.indexOf(this.name)>-1&&sessionStorage.removeItem(t)},this.add=function(t){this.slots[this.free++]=JSON.stringify(t)},this.print=function(){Essence.say(this.name+"'s slots: ","info")
for(var t=0;t<this.slots.length;t++)try{Essence.say(t+": "+JSON.parse(this.slots[t]))}catch(e){Essence.say(t+": ")}},this.pop=function(){"local"===this.type?localStorage.removeItem(this.getLocation(this.slots.last())):sessionStorage.removeItem(this.getLocation(this.slots.last())),this.free--,this.slots.pop()},this.toString=function(){return this.type.capitalize()+" memory "+this.name+": "+this.slots.toStr(!0)},this}function stup(t){for(alert("You have 10s to type something !"),Sys["in"].recording=!0,Sys["in"].data=[],setTimeout(function(){return Sys["in"].recording=!1,alert("Stop !!"),t&&t(Sys["in"].data.join("")),Sys["in"].data.join("")},1e4);(0===Sys["in"].data.length||$G.las)&&Sys["in"].recording;);return Sys["in"].data.join("")}function RegExpify(t){return new RegExp(t.replace(/[|\\{}()[\]^$+*?.:\'<>%]/g,"\\$&"),"gm")}function unRegExpify(t){return t.toString().get(1,t.toString().lastIndexOf("/")-1).remove("\\")}function Objectify(t,e){for(var r={},s=0;s<t.length;s++)r[t[s]]=e[s]
return r}function name2type(t,e){switch(t){case"Number":return Number(e)
case"String":return String(e)
case"Boolean":return Boolean(e)
case"Function":return Function(e,arguments.toArray().get(2))
case"Object":return Object(e,arguments.toArray().get(2))
case"Date":return Date(e,arguments.toArray().get(2))
case"Array":return Array(e,arguments.toArray().get(2))
case"RegExp":return RegExp(e,arguments.toArray().get(2).toString())
case"Error":return Error(e,arguments.toArray().get(2))
case"File":return File(e,arguments.toArray().get(2))
case"URL":return URL(e,arguments.toArray().get(2))
case"FileReader":return FileReader(e,arguments.toArray().get(2))
case"FileWriter":return FileWriter(e,arguments.toArray().get(2))
case"Blob":return Blob(e,arguments.toArray().get(2))
case"Element":return Element(e,arguments.toArray().get(2))
case"Person":return Person(e,arguments.toArray().get(2))
case"Item":return Item(e,parseFloat(arguments.toArray().get(2)))
case"Colour":return Colour(e,arguments.toArray().get(2))
case"LinkedList":return LinkedList(e,arguments.toArray().get(2))
case"TreeNode":return TreeNode(e,arguments.toArray().get(2))
case"Node":return Node(e,arguments.toArray().get(2))
case"PathNode":return PathNode(e,arguments.toArray().get(2))
case"NTreeNode":return NTreeNode(e,arguments.toArray().get(2))
case"Set":return Set(e,arguments.toArray().get(2))
case"SortedSet":return SortedSet(e,arguments.toArray().get(2))
case"Stack":return Stack(e,arguments.toArray().get(2))
case"StackArray":return Stack(e,arguments.toArray().get(2))
case"StackList":return StackList(e,arguments.toArray().get(2))
case"Queue":return Queue(e,arguments.toArray().get(2))
case"QueueArray":return QueueArray(e,arguments.toArray().get(2))
case"QueueList":return QueueList(e,arguments.toArray().get(2))
case"Shape":return Shape(e,arguments.toArray().get(2))
case"Box":return Box(e,arguments.toArray().get(2))
case"AABB":return AABB(e,arguments.toArray().get(2))
case"Circ":return Circ(e,arguments.toArray().get(2))
case"Pt":return Pt(e,arguments.toArray().get(2))
case"Line":return Line(e,arguments.toArray().get(2))
case"Vector":return Vector(e,arguments.toArray().get(2))
case"Polygon":return Polygon(e,arguments.toArray().get(2))
case"database":return database(e,arguments.toArray().get(2))
case"process":return process(e,arguments.toArray().get(2))
case"server":return server(e,arguments.toArray().get(2))
case"Archive":return Archive(e,arguments.toArray().get(2))
case"Machine":return Machine(e,arguments.toArray().get(2).toString())
case"Memory":return Memory(e,arguments.toArray().get(2))
case"WebPage":return WebPage(e,arguments.toArray().get(2))
case"WebApp":return WebApp(e,arguments.toArray().get(2))
case"virtualHistory":return virtualHistory(e,arguments.toArray().get(2))
case"Editor":return Editor(e,arguments.toArray().get(2))
case"Preview":return Preview(e,arguments.toArray().get(2))
case"Debugger":return Debugger(e,arguments.toArray().get(2))
case"Parser":return Parser(e,arguments.toArray().get(2))
case"Toolbar":return Toolbar(e,arguments.toArray().get(2))
case"IDE":return IDE(e,arguments.toArray().get(2))
case"Template":return Template(e,arguments.toArray().get(2))
case"Stream":return Stream(e,arguments.toArray().get(2))
case"MultiStream":return MultiStream(e,arguments.toArray().get(2))
default:return t}}function FA(t){return this.regexp=t,this.states=[],this}function exp2dict(t){var e=(RegExpify(t),[])
return e}function arrayLiteral(t,e){return t.length>1?t.get(-1).toStr(!0)+" "+(e||"and")+" "+t.last():t[0]}var Misc={name:"Misc",version:1,run:function(){},description:"Miscellaneous",dependency:["Files"],author:"Maximilian Berkmann",complete:!1,toString:function(){return"Module(name='"+this.name+"', version="+this.version+", description='"+this.description+"', author='"+this.author+"', complete="+this.complete+", run="+this.run+")"}}
!function(){Misc.complete=!0}()
var base64={PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 + /",getbyte64:function(t,e){if(e=this.ALPHA.indexOf(t.charAt(e||0)),-1===e)throw"Cannot decode base64"
return e},decode:function(t){t+=""
var e,r,s,n=this.gb64,a=t.length
if(0===a)return t
if(a%4!=0)throw"Cannot decode base64"
e=0,t.charAt(a-1)===base64.PADCHAR&&(e=1,t.charAt(a-2)===base64.PADCHAR&&(e=2),a-=4)
var i=[]
for(r=0;a>r;r+=4)s=n(t,r)<<18|n(t,r+1)<<12|n(t,r+2)<<6|n(t,r+3),i.push(String.fromCharCode(s>>16,s>>8&255,255&s))
switch(e){case 1:s=n(t,r)<<18|n(t,r+1)<<12|n(t,r+2)<<6,i.push(String.fromCharCode(s>>16,s>>8&255))
break
case 2:s=n(t,r)<<18|n(t,r+1)<<12,i.push(String.fromCharCode(s>>16))}return i.join("")},getbyte:function(t,e){var r=t.charCodeAt(e||0)
if(r>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5"
return r},encode:function(t){if(1!=arguments.length)throw"SyntaxError: Only arguments please"
var e,r,s=this.PADCHAR,n=this.ALPHA,a=this.getbyte,i=[]
t+=""
var o=t.length-t.length%3
if(0===t.length)return t
for(e=0;o>e;e+=3)r=a(t,e)<<16||a(t,e+1)<<8||a(t,e+2),i.push(n.charAt(r>>18)),i.push(n.charAt(r>>12&63)),i.push(n.charAt(r>>6&63)),i.push(n.charAt(63&r))
switch(t.length-o){case 1:r=a(t,e)<<16,i.push(n.charAt(r>>18)+n.charAt(r>>12&63)+s+s)
break
case 2:r=a(t,e)<<16||a(t,e+1)<<8,i.push(n.charAt(r>>18)+n.charAt(r>>12&63)+n.charAt(r>>6&63)+s)}return i.join("")}},Sys={"in":{recording:!1,record:function(t){this.recording&&this.data.push(getKey(t)[0])},startRecording:function(t){this.recording=!0,this.record(t)},stopRecording:function(){return this.recording=!1,this.data.last()},data:[]},log:function(t){console.log("[System]  "+t)},debug:function(t){this.log("Debugging: "+t.name),console.group(),console.time("debug"),t(Array.from(arguments).get(1)),console.timeEnd("Time"),console.trace(),console.groupEnd()},out:function(){return Essence.addToPrinter("\b"+this["in"].data),Essence.txt2print},toString:function(){return"[object System]"}}
window.onkeypress=function(t){Sys["in"].record(t),$G.lastKeyPair=getKey(t)}
