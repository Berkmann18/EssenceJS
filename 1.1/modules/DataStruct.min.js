/**
 * @module DataStruct
 * @description Data structures
 * @version 1.0
 * @since 1.1
 * @license MIT
 * @author Maximilian Berkmann <maxieberkmann@gmail.com>
 * @copyright Maximilian Berkmann 2016
 * @requires essence
 * @requires DOM
 * @requires Maths
 * @requires Files
 * @type {Module}
 * @exports DataStruct
 */
function LinkedList(t,i,s){return this.payload=t||1,this.next=i||{payload:1,next:null},this.next.show=function(){return this.name+":"+this.next.payload+"->"},this.name=s,this.show=function(){return this.name+":"+this.payload+"->"+this.next.show()},this.toString=function(){return"LinkedList("+this.show()+")"},this}function TreeNode(t,i,s){return this.left=i,this.right=s,this.payload=t||0,this.add=function(t,i){this.left=t,this.right=i},this.addLeft=function(t){for(var i=0;i<t.length;i++)0===i?this.left=t[0]:t[i-1].left=t[i]},this.addRight=function(t){for(var i in t)t.hasOwnProperty(i)&&(0===i?this.right=t[0]:t[i-1].right=t[i])},this.traverse=function(){return this.left&&this.left.traverse(),this.right&&this.right.traverse(),this},this.printInOrder=function(){this.left&&this.left.printInOrder(),Essence.addToPrinter(this.payload+"->"),this.right&&this.right.printInOrder(),Essence.addToPrinter("\r\n")},this.printPreOrder=function(){Essence.addToPrinter(this.payload+"->"),this.left&&this.left.printPreOrder(),this.right&&this.right.printPreOrder(),Essence.addToPrinter("\r\n")},this.printPostOrder=function(){this.left&&this.left.printPreOrder(),this.right&&this.right.printPreOrder(),Essence.addToPrinter(this.payload+"->"),Essence.addToPrinter("\r\n")},this.inOrder=function(t,i,s,r){t||(t=""),i||(i="&nbsp;&nbsp;"),s||(s=0),r||(r="|-"),this.left&&this.left.inOrder(t+i,i,s+1,r),println(t+r+this.payload+i+" (deepth="+s+")"),this.right&&this.right.inOrder(t+i,i,s+1,r)},this.preOrder=function(t,i,s,r){t||(t=""),i||(i="&nbsp;&nbsp;"),s||(s=0),r||(r="|-"),println(t+r+this.payload+i+" (deepth="+s+")"),this.left&&this.left.preOrder(t+i,i,s+1,r),this.right&&this.right.preOrder(t+i,i,s+1,r)},this.postOrder=function(t,i,s,r){t||(t=""),i||(i="&nbsp;&nbsp;"),s||(s=0),r||(r="|-"),this.left&&this.left.postOrder(t+i,i,s+1,r),this.right&&this.right.postOrder(t+i,i,s+1,r),println(t+r+this.payload+i+" (deepth="+s+")")},this.getInOrder=function(t){t||(t="->")
var i=""
return this.left&&(i+=this.left.getInOrder(t)),i+=t+this.payload,this.right&&(i+=this.right.getInOrder(t)),i},this.getPreOrder=function(t){t||(t="->")
var i=""
return i+=t+this.payload,this.left&&(i+=this.left.getPreOrder(t)),this.right&&(i+=this.right.getPreOrder(t)),i},this.getPostOrder=function(t){t||(t="->")
var i=""
return this.left&&(i+=this.left.getPostOrder(t)),this.right&&(i+=this.right.getPostOrder(t)),i+t+this.payload},this.isLeaf=function(){return!this.left&&!this.right},this.find=function(t,i){return"bfs"===i.normal()?this.bfs(t):this.dfs(t)},this.dfs=function(t){var i=0,s=0,r=[]
for(r.push(this);r!=[];){i=0
var n=r.pop()
try{if(n.payload===t)return[i,s]}catch(e){return[-1,s]}n.left&&r.push(n.left),n.right&&r.push(n.right),i++,s++}},this.bfs=function(t){var i=0,s=0,r=[]
for(r.unshift(this);r!=[];){i=0
var n=r.pop()
try{if(n.payload===t)return[i,s]}catch(e){return[-1,s]}n.left&&r.unshift(n.left),n.right&&r.unshift(n.right),i++,s++}},this.sum=function(){var t=this.payload
return this.left&&(t+=this.left.sum()),this.right&&(t+=this.right.sum()),t},this.min=function(){var t=this.payload
return this.left&&(t=Math.min(t,this.left.min())),this.right&&(t=Math.min(t,this.right.min())),t},this.max=function(){var t=this.payload
return this.left&&(t=Math.max(t,this.left.max())),this.right&&(t=Math.max(t,this.right.max())),t},this.nbOfBranches=function(t){return t||(t=0),this.left&&(t=this.left.nbOfBranches(t+1)),this.right&&(t=this.right.nbOfBranches(t+1)),t},this.avg=function(){return this.sum()/this.nbOfBranches()},this.printBFS=function(t){t||(t="->")
var i=[],s=""
for(i.unshift(this);i!=[];){var r=i.pop()
s+=r+t
try{r.left&&i.unshift(r.left),r.right&&i.unshift(r.right)}catch(n){Essence.say(n+" caused "+this+".printBFS("+t+") to go wrong","err")}}return t},this.toString=function(){var t="TreeNode(payload = "+this.payload+", "
return this.left&&(t+="left = "+this.left.toString()),this.right&&(t+="right = "+this.right.toString()),t.substring(0,t.length)+")"},this.toArray=function(t){var i=[]
return this.left&&(t?i.push(this.left.toArray().toString().split(",")):i.push(this.left.toArray())),i.push(this.payload),this.right&&(t?i.push(this.right.toArray().toString().split(",")):i.push(this.right.toArray())),t?i.toString().split(","):i},this}function Node(t,i,s){return this.payload=t||1,this.next=i,this.prev=s,this.traverse=function(){this.next&&this.next.traverse(),Essence.say("payload: "+this.payload)},this.print=function(){null!=this.next&&this.next.print(),Essence.print(this.payload+"=>")},this.printList=function(){null===this.next?Essence.txt2print+="->"+this.v:this.next.printList(),Essence.print("")},this.last=function(){return null===this.next?this:this.next.last()},this.append=function(t){null===this.next?(this.next=new Node(t),this.next.prev=this):this.next.append(t)},this.remove=function(){var t=this.next
this.next=t.next,t.next.prev=this},this.reverse=function(){if(null==this.next)return this
var t=this.next.reverse()
return t.next=this,t.prev=null,this.prev=t,this.next=null,t},this.toString=function(){return"Node(payload = "+this.payload+", previous = "+this.prev+", next = "+this.next+")"},this.equals=function(t){return this.payload===t.payload&&this.next.equals(t.next)&&this.prev.equals(t.prev)},this.find=function(t,i){return i||(i=0),this.payload===t?i:this.next?this.next.find(t,i+1):[-1,i]},this}function PathNode(t,i){return this.f=t+i||1,this.parent=null,this.back=function(t){return isNon(t)||1>=t?this.parent:this.parent.back(t-1)},this.isCloser=function(t){return this.f<=t.f},this.toString=function(){return"PathNode(f="+this.f+", parent="+this.parent.toString()+")"},this}function NTreeNode(t,i){return this.payload=t||0,this.childs=i||[],this.add=function(t){this.childs.push(t)},this.traverse=function(){for(var t in this.childs)this.childs.hasOwnProperty(t)&&t.traverse()
return this},this.printInOrder=function(){for(var t=0;t<this.childs-1;t++)this.childs[t].printInOrder(),Essence.addToPrinter(this.payload+"->"),this.childs[t+1].printInOrder(),Essence.addToPrinter("\r\n")
Essence.addToPrinter("\b")},this.printPreOrder=function(){for(var t=0;t<this.childs-1;t++)Essence.addToPrinter(this.payload+"->"),this.childs[t].printInOrder(),this.childs[t+1].printInOrder(),Essence.addToPrinter("\r\n")
Essence.addToPrinter("\b")},this.printPostOrder=function(){for(var t=0;t<this.childs-1;t++)this.childs[t].printInOrder(),this.childs[t+1].printInOrder(),Essence.addToPrinter(this.payload+"->"),Essence.addToPrinter("\r\n")
Essence.addToPrinter("\b")},this.inOrder=function(t,i,s,r){t||(t=""),i||(i="&nbsp;&nbsp;"),s||(s=0),r||(r="|-")
for(var n=0;n<this.childs-1;n++)this.childs[n].inOrder(t+i,i,s+1,r),println(t+r+this.payload+i+" (deepth="+s+")"),this.childs[n].inOrder(t+i,i,s+1,r)},this.preOrder=function(t,i,s,r){t||(t=""),i||(i="&nbsp;&nbsp;"),s||(s=0),r||(r="|-")
for(var n=0;n<this.childs-1;n++)println(t+r+this.payload+i+" (deepth="+s+")"),this.childs[n].inOrder(t+i,i,s+1,r),this.childs[n].inOrder(t+i,i,s+1,r)},this.postOrder=function(t,i,s,r){t||(t=""),i||(i="&nbsp;&nbsp;"),s||(s=0),r||(r="|-")
for(var n=0;n<this.childs-1;n++)this.childs[n].inOrder(t+i,i,s+1,r),this.childs[n].inOrder(t+i,i,s+1,r),println(t+r+this.payload+i+" (deepth="+s+")")},this.getOrder=function(t){return this.payload+(t||"->")+this.childs.map(function(t){return t.payload}).join(t||"->")},this.isLeaf=function(){return!isNon(this.childs)},this.find=function(t,i){return"bfs"===i.normal()?this.bfs(t):this.dfs(t)},this.dfs=function(t,i,s){i||(i=0),s||(s=0)
for(var r in this.childs)this.childs.hasOwnProperty(r)&&r.dfs(t,i+1,s++)
return[-1,s]},this.bfs=function(t,i,s){i||(i=0),s||(s=0)
var r=[]
for(r.unshift(this);r!=[];){i=0
var n=new NTreeNode(r.pop())
if(n.payload===t)return[i,s]
n.left&&r.unshift(n.left),n.right&&r.unshift(n.right),i++,s++}return[-1,s]},this.sum=function(){var t=this.payload
for(var i in this.childs)this.childs.hasOwnProperty(i)&&(t+=i.payload)
return t},this.min=function(){var t=this.payload
for(var i in this.childs)this.childs.hasOwnProperty(i)&&(t=Math.min(t,i.payload))
return t},this.max=function(){var t=this.payload
for(var i in this.childs)this.childs.hasOwnProperty(i)&&(t=Math.max(t,i.payload))
return t},this.nbOfBranches=function(t){t||(t=0)
for(var i in this.childs)this.childs.hasOwnProperty(i)&&(t=i.nbOfBranches(t+1))
return t},this.avg=function(){return this.sum()/this.nbOfBranches()},this.printBFS=function(t){for(var i=[this],s=t||"-";!i.isEmpty();){var r=new NTreeNode(i.pop())
println(s+">"+r.payload),s+="-"
for(var n in this.childs)this.childs.hasOwnProperty(n)&&i.unshift(n)}},this.toString=function(){var t="NTreeNode(payload="+this.payload+", childs="
for(var i in this.childs)this.childs.hasOwnProperty(i)&&(t+=i.toString())
return t.substring(0,t.length)+")"},this.toArray=function(t){var i=[]
i.push(this.payload)
for(var s in this.childs)this.childs.hasOwnProperty(s)&&(t?i.push(s.toArray().toString().split(",")):i.push(s.toArray()))
return t?i.toString().split(","):i},this}function Set(t){return this.value=(isType(t,"Array")?rmDuplicates(t):[t])||[],this.size=function(){return this.value.length},this.add=function(t){if(isType(t,"array"))for(var i=0;i<t.length;i++)this.add(t[i]);-1===this.value.indexOf(t)&&this.value.push(t)},this.remove=function(t){if(this.value.has(t))if(isType(t,"array"))for(var i=0;i<t.length;i++)this.remove(t[i])
else this.value=this.value.remove(t)},this.clear=function(t){t?this.value=this.value.remove(this.value[t]):this.value=[]},this.isEmpty=function(){return 0===this.value.length},this.contains=function(t){if(isType(t,"array")){for(var i=!0,s=0;s<t.length;s++){if(!i)return!1
i=i&&this.contains(t[s])}return i}return this.value.has(t)},this.equals=function(t){return this.value.toString()===t.value.toString()},this.isSame=function(t){if(this.equals(t))return!0
for(var i=!0,s=0;s<t.size();s++){if(!i)return!1
i=i&&this.contains(t.value[s])}return i},this.toString=function(){return"Set("+this.value.toString()+")"},this.subset=function(t,i){return this.value.slice(t,i+1)},this.get=function(t){return this.value[t]},this.indexOf=function(t){return this.value.indexOf(t)},this.set=function(t,i){this.value[t]=i},this.first=function(){return this.value[0]},this.last=function(){return this.value.last()},this.min=function(t,i){return this.value.min(t,i)},this.max=function(t,i){return this.value.max(t,i)},this.median=function(){return this.value.median()},this.forEach=function(t){for(var i=0;i<this.size();i++)t(this.get(i))},this}function SortedSet(t){return this.value=Copy(t).quickSort()||[],this.add=function(t){isType(t,"array")?this.value.multiPlace(t):this.value.place(t),this.value=rmDuplicates(this.value)},this.toString=function(){return"SortedSet("+this.value.toString()+")"},this}function Stack(t,i){return this.value=isType(i,"Number")?new Array(i):[],this.limit=i||null,t&&this.value.push(t),this.peek=function(){return this.value.last()},this.ground=function(){return this.value[0]},this.push=function(t){if(this.isFull())throw new Error("Stack overflow !")
isType(t,"array")?this.value.append(t):this.value.push(t)},this.pop=function(){if(this.isEmpty())throw new Error("Stack underflow !")
return this.value.pop()},this.isEmpty=function(){return 0===this.value.length},this.isFull=function(){return null!=this.limit?this.value.length>=this.limit:!1},this.size=function(){return this.value.length},this.toString=function(){return"Stack("+this.value.toString()+")"},this}function StackArray(t){return this.value=new Array(t),this.top=-1,this.peek=function(){return this.value[this.top]},this.ground=function(){return this.value[0]},this.push=function(t){if(this.isFull())throw new Error("Stack overflow !")
if(isType(t,"array"))for(var i=0;i<t.length;i++)this.push(t[i])
else this.top++,this.value[this.top]=t},this.pop=function(t){if(this.isEmpty())throw new Error("Stack underflow !")
if(!isType(t,"array")){var i=this.peek()
return this.top--,i}for(var s=0;s<t.length;s++)this.pop(t[s])},this.isEmpty=function(){return this.top<=-1},this.isFull=function(){return this.top>=this.value.length},this.size=function(){return this.top+1},this.toString=function(){return"Stack("+this.value.toString()+")"},this}function StackList(t){return this.top=new Node,this.peek=function(){return this.isEmpty()||null===this.top?null:this.top.next.payload},this.ground=function(){return this.top.payload},this.push=function(t){if(isType(t,"array"))for(var i=0;i<t.length;i++)this.push(t[i])
else{var s=new Node(t,this.top)
this.top=s}return this},t&&this.push(t),this.pop=function(t){if(!this.isEmpty())throw new Error("I can't pop from an empty stack list")
if(!t){var i=this.top.payload
return this.top=this.top.next,i}for(var s=0;t>s;s++)this.pop()},this.isEmpty=function(){return null==this.top},this.size=function(t){return null!=this.top?this.size(t+1):t},this}function Queue(t,i){return this.value=isType(i,"Number")?new Array(i):[],this.limit=i||null,t&&this.value.push(t),this.enqueue=function(t){if(this.isFull())throw new Error("Queue overflow !")
isType(t,"array")?this.value.prepend(t):this.value.unshift(t)},this.dequeue=function(){if(this.isEmpty())throw new Error("Queue underflow !")
var t=this.head()
return this.value.pop(),t},this.head=function(){return this.value.last()},this.tail=function(){return this.value[0]},this.isEmpty=function(){return 0===this.value.length},this.isFull=function(){return null!=this.limit?this.value.length>=this.limit:!1},this.size=function(){return this.value.length},this.toString=function(){return"Queue(head="+this.head()+", tail="+this.tail()+", value="+this.value.toString()+")"},this}function QueueArray(t){return this.value=t||[],this.front=-1,this.back=-1,this.enqueue=function(t){if(isType(t,"array"))for(var i=0;i<t.length;i++)this.enqueue(t[i])
else{if(this.isFull())throw new Error("The queue is full")
this.isEmpty()?(this.front++,this.back++,this.value[this.back]=t):(this.back=(this.back+1)%this.value.length,this.value[this.back]=t)}},this.dequeue=function(){var t
if(this.isEmpty())throw new Error("I can't dequeue from an empty queue")
return this.front===this.back?(t=this.value[this.front],this.front=this.back=-1):(t=this.value[this.front],this.front=(this.front+1)%this.value.length),t},this.isEmpty=function(){return-1===this.front&&-1===this.back},this.isFull=function(){return this.back>(this.front+1)%this.value.length},this.size=function(){return this.value.length},this.toString=function(){return"Queue(front="+this.front+", back="+this.back+", value="+this.value.toString()+")"},this}function QueueList(){return this.front=null,this.back=null,this.len=0,this.enqueue=function(t){if(isType(t,"array"))for(var i=0;i<t.length;i++)this.enqueue(t[i])
else{var s=null!=this.back?new Node(t,this.back,null):new Node(t)
null!=this.back.prev&&(this.back.prev=s),this.back=s,this.len++}return this},this.dequeue=function(){if(this.isEmpty())throw new Error("I can't dequeue an empty queue list")
return this.front=this.front.prev,this.len--,this.front},this.isEmpty=function(){return 0===this.len||null===this.back},this.size=function(){return this.len},this.toString=function(){for(var t="",i=this.front;null!=i;)t+="<-"+i.payload,i=i.prev
return t},this.remove=function(t){for(var i=this.front;null!=i;)null==i.payload||i.payload!=t&&!i.payload.equals(t)||(i=null),i=i.next},this.insertAt=function(t,i){this.back.next=new Node(i),0===t?this.front=new Node(i):t===this.len?this.back=new Node(i):t>this.len&&this.enqueue(i)},this}function Astar(t,i){for(var s,r,n,e=i,a=[t],o=[];a.length>0;){var u=[],l=a[0].f
for(var f in a)a.hasOwnProperty(f)&&(u.push(a[f].f),l=Math.min(l,a[f].f))
if(s=a.filter(function(t){return t.f===l?t:void 0})[0],a=a.filter(function(t){return t.f!=l?t:void 0}),s===e){for(nodeSucessor in s)if(s.hasOwnProperty(r)){r.f=s.f+h(r,s)
var c=lookfor(r,a)
if(-1!=c){if(c=c[0],s.f<a[c]||-1!=lookfor(r,o)&&s.f<a[lookfor(r,o)][0].f)continue
a=a.remove(r),o=o.remove(r),r.parent=s,n=h(r,e),a.push(r)}o.push(s)}throw"Solution found ! With h="+n}}}function A(t,i,s){for(var r=[],n=[t],e=[],h=[0],a=[euclidianDist(t,i)];n.length>0;){var o=n[a.indexOf(a.min())]
if(o===i)return reconPath(e,o,s)
n=n.remove(o),r.push(o)
var u=s.neighbour(o[0],o[1])
Essence.say("neighbour of "+o+":\n"+u.toStr(!0),"info")
for(var l=0;u>l;l++)if(!r.has(u[l])){var f=h[r.indexOf(o)]+1
if(-1===r.indexOf(u[l]))n.push(u[l])
else if(f>=h[l])break}e[l]=o,h[l]=f,a[l]=h[l]+euclidianDist(u[l],i)}}function reconPath(t,i,s){for(var r=[i];i in keyList(t);)i=t[s.lookFor(i)],r.append(i)
return r}function IDAstar(){}function alphabetSort(t){if(!t.isIterable())throw new TypeError("alphabetSort cannot sort non iterable objects")
if(isType(t,"String"))return t.split("").quickSort().join("")
for(var i=t.uniform(),s=!0,r=1;s;){s=!1
for(var n=0;n<i.maxLength();n++){for(var e=0;e<i.length-r;e++)0==n&&i[e].charAt(n)>i[e+1].charAt(n)?(swap(i,e,e+1),s=!0):i[e].charAt(n-1)===i[e+1].charAt(n-1)&&i[e].charAt(n)>i[e+1].charAt(n)&&(swap(i,e,e+1),s=!0)
r++}}return i.trimAll("r")}function occurrenceSort(t){var i=t.map(function(i){return t.count(i)}),s=rmDuplicates(t),r=new Map(i),n=[]
return s.map(function(i){r.add(t.count(i),i)}),r.forEach(function(t){n.prepend(t)},!0),n}function binarySearch(t,i){t.quickSort()
for(var s=2,r=t[Math.floor(t.length/s)],n=0;r!=i&&s<t.length;){if(r===i)return!0
s*=2,r=i>r?t[Math.floor(t.length/s)]:t[3*Math.floor(t.length/s)],debugging&&Essence.say("i="+s+"\nterm="+r+"\nloops="+n),n++}return r===i}function search(t,i){var s=0,r=t.length-1,n=Math.floor((r-s)/2)
if(t[n]===i)return n
for(;t[n]!=i;){if(s>r)return-1
t[n]<i?s=n+1:r=n-1,n=Math.floor((r-s)/2)}}function Archive(t,i){return this.name=t||"Archive",this.data=i||"",this.dictionary=[],this.result=[],this.updateDict=function(){for(var t,s=[],r=alphabetSort(i),n=0;n<this.data.length-1;n++)r[n]!=r[n+1]&&s.push(r[n])
for(s=rmDuplicates(s),t=new Array(s.length),r=[],n=0;n<s.length;n++)t[n]=i.count(s[n]),r[n]=s[n]+t[n]
for(this.dictionary=occurrenceSort(this.data),n=0;n<this.dictionary.length;n++)this.result[n]=conv(n,10,2)},this.getResult=function(){this.updateDict()
for(var t=this.data,i=0;i<this.data.length;i++)console.log(i+"// "+this.dictionary[this.dictionary.indexOf(this.data[i])]),t=t.replace(RegExpify(this.dictionary[this.dictionary.indexOf(this.data[i])]),this.result[i])
return t},this}function virtualHistory(t){return this.src=t,this.DEFAULT_STATE=t,this.states=new Set(this.src),this.state=0,this.reset=function(){this.src=this.DEFAULT_STATE},this.update=function(t){this.src!=t&&this.add(t)},this.add=function(t){if(isType(t,"array"))for(var i=0;i<t.length;i++)this.add(t[i])
else this.src=t,this.states.add(this.src),this.state++},this.get=function(t){return this.states.get(t)},this.undo=function(){if(0===this.state)throw new Error("Set underflow, it's not possible to undo to a non-existent state.")
this.state--,this.src=this.get(this.state)},this.redo=function(){if(this.state===this.states.size()-1)throw new Error("Set overflow, it's not possible to redo to a non-existent state.")
this.state++,this.src=this.get(this.state)},this.getStates=function(){return this.states.toString()},this.isStateDefault=function(){return this.src===this.DEFAULT_STATE},this}function occurrenceList(t){if(!t.isIterable())throw new TypeError("It must be an iterable object !")
for(var i=t.getOccurrences(!0),s=[],r=t.getOccurrences(),n={},e=0;e<r.length;e++)s[e]=r[e].split(":")[0]
for(e=0;e<i.length;e++)n[s[e]]=i[e]
return n}function Stream(initVal,formula,nbVals){if(this.start=initVal||0,this.formula=formula||"x + 1",this.data=[this.start],this.next=function(){this.data.push(eval(this.formula.multiReplace([[/x/g,this.data.last()],[/x0/g,this.start],[/pi/gi,Math.PI],[/e/gi,Math.E],[/sqrt(2)/gi,Math.SQRT2],[/(pow|max|min)\((.*?),(| )(.*?)\)/,"Math.$1($2, $3)"],[/(sqrt|cbrt|cos|sin|tan|acos|asin|cosh|sinh|tanh|acosh|asinh|atanh|exp|abs)\((.*?)\)/,"Math.$1($2)"],[/(ln|log|nthroot|clampTop|clampBottom)\((.*?),(| )(.*?)\)/,"$1($2, $3)"],[/(clamp)\((.*?),(?:| )(.*?),(?:| )(.*?)\)/,"$1($2, $3, $4)"]])))},nbVals)for(var i=1;nbVals>i;i++)this.next()
return this.toString=function(){return"Stream(start="+this.start+", formula="+this.formula+", data="+this.data.toStr(!0)+")"},this}function MultiStream(initVal,formula,nbVals){if(this.start=initVal||0,this.formula=formula||"x + y",this.data=[this.start],this.results=[],this.next=function(){this.data.push(this.data.last().map(function(t){return t+1})),this.results.push(this.compute(this.data.last()))},this.compute=function(data){return eval(this.formula.multiReplace([[/x/g,data[0]],[/x0/g,this.start[0]],[/y/g,data[1]],[/y0/g,this.start[1]],[/z/g,data[2]],[/z0/g,this.start[2]],[/pi/gi,Math.PI],[/e/gi,Math.E],[/sqrt(2)/gi,Math.SQRT2],[/(pow|max|min)\((.*?),(| )(.*?)\)/,"Math.$1($2, $3)"],[/(sqrt|cbrt|cos|sin|tan|acos|asin|cosh|sinh|tanh|acosh|asinh|atanh|exp|abs|e\^)\((.*?)\)/,"Math.$1($2)"],[/(ln|log|nthroot|clampTop|clampBottom)\((.*?),(| )(.*?)\)/,"$1($2, $3)"],[/(clamp)\((.*?),(| )(.*?),(| )(.*?)\)/,"$1($2, $3, $4)"]]))},this.results=[this.compute(this.start)],nbVals>1)for(var i=1;nbVals>i;i++)this.next()
return this.toString=function(){return"MultiStream(start="+this.start.toStr(!0)+", formula="+this.formula+", data="+this.data.toStr(!0)+", results="+this.results.toStr(!0)+")"},this}function Graph(t,i,s,r,n){this.labels=s||["x","y"],this.name=r||"Graph",this.dimension=i||new Array(this.labels.length).fill(50),this.equation=new Equation(t),this.data=n?range(0,n,this.dimension[0],Number(n).length()[1]):range(this.dimension[0])
for(var e=0;e<this.data.length;e++)this.data[e]=[this.data[e],this.equation.compute({x:this.data[e]})]
return this.toString=function(){return"Graph(name="+this.name+", labels="+this.labels.toStr(!0)+", dimension="+this.dimension+", this.equation="+this.equation.toString()+", data="+this.data+")"},this}function Perm(t){if(t.length<=1)return t
if(2===t.length)return[t,Copy(t).reverse()]
if(3===t.length)return Perm(t.get(1)).map(function(i){return t[0]+i}).append(Perm(t.get(-1)).map(function(i){return t.last()+i})).append(Perm(t.remove(t[1])).map(function(i){return t[1]+i}))
for(var i=Perm(t.get(1)).map(function(i){return t[0]+i}),s=1;s<t.length;s++)i.append(Perm(t.remove(t[s])).map(function(i){return t[s]+i}))
return rmDuplicates(i)}function Comb(t,i){for(var s=new Array(t*factorial(i.length)),r=Perm(i.join("")),n=i.lastIndex(),e=0;e<2*i.length&&!(e>n+1);e+=2)i.splice(e+1,i.binaryIndexOf(i[e]),i[e].repeat(t))
return r.append(complement(i,r)),console.log(s.length,r,"\nset="+i),alphabetSort(r)}function EventTable(t,i){return this.name=t||"Event table",this.sources=i||[getFilename(!0)],this.table=[["Source","Event","Timestamp"]],this.add=function(t){this.table.push([t.source||getFilename(!0),t.event,t.timestamp||(new Date).getTime()]),this.sources.uniquePush(t.source||getFilename(!0))},this.make=function(t,i){var s=(new Date).getTime()
i||(i=1)
for(var r=0;(t||1e3)>r;r+=i)this.add({timestamp:s+r})},this.fill=function(t,i){var s=(new Date).getTime(),r=lookfor(s,this.table);-1===r&&s>this.table.last()[2]?this.add({source:t,event:i,timestamp:s}):(this.table[r[0]][0]=t,this.table[r[0]][1]=i)},this.getCleanTable=function(){for(var t=[],i=0;i<this.table.length;i++)isNon(this.table[i][1])||t.push(this.table[i])
return t},this.lookAt=function(t){var i=lookfor(t||(new Date).getTime(),this.table)[0]
return"'"+this.table[i][1]+"' at "+this.table[i][0]},this}function Map(t){return this.keys=new SortedSet(t||[]),this.values=Tablify(this.keys.value),this.add=function(t,i){if(isType(t,"Array"))for(var s=0;t>s;s++)this.add(t[s],isType(i,"Array")?i[s]:i)
this.keys.add(t),void 0===this.values[t]&&(this.values[t]=[]),this.values[t].push(i||null)},this.clear=function(t){t?this.values[t]=[]:this.keys=new Set},this.has=function(t){for(var i in this.keys)if(this.keys.hasOwnProperty(i)&&this.keys[i].has(t))return!0
return!1},this.hasKey=function(t){return this.keys.contains(t)},this.size=function(){var t=this.values
return this.keys.value.map(function(i){return t[i].length})},this.elements=function(t){var i=this.values
return this.keys.value.map(function(s){return t?i[s].toStr(!0):i[s].toString()}).toStr(!0)},this.isEmpty=function(){return this.keys.isEmpty()},this.get=function(t){return this.values[t]},this.remove=function(t,i){i?this.values[t]=this.values[t].remove(i):this.keys.remove(t)},this.toString=function(){return"Map(key/values="+this.values.toArray().toStr(!0)+")"},this.forEach=function(t,i){for(var s=0;s<this.keys.size();s++)i?t(this.values[this.keys.get(s)],s):t(this.keys.get(s),s)},this.merge=function(t){this.keys.add(t.keys.value,t.values)},this.set=function(t,i){this.keys.set(this.keys.indexOf(t),i)},this.replace=function(t,i,s){this.values[t].has(i)&&(this.values[t]=this.values[t].replace(i,s))},this.replaceAll=function(t,i){var s=this
this.forEach(function(r){s.replace(r,t,i)})},this}function DomGraph(){var t=document.children[0],i=new NTreeNode(t.tagName.toLowerCase(),t.children.toArray().map(function(t){return new NTreeNode(t.tagName.toLowerCase())}))
return i.add(),i}var DataStruct=new Module("DataStruct","Data structures",["DOM","Maths","Files"])
NTreeNode.inheritsFrom(TreeNode),SortedSet.inheritsFrom(Set)
